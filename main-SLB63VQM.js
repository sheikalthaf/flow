var ID=Object.defineProperty,xD=Object.defineProperties;var TD=Object.getOwnPropertyDescriptors;var No=Object.getOwnPropertySymbols;var ch=Object.prototype.hasOwnProperty,uh=Object.prototype.propertyIsEnumerable;var lh=(t,e,n)=>e in t?ID(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||={})ch.call(e,n)&&lh(t,n,e[n]);if(No)for(var n of No(e))uh.call(e,n)&&lh(t,n,e[n]);return t},P=(t,e)=>xD(t,TD(e));var dh=(t,e)=>{var n={};for(var r in t)ch.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&No)for(var r of No(t))e.indexOf(r)<0&&uh.call(t,r)&&(n[r]=t[r]);return n};var fh=null;var pl=1,hh=Symbol("SIGNAL");function Ne(t){let e=fh;return fh=t,e}var ph={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function AD(t){if(!(yl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===pl)){if(!t.producerMustRecompute(t)&&!ml(t)){t.dirty=!1,t.lastCleanEpoch=pl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=pl}}function mh(t){return t&&(t.nextProducerIndex=0),Ne(t)}function gh(t,e){if(Ne(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(yl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)gl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ml(t){ko(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(AD(n),r!==n.version))return!0}return!1}function yh(t){if(ko(t),yl(t))for(let e=0;e<t.producerNode.length;e++)gl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gl(t,e){if(_D(t),ko(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)gl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ko(i),i.producerIndexOfThis[r]=e}}function yl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ko(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function _D(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ND(){throw new Error}var kD=ND;function vh(t){kD=t}function x(t){return typeof t=="function"}function cr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Oo=cr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(x(r))try{r()}catch(o){e=o instanceof Oo?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Dh(o)}catch(s){e=e??[],s instanceof Oo?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Oo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Dh(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&hi(n,e)}remove(e){let{_finalizers:n}=this;n&&hi(n,e),e instanceof t&&e._removeParent(this)}};ue.EMPTY=(()=>{let t=new ue;return t.closed=!0,t})();var vl=ue.EMPTY;function Ro(t){return t instanceof ue||t&&"closed"in t&&x(t.remove)&&x(t.add)&&x(t.unsubscribe)}function Dh(t){x(t)?t():t.unsubscribe()}var mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ur={setTimeout(t,e,...n){let{delegate:r}=ur;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ur;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Po(t){ur.setTimeout(()=>{let{onUnhandledError:e}=mt;if(e)e(t);else throw t})}function pi(){}var Ch=Dl("C",void 0,void 0);function wh(t){return Dl("E",void 0,t)}function bh(t){return Dl("N",t,void 0)}function Dl(t,e,n){return{kind:t,value:e,error:n}}var Sn=null;function dr(t){if(mt.useDeprecatedSynchronousErrorHandling){let e=!Sn;if(e&&(Sn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Sn;if(Sn=null,n)throw r}}else t()}function Eh(t){mt.useDeprecatedSynchronousErrorHandling&&Sn&&(Sn.errorThrown=!0,Sn.error=t)}var In=class extends ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ro(e)&&e.add(this)):this.destination=PD}static create(e,n,r){return new fr(e,n,r)}next(e){this.isStopped?wl(bh(e),this):this._next(e)}error(e){this.isStopped?wl(wh(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wl(Ch,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OD=Function.prototype.bind;function Cl(t,e){return OD.call(t,e)}var bl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fo(r)}else Fo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fo(n)}}},fr=class extends In{constructor(e,n,r){super();let i;if(x(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&mt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Cl(e.next,o),error:e.error&&Cl(e.error,o),complete:e.complete&&Cl(e.complete,o)}):i=e}this.destination=new bl(i)}};function Fo(t){mt.useDeprecatedSynchronousErrorHandling?Eh(t):Po(t)}function RD(t){throw t}function wl(t,e){let{onStoppedNotification:n}=mt;n&&ur.setTimeout(()=>n(t,e))}var PD={closed:!0,next:pi,error:RD,complete:pi};var hr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qe(t){return t}function El(...t){return Ml(t)}function Ml(t){return t.length===0?qe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var U=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=LD(n)?n:new fr(n,r,i);return dr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Mh(r),new r((i,o)=>{let s=new fr({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[hr](){return this}pipe(...n){return Ml(n)(this)}toPromise(n){return n=Mh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Mh(t){var e;return(e=t??mt.Promise)!==null&&e!==void 0?e:Promise}function FD(t){return t&&x(t.next)&&x(t.error)&&x(t.complete)}function LD(t){return t&&t instanceof In||FD(t)&&Ro(t)}function Sl(t){return x(t?.lift)}function $(t){return e=>{if(Sl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(t,e,n,r,i){return new Il(t,e,n,r,i)}var Il=class extends In{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function pr(){return $((t,e)=>{let n=null;t._refCount++;let r=j(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var mr=class extends U{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ue;let n=this.getSubject();e.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ue.EMPTY)}return e}refCount(){return pr()(this)}};var Sh=cr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=(()=>{class t extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Lo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Sh}next(n){dr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){dr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){dr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?vl:(this.currentObservers=null,o.push(n),new ue(()=>{this.currentObservers=null,hi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new U;return n.source=this,n}}return t.create=(e,n)=>new Lo(e,n),t})(),Lo=class extends de{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:vl}};var se=class extends de{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var tt=new U(t=>t.complete());function Ih(t){return t&&x(t.schedule)}function xh(t){return t[t.length-1]}function Vo(t){return x(xh(t))?t.pop():void 0}function Xt(t){return Ih(xh(t))?t.pop():void 0}function Ah(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Th(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xn(t){return this instanceof xn?(this.v=t,this):new xn(t)}function _h(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){o.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(p){d(o[0][3],p)}}function l(f){f.value instanceof xn?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Nh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Th=="function"?Th(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var jo=t=>t&&typeof t.length=="number"&&typeof t!="function";function Bo(t){return x(t?.then)}function $o(t){return x(t[hr])}function Ho(t){return Symbol.asyncIterator&&x(t?.[Symbol.asyncIterator])}function Uo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zo=VD();function Wo(t){return x(t?.[zo])}function Go(t){return _h(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield xn(n.read());if(i)return yield xn(void 0);yield yield xn(r)}}finally{n.releaseLock()}})}function qo(t){return x(t?.getReader)}function ae(t){if(t instanceof U)return t;if(t!=null){if($o(t))return jD(t);if(jo(t))return BD(t);if(Bo(t))return $D(t);if(Ho(t))return kh(t);if(Wo(t))return HD(t);if(qo(t))return UD(t)}throw Uo(t)}function jD(t){return new U(e=>{let n=t[hr]();if(x(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BD(t){return new U(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function $D(t){return new U(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Po)})}function HD(t){return new U(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function kh(t){return new U(e=>{zD(t,e).catch(n=>e.error(n))})}function UD(t){return kh(Go(t))}function zD(t,e){var n,r,i,o;return Ah(this,void 0,void 0,function*(){try{for(n=Nh(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Le(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Yo(t,e=0){return $((n,r)=>{n.subscribe(j(r,i=>Le(r,t,()=>r.next(i),e),()=>Le(r,t,()=>r.complete(),e),i=>Le(r,t,()=>r.error(i),e)))})}function Ko(t,e=0){return $((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Oh(t,e){return ae(t).pipe(Ko(e),Yo(e))}function Rh(t,e){return ae(t).pipe(Ko(e),Yo(e))}function Ph(t,e){return new U(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Fh(t,e){return new U(n=>{let r;return Le(n,e,()=>{r=t[zo](),Le(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>x(r?.return)&&r.return()})}function Zo(t,e){if(!t)throw new Error("Iterable cannot be null");return new U(n=>{Le(n,e,()=>{let r=t[Symbol.asyncIterator]();Le(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Lh(t,e){return Zo(Go(t),e)}function Vh(t,e){if(t!=null){if($o(t))return Oh(t,e);if(jo(t))return Ph(t,e);if(Bo(t))return Rh(t,e);if(Ho(t))return Zo(t,e);if(Wo(t))return Fh(t,e);if(qo(t))return Lh(t,e)}throw Uo(t)}function ie(t,e){return e?Vh(t,e):ae(t)}function A(...t){let e=Xt(t);return ie(t,e)}function gr(t,e){let n=x(t)?t:()=>t,r=i=>i.error(n());return new U(e?i=>e.schedule(r,0,i):r)}function xl(t){return!!t&&(t instanceof U||x(t.lift)&&x(t.subscribe))}var Ut=cr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function B(t,e){return $((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:WD}=Array;function GD(t,e){return WD(e)?t(...e):t(e)}function Jo(t){return B(e=>GD(t,e))}var{isArray:qD}=Array,{getPrototypeOf:YD,prototype:KD,keys:ZD}=Object;function Qo(t){if(t.length===1){let e=t[0];if(qD(e))return{args:e,keys:null};if(JD(e)){let n=ZD(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function JD(t){return t&&typeof t=="object"&&YD(t)===KD}function Xo(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function es(...t){let e=Xt(t),n=Vo(t),{args:r,keys:i}=Qo(t);if(r.length===0)return ie([],e);let o=new U(QD(r,e,i?s=>Xo(i,s):qe));return n?o.pipe(Jo(n)):o}function QD(t,e,n=qe){return r=>{jh(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)jh(e,()=>{let c=ie(t[l],e),u=!1;c.subscribe(j(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jh(t,e,n){t?Le(n,t,e):e()}function Bh(t,e,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=m=>c<r?p(m):l.push(m),p=m=>{o&&e.next(m),c++;let v=!1;ae(n(m,u++)).subscribe(j(e,g=>{i?.(g),o?h(g):e.next(g)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){let g=l.shift();s?Le(e,s,()=>p(g)):p(g)}f()}catch(g){e.error(g)}}))};return t.subscribe(j(e,h,()=>{d=!0,f()})),()=>{a?.()}}function fe(t,e,n=1/0){return x(e)?fe((r,i)=>B((o,s)=>e(r,o,i,s))(ae(t(r,i))),n):(typeof e=="number"&&(n=e),$((r,i)=>Bh(r,i,t,n)))}function Tl(t=1/0){return fe(qe,t)}function $h(){return Tl(1)}function yr(...t){return $h()(ie(t,Xt(t)))}function ts(t){return new U(e=>{ae(t()).subscribe(e)})}function Al(...t){let e=Vo(t),{args:n,keys:r}=Qo(t),i=new U(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;ae(n[u]).subscribe(j(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?Xo(r,a):a),o.complete())}))}});return e?i.pipe(Jo(e)):i}function gt(t,e){return $((n,r)=>{let i=0;n.subscribe(j(r,o=>t.call(e,o,i++)&&r.next(o)))})}function en(t){return $((e,n)=>{let r=null,i=!1,o;r=e.subscribe(j(n,void 0,void 0,s=>{o=ae(t(s,en(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Hh(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(j(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function vr(t,e){return x(e)?fe(t,e,1):fe(t,1)}function tn(t){return $((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function zt(t){return t<=0?()=>tt:$((e,n)=>{let r=0;e.subscribe(j(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _l(t){return B(()=>t)}function ns(t=XD){return $((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function XD(){return new Ut}function mi(t){return $((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gt((i,o)=>t(i,o,r)):qe,zt(1),n?tn(e):ns(()=>new Ut))}function Dr(t){return t<=0?()=>tt:$((e,n)=>{let r=[];e.subscribe(j(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Nl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gt((i,o)=>t(i,o,r)):qe,Dr(1),n?tn(e):ns(()=>new Ut))}function kl(t,e){return $(Hh(t,e,arguments.length>=2,!0))}function Cr(...t){let e=Xt(t);return $((n,r)=>{(e?yr(t,n,e):yr(t,n)).subscribe(r)})}function yt(t,e){return $((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,l=>{i?.unsubscribe();let c=0,u=o++;ae(t(l,u)).subscribe(i=j(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function gi(t){return $((e,n)=>{ae(t).subscribe(j(n,()=>n.complete(),pi)),!n.closed&&e.subscribe(n)})}function pe(t,e,n){let r=x(t)||e||n?{next:t,error:e,complete:n}:t;return r?$((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):qe}var eC="https://g.co/ng/security#xss",M=class extends Error{constructor(e,n){super(Hc(e,n)),this.code=e}};function Hc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function X(t){for(let e in t)if(t[e]===X)return e;throw Error("Could not find renamed property on target object.")}function tC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ve(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ve).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Uh(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var nC=X({__forward_ref__:X});function Pr(t){return t.__forward_ref__=Pr,t.toString=function(){return Ve(this())},t}function ke(t){return Ip(t)?t():t}function Ip(t){return typeof t=="function"&&t.hasOwnProperty(nC)&&t.__forward_ref__===Pr}function xp(t){return t&&!!t.\u0275providers}var rC=X({\u0275cmp:X}),iC=X({\u0275dir:X}),oC=X({\u0275pipe:X}),sC=X({\u0275mod:X}),fs=X({\u0275fac:X}),yi=X({__NG_ELEMENT_ID__:X}),zh=X({__NG_ENV_ID__:X});function Uc(t){return typeof t=="string"?t:t==null?"":String(t)}function aC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Uc(t)}function lC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,`Circular dependency in DI detected for ${t}${n}`)}function zc(t,e){throw new M(-201,!1)}function cC(t,e){t==null&&uC(e,t,null,"!=")}function uC(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function ks(t){return Wh(t,Ap)||Wh(t,_p)}function Tp(t){return ks(t)!==null}function Wh(t,e){return t.hasOwnProperty(e)?t[e]:null}function dC(t){let e=t&&(t[Ap]||t[_p]);return e||null}function Gh(t){return t&&(t.hasOwnProperty(qh)||t.hasOwnProperty(fC))?t[qh]:null}var Ap=X({\u0275prov:X}),qh=X({\u0275inj:X}),_p=X({ngInjectableDef:X}),fC=X({ngInjectorDef:X}),F=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(F||{}),Kl;function Np(){return Kl}function nt(t){let e=Kl;return Kl=t,e}function kp(t,e,n){let r=ks(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&F.Optional)return null;if(e!==void 0)return e;zc(t,"Injector")}var vi=globalThis;var _=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=S({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var hC={},Di=hC,pC="__NG_DI_FLAG__",hs="ngTempTokenPath",mC="ngTokenPath",gC=/\n/gm,yC="\u0275",Yh="__source",Sr;function vC(){return Sr}function nn(t){let e=Sr;return Sr=t,e}function DC(t,e=F.Default){if(Sr===void 0)throw new M(-203,!1);return Sr===null?kp(t,void 0,e):Sr.get(t,e&F.Optional?null:void 0,e)}function L(t,e=F.Default){return(Np()||DC)(ke(t),e)}function D(t,e=F.Default){return L(t,Os(e))}function Os(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zl(t){let e=[];for(let n=0;n<t.length;n++){let r=ke(t[n]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=F.Default;for(let s=0;s<r.length;s++){let a=r[s],l=CC(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function CC(t){return t[pC]}function wC(t,e,n,r){let i=t[hs];throw e[Yh]&&i.unshift(e[Yh]),t.message=bC(`
`+t.message,i,n,r),t[mC]=i,t[hs]=null,t}function bC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==yC?t.slice(2):t;let i=Ve(e);if(Array.isArray(e))i=e.map(Ve).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ve(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gC,`
  `)}`}function Rs(t){return{toString:t}.toString()}var Op=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Op||{}),Tt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Tt||{}),xr={},rt=[],je=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(je||{});function Rp(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Jl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];MC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function EC(t){return t===3||t===4||t===6}function MC(t){return t.charCodeAt(0)===64}function Ci(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Kh(t,n,i,null,e[++r]):Kh(t,n,i,null,null))}}return t}function Kh(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Pp="ng-template";function SC(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Rp(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function Fp(t){return t.type===4&&t.value!==Pp}function IC(t,e,n){let r=t.type===4&&!n?Pp:t.value;return e===r}function xC(t,e,n){let r=4,i=t.attrs||[],o=_C(i),s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!vt(r)&&!vt(l))return!1;if(s&&vt(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!IC(t,l,n)||l===""&&e.length===1){if(vt(r))return!1;s=!0}}else{let c=r&8?l:e[++a];if(r&8&&t.attrs!==null){if(!SC(t.attrs,c,n)){if(vt(r))return!1;s=!0}continue}let u=r&8?"class":l,d=TC(u,i,Fp(t),n);if(d===-1){if(vt(r))return!1;s=!0;continue}if(c!==""){let f;d>o?f="":f=i[d+1].toLowerCase();let h=r&8?f:null;if(h&&Rp(h,c,0)!==-1||r&2&&c!==f){if(vt(r))return!1;s=!0}}}}return vt(r)||s}function vt(t){return(t&1)===0}function TC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return NC(e,t)}function Lp(t,e,n=!1){for(let r=0;r<e.length;r++)if(xC(t,e[r],n))return!0;return!1}function AC(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function _C(t){for(let e=0;e<t.length;e++){let n=t[e];if(EC(n))return e}return t.length}function NC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function kC(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function Zh(t,e){return t?":not("+e.trim()+")":e}function OC(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vt(s)&&(e+=Zh(o,i),i=""),r=s,o=o||!vt(r);n++}return i!==""&&(e+=Zh(o,i)),e}function RC(t){return t.map(OC).join(",")}function PC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!vt(i))break;i=o}r++}return{attrs:e,classes:n}}function Be(t){return Rs(()=>{let e=Hp(t),n=P(y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Op.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tt.Emulated,styles:t.styles||rt,_:null,schemas:t.schemas||null,tView:null,id:""});Up(n);let r=t.dependencies;return n.directiveDefs=Qh(r,!1),n.pipeDefs=Qh(r,!0),n.id=VC(n),n})}function FC(t){return _n(t)||Vp(t)}function LC(t){return t!==null}function cn(t){return Rs(()=>({type:t.type,bootstrap:t.bootstrap||rt,declarations:t.declarations||rt,imports:t.imports||rt,exports:t.exports||rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Jh(t,e){if(t==null)return xr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=je.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==je.None?[r,a]:r,e[o]=s):n[o]=r}return n}function kt(t){return Rs(()=>{let e=Hp(t);return Up(e),e})}function _n(t){return t[rC]||null}function Vp(t){return t[iC]||null}function jp(t){return t[oC]||null}function Bp(t){let e=_n(t)||Vp(t)||jp(t);return e!==null?e.standalone:!1}function $p(t,e){let n=t[sC]||null;if(!n&&e===!0)throw new Error(`Type ${Ve(t)} does not have '\u0275mod' property.`);return n}function Hp(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||rt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jh(t.inputs,e),outputs:Jh(t.outputs),debugInfo:null}}function Up(t){t.features?.forEach(e=>e(t))}function Qh(t,e){if(!t)return null;let n=e?jp:FC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(LC)}function VC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Gt=0,k=1,I=2,ve=3,Dt=4,Ye=5,Tr=6,wi=7,Oe=8,Ar=9,on=10,me=11,bi=12,Xh=13,Fr=14,it=15,Oi=16,wr=17,xt=18,Ps=19,zp=20,rn=21,Ol=22,Nn=23,At=25,Wp=1;var kn=7,ps=8,_r=9,Me=10,Wc=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Wc||{});function Tn(t){return Array.isArray(t)&&typeof t[Wp]=="object"}function qt(t){return Array.isArray(t)&&t[Wp]===!0}function Gp(t){return(t.flags&4)!==0}function Fs(t){return t.componentOffset>-1}function Gc(t){return(t.flags&1)===1}function sn(t){return!!t.template}function jC(t){return(t[I]&512)!==0}function Nr(t,e){let n=t.hasOwnProperty(fs);return n?t[fs]:null}var Ql=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function qp(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function un(){return Yp}function Yp(t){return t.type.prototype.ngOnChanges&&(t.setInput=$C),BC}un.ngInherit=!0;function BC(){let t=Zp(this),e=t?.current;if(e){let n=t.previous;if(n===xr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function $C(t,e,n,r,i){let o=this.declaredInputs[r],s=Zp(t)||HC(t,{previous:xr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Ql(c&&c.currentValue,n,l===xr),qp(t,e,i,n)}var Kp="__ngSimpleChanges__";function Zp(t){return t[Kp]||null}function HC(t,e){return t[Kp]=e}var ep=null;var St=function(t,e,n){ep?.(t,e,n)},Jp="svg",UC="math",zC=!1;function WC(){return zC}function _t(t){for(;Array.isArray(t);)t=t[Gt];return t}function Qp(t,e){return _t(e[t])}function st(t,e){return _t(e[t.index])}function qc(t,e){return t.data[e]}function dn(t,e){let n=e[t];return Tn(n)?n:n[Gt]}function GC(t){return(t[I]&4)===4}function Yc(t){return(t[I]&128)===128}function qC(t){return qt(t[ve])}function ms(t,e){return e==null?null:t[e]}function Xp(t){t[wr]=0}function YC(t){t[I]&1024||(t[I]|=1024,Yc(t)&&Ei(t))}function KC(t,e){for(;t>0;)e=e[Fr],t--;return e}function em(t){return t[I]&9216||t[Nn]?.dirty}function Xl(t){em(t)?Ei(t):t[I]&64&&(WC()?(t[I]|=1024,Ei(t)):t[on].changeDetectionScheduler?.notify())}function Ei(t){t[on].changeDetectionScheduler?.notify();let e=Mi(t);for(;e!==null&&!(e[I]&8192||(e[I]|=8192,!Yc(e)));)e=Mi(e)}function tm(t,e){if((t[I]&256)===256)throw new M(911,!1);t[rn]===null&&(t[rn]=[]),t[rn].push(e)}function ZC(t,e){if(t[rn]===null)return;let n=t[rn].indexOf(e);n!==-1&&t[rn].splice(n,1)}function Mi(t){let e=t[ve];return qt(e)?e[ve]:e}var V={lFrame:um(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function JC(){return V.lFrame.elementDepthCount}function QC(){V.lFrame.elementDepthCount++}function XC(){V.lFrame.elementDepthCount--}function nm(){return V.bindingsEnabled}function rm(){return V.skipHydrationRootTNode!==null}function ew(t){return V.skipHydrationRootTNode===t}function tw(){V.skipHydrationRootTNode=null}function G(){return V.lFrame.lView}function Re(){return V.lFrame.tView}function Ri(t){return V.lFrame.contextLView=t,t[Oe]}function Pi(t){return V.lFrame.contextLView=null,t}function Ke(){let t=im();for(;t!==null&&t.type===64;)t=t.parent;return t}function im(){return V.lFrame.currentTNode}function nw(){let t=V.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Fi(t,e){let n=V.lFrame;n.currentTNode=t,n.isParent=e}function om(){return V.lFrame.isParent}function sm(){V.lFrame.isParent=!1}function rw(t){return V.lFrame.bindingIndex=t}function Ls(){return V.lFrame.bindingIndex++}function iw(t){let e=V.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ow(){return V.lFrame.inI18n}function sw(t,e){let n=V.lFrame;n.bindingIndex=n.bindingRootIndex=t,ec(e)}function aw(){return V.lFrame.currentDirectiveIndex}function ec(t){V.lFrame.currentDirectiveIndex=t}function lw(t){let e=V.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function am(){return V.lFrame.currentQueryIndex}function Kc(t){V.lFrame.currentQueryIndex=t}function cw(t){let e=t[k];return e.type===2?e.declTNode:e.type===1?t[Ye]:null}function lm(t,e,n){if(n&F.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&F.Host);)if(i=cw(o),i===null||(o=o[Fr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=V.lFrame=cm();return r.currentTNode=e,r.lView=t,!0}function Zc(t){let e=cm(),n=t[k];V.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function cm(){let t=V.lFrame,e=t===null?null:t.child;return e===null?um(t):e}function um(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function dm(){let t=V.lFrame;return V.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var fm=dm;function Jc(){let t=dm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function uw(t){return(V.lFrame.contextLView=KC(t,V.lFrame.contextLView))[Oe]}function jn(){return V.lFrame.selectedIndex}function On(t){V.lFrame.selectedIndex=t}function hm(){let t=V.lFrame;return qc(t.tView,t.selectedIndex)}function Li(){V.lFrame.currentNamespace=Jp}function dw(){return V.lFrame.currentNamespace}var pm=!0;function Qc(){return pm}function Xc(t){pm=t}function fw(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Yp(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function eu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function ss(t,e,n){mm(t,e,3,n)}function as(t,e,n,r){(t[I]&3)===n&&mm(t,e,n,r)}function Rl(t,e){let n=t[I];(n&3)===e&&(n&=16383,n+=1,t[I]=n)}function mm(t,e,n,r){let i=r!==void 0?t[wr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[wr]+=65536),(a<o||o==-1)&&(hw(t,n,e,l),t[wr]=(t[wr]&4294901760)+l+2),l++}function tp(t,e){St(4,t,e);let n=Ne(null);try{e.call(t)}finally{Ne(n),St(5,t,e)}}function hw(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[I]>>14<t[wr]>>16&&(t[I]&3)===e&&(t[I]+=16384,tp(a,o)):tp(a,o)}var Ir=-1,Rn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function pw(t){return t instanceof Rn}function mw(t){return(t.flags&8)!==0}function gw(t){return(t.flags&16)!==0}function gm(t){return t!==Ir}function gs(t){return t&32767}function yw(t){return t>>16}function ys(t,e){let n=yw(t),r=e;for(;n>0;)r=r[Fr],n--;return r}var tc=!0;function np(t){let e=tc;return tc=t,e}var vw=256,ym=vw-1,vm=5,Dw=0,It={};function Cw(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yi)&&(r=n[yi]),r==null&&(r=n[yi]=Dw++);let i=r&ym,o=1<<i;e.data[t+(i>>vm)]|=o}function vs(t,e){let n=Dm(t,e);if(n!==-1)return n;let r=e[k];r.firstCreatePass&&(t.injectorIndex=e.length,Pl(r.data,t),Pl(e,null),Pl(r.blueprint,null));let i=tu(t,e),o=t.injectorIndex;if(gm(i)){let s=gs(i),a=ys(i,e),l=a[k].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Pl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Dm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function tu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Mm(i),r===null)return Ir;if(n++,i=i[Fr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ir}function nc(t,e,n){Cw(t,e,n)}function Cm(t,e,n){if(n&F.Optional||t!==void 0)return t;zc(e,"NodeInjector")}function wm(t,e,n,r){if(n&F.Optional&&r===void 0&&(r=null),!(n&(F.Self|F.Host))){let i=t[Ar],o=nt(void 0);try{return i?i.get(e,r,n&F.Optional):kp(e,r,n&F.Optional)}finally{nt(o)}}return Cm(r,e,n)}function bm(t,e,n,r=F.Default,i){if(t!==null){if(e[I]&2048&&!(r&F.Self)){let s=Mw(t,e,n,r,It);if(s!==It)return s}let o=Em(t,e,n,r,It);if(o!==It)return o}return wm(e,n,r,i)}function Em(t,e,n,r,i){let o=bw(n);if(typeof o=="function"){if(!lm(e,t,r))return r&F.Host?Cm(i,n,r):wm(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&F.Optional))zc(n);else return s}finally{fm()}}else if(typeof o=="number"){let s=null,a=Dm(t,e),l=Ir,c=r&F.Host?e[it][Ye]:null;for((a===-1||r&F.SkipSelf)&&(l=a===-1?tu(t,e):e[a+8],l===Ir||!ip(r,!1)?a=-1:(s=e[k],a=gs(l),e=ys(l,e)));a!==-1;){let u=e[k];if(rp(o,a,u.data)){let d=ww(a,e,n,s,r,c);if(d!==It)return d}l=e[a+8],l!==Ir&&ip(r,e[k].data[a+8]===c)&&rp(o,a,e)?(s=u,a=gs(l),e=ys(l,e)):a=-1}}return i}function ww(t,e,n,r,i,o){let s=e[k],a=s.data[t+8],l=r==null?Fs(a)&&tc:r!=s&&(a.type&3)!==0,c=i&F.Host&&o===a,u=ls(a,s,n,l,c);return u!==null?Pn(e,s,u,a):It}function ls(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){let h=s[l];if(h&&sn(h)&&h.type===n)return l}return null}function Pn(t,e,n,r){let i=t[n],o=e.data;if(pw(i)){let s=i;s.resolving&&lC(aC(o[n]));let a=np(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?nt(s.injectImpl):null,u=lm(t,r,F.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&fw(n,o[n],e)}finally{c!==null&&nt(c),np(a),s.resolving=!1,fm()}}return i}function bw(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yi)?t[yi]:void 0;return typeof e=="number"?e>=0?e&ym:Ew:e}function rp(t,e,n){let r=1<<t;return!!(n[e+(t>>vm)]&r)}function ip(t,e){return!(t&F.Self)&&!(t&F.Host&&e)}var An=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return bm(this._tNode,this._lView,e,Os(r),n)}};function Ew(){return new An(Ke(),G())}function Vi(t){return Rs(()=>{let e=t.prototype.constructor,n=e[fs]||rc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[fs]||rc(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rc(t){return Ip(t)?()=>{let e=rc(ke(t));return e&&e()}:Nr(t)}function Mw(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[I]&2048&&!(s[I]&512);){let a=Em(o,s,n,r|F.Self,It);if(a!==It)return a;let l=o.parent;if(!l){let c=s[zp];if(c){let u=c.get(n,It,r);if(u!==It)return u}l=Mm(s),s=s[Fr]}o=l}return i}function Mm(t){let e=t[k],n=e.type;return n===2?e.declTNode:n===1?t[Ye]:null}function Sw(t){return typeof t=="function"}function Iw(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function xw(t){return t.flat(Number.POSITIVE_INFINITY)}function nu(t,e){t.forEach(n=>Array.isArray(n)?nu(n,e):e(n))}function Sm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ds(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Tw(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Aw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function _w(t,e,n){let r=ji(t,e);return r>=0?t[r|1]=n:(r=~r,Aw(t,r,e,n)),r}function Fl(t,e){let n=ji(t,e);if(n>=0)return t[n|1]}function ji(t,e){return Nw(t,e,1)}function Nw(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var kr=new _("ENVIRONMENT_INITIALIZER"),Im=new _("INJECTOR",-1),xm=new _("INJECTOR_DEF_TYPES"),Cs=class{get(e,n=Di){if(n===Di){let r=new Error(`NullInjectorError: No provider for ${Ve(e)}!`);throw r.name="NullInjectorError",r}return n}};function Vs(t){return{\u0275providers:t}}function kw(...t){return{\u0275providers:Tm(!0,t),\u0275fromNgModule:!0}}function Tm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return nu(e,s=>{let a=s;ic(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Am(i,o),n}function Am(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ru(i,o=>{e(o,r)})}}function ic(t,e,n,r){if(t=ke(t),!t)return!1;let i=null,o=Gh(t),s=!o&&_n(t);if(!o&&!s){let l=t.ngModule;if(o=Gh(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)ic(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{nu(o.imports,u=>{ic(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Am(c,e)}if(!a){let c=Nr(i)||(()=>new i);e({provide:i,useFactory:c,deps:rt},i),e({provide:xm,useValue:i,multi:!0},i),e({provide:kr,useValue:()=>L(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;ru(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function ru(t,e){for(let n of t)xp(n)&&(n=n.\u0275providers),Array.isArray(n)?ru(n,e):e(n)}var Ow=X({provide:String,useValue:X});function _m(t){return t!==null&&typeof t=="object"&&Ow in t}function Rw(t){return!!(t&&t.useExisting)}function Pw(t){return!!(t&&t.useFactory)}function Or(t){return typeof t=="function"}function Fw(t){return!!t.useClass}var js=new _("Set Injector scope."),cs={},Lw={},Ll;function iu(){return Ll===void 0&&(Ll=new Cs),Ll}var ot=class{},Si=class extends ot{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sc(e,s=>this.processProvider(s)),this.records.set(Im,br(void 0,this)),i.has("environment")&&this.records.set(ot,br(void 0,this));let o=this.records.get(js);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xm,rt,F.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nn(this),r=nt(void 0),i;try{return e()}finally{nn(n),nt(r)}}get(e,n=Di,r=F.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zh))return e[zh](this);r=Os(r);let i,o=nn(this),s=nt(void 0);try{if(!(r&F.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Hw(e)&&ks(e);c&&this.injectableDefInScope(c)?l=br(oc(e),cs):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&F.Self?iu():this.parent;return n=r&F.Optional&&n===Di?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[hs]=a[hs]||[]).unshift(Ve(e)),o)throw a;return wC(a,e,"R3InjectorError",this.source)}else throw a}finally{nt(s),nn(o)}}resolveInjectorInitializers(){let e=nn(this),n=nt(void 0),r;try{let i=this.get(kr,rt,F.Self);for(let o of i)o()}finally{nn(e),nt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ve(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){e=ke(e);let n=Or(e)?e:ke(e&&e.provide),r=jw(e);if(!Or(e)&&e.multi===!0){let i=this.records.get(n);i||(i=br(void 0,cs,!0),i.factory=()=>Zl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===cs&&(n.value=Lw,n.value=n.factory()),typeof n.value=="object"&&n.value&&$w(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ke(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function oc(t){let e=ks(t),n=e!==null?e.factory:Nr(t);if(n!==null)return n;if(t instanceof _)throw new M(204,!1);if(t instanceof Function)return Vw(t);throw new M(204,!1)}function Vw(t){if(t.length>0)throw new M(204,!1);let n=dC(t);return n!==null?()=>n.factory(t):()=>new t}function jw(t){if(_m(t))return br(void 0,t.useValue);{let e=Nm(t);return br(e,cs)}}function Nm(t,e,n){let r;if(Or(t)){let i=ke(t);return Nr(i)||oc(i)}else if(_m(t))r=()=>ke(t.useValue);else if(Pw(t))r=()=>t.useFactory(...Zl(t.deps||[]));else if(Rw(t))r=()=>L(ke(t.useExisting));else{let i=ke(t&&(t.useClass||t.provide));if(Bw(t))r=()=>new i(...Zl(t.deps));else return Nr(i)||oc(i)}return r}function br(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Bw(t){return!!t.deps}function $w(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Hw(t){return typeof t=="function"||typeof t=="object"&&t instanceof _}function sc(t,e){for(let n of t)Array.isArray(n)?sc(n,e):n&&xp(n)?sc(n.\u0275providers,e):e(n)}function fn(t,e){t instanceof Si&&t.assertNotDestroyed();let n,r=nn(t),i=nt(void 0);try{return e()}finally{nn(r),nt(i)}}function ou(t){if(!Np()&&!vC())throw new M(-203,!1)}function op(t,e=null,n=null,r){let i=km(t,e,n,r);return i.resolveInjectorInitializers(),i}function km(t,e=null,n=null,r,i=new Set){let o=[n||rt,kw(t)];return r=r||(typeof t=="object"?void 0:Ve(t)),new Si(o,e||iu(),r||null,i)}var Ct=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return op({name:""},i,r,"");{let o=r.name??"";return op({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Di,e.NULL=new Cs,e.\u0275prov=S({token:e,providedIn:"any",factory:()=>L(Im)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var ac;function Om(t){ac=t}function Uw(){if(ac!==void 0)return ac;if(typeof document<"u")return document;throw new M(210,!1)}var su=new _("AppId",{providedIn:"root",factory:()=>zw}),zw="ng",au=new _("Platform Initializer"),Bn=new _("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var lu=new _("CSP nonce",{providedIn:"root",factory:()=>Uw().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Rm(t){return t instanceof Function?t():t}function Ww(t){return(t??D(Ct)).get(Bn)==="browser"}function Pm(t){return(t.flags&128)===128}var Wt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wt||{});var Fm=new Map,Gw=0;function qw(){return Gw++}function Yw(t){Fm.set(t[Ps],t)}function Kw(t){Fm.delete(t[Ps])}var sp="__ngContext__";function Fn(t,e){Tn(e)?(t[sp]=e[Ps],Yw(e)):t[sp]=e}var Zw;function cu(t,e){return Zw(t,e)}function Er(t,e,n,r,i){if(r!=null){let o,s=!1;qt(r)?o=r:Tn(r)&&(s=!0,r=r[Gt]);let a=_t(r);t===0&&n!==null?i==null?$m(e,n,a):ws(e,n,a,i||null,!0):t===1&&n!==null?ws(e,n,a,i||null,!0):t===2?db(e,a,s):t===3&&e.destroyNode(a),o!=null&&hb(e,t,o,n,i)}}function Jw(t,e){return t.createText(e)}function Qw(t,e,n){t.setValue(e,n)}function Lm(t,e,n){return t.createElement(e,n)}function Xw(t,e){Vm(t,e),e[Gt]=null,e[Ye]=null}function eb(t,e,n,r,i,o){r[Gt]=i,r[Ye]=e,$s(t,r,n,1,i,o)}function Vm(t,e){$s(t,e,e[me],2,null,null)}function tb(t){let e=t[bi];if(!e)return Vl(t[k],t);for(;e;){let n=null;if(Tn(e))n=e[bi];else{let r=e[Me];r&&(n=r)}if(!n){for(;e&&!e[Dt]&&e!==t;)Tn(e)&&Vl(e[k],e),e=e[ve];e===null&&(e=t),Tn(e)&&Vl(e[k],e),n=e&&e[Dt]}e=n}}function nb(t,e,n,r){let i=Me+r,o=n.length;r>0&&(n[i-1][Dt]=e),r<o-Me?(e[Dt]=n[i],Sm(n,Me+r,e)):(n.push(e),e[Dt]=null),e[ve]=n;let s=e[Oi];s!==null&&n!==s&&rb(s,e);let a=e[xt];a!==null&&a.insertView(t),Xl(e),e[I]|=128}function rb(t,e){let n=t[_r],i=e[ve][ve][it];e[it]!==i&&(t[I]|=Wc.HasTransplantedViews),n===null?t[_r]=[e]:n.push(e)}function jm(t,e){let n=t[_r],r=n.indexOf(e);n.splice(r,1)}function Ii(t,e){if(t.length<=Me)return;let n=Me+e,r=t[n];if(r){let i=r[Oi];i!==null&&i!==t&&jm(i,r),e>0&&(t[n-1][Dt]=r[Dt]);let o=Ds(t,Me+e);Xw(r[k],r);let s=o[xt];s!==null&&s.detachView(o[k]),r[ve]=null,r[Dt]=null,r[I]&=-129}return r}function Bs(t,e){if(!(e[I]&256)){let n=e[me];n.destroyNode&&$s(t,e,n,3,null,null),tb(e)}}function Vl(t,e){if(!(e[I]&256)){e[I]&=-129,e[I]|=256,e[Nn]&&yh(e[Nn]),ob(t,e),ib(t,e),e[k].type===1&&e[me].destroy();let n=e[Oi];if(n!==null&&qt(e[ve])){n!==e[ve]&&jm(n,e);let r=e[xt];r!==null&&r.detachView(t)}Kw(e)}}function ib(t,e){let n=t.cleanup,r=e[wi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[wi]=null);let i=e[rn];if(i!==null){e[rn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function ob(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Rn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];St(4,a,l);try{l.call(a)}finally{St(5,a,l)}}else{St(4,i,o);try{o.call(i)}finally{St(5,i,o)}}}}}function Bm(t,e,n){return sb(t,e.parent,n)}function sb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Gt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Tt.None||o===Tt.Emulated)return null}return st(r,n)}}function ws(t,e,n,r,i){t.insertBefore(e,n,r,i)}function $m(t,e,n){t.appendChild(e,n)}function ap(t,e,n,r,i){r!==null?ws(t,e,n,r,i):$m(t,e,n)}function ab(t,e,n,r){t.removeChild(e,n,r)}function uu(t,e){return t.parentNode(e)}function lb(t,e){return t.nextSibling(e)}function Hm(t,e,n){return ub(t,e,n)}function cb(t,e,n){return t.type&40?st(t,n):null}var ub=cb,lp;function du(t,e,n,r){let i=Bm(t,r,e),o=e[me],s=r.parent||e[Ye],a=Hm(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)ap(o,i,n[l],a,!1);else ap(o,i,n,a,!1);lp!==void 0&&lp(o,r,e,n,i)}function us(t,e){if(e!==null){let n=e.type;if(n&3)return st(e,t);if(n&4)return lc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return us(t,r);{let i=t[e.index];return qt(i)?lc(-1,i):_t(i)}}else{if(n&32)return cu(e,t)()||_t(t[e.index]);{let r=Um(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mi(t[it]);return us(i,r)}else return us(t,e.next)}}}return null}function Um(t,e){if(e!==null){let r=t[it][Ye],i=e.projection;return r.projection[i]}return null}function lc(t,e){let n=Me+t+1;if(n<e.length){let r=e[n],i=r[k].firstChild;if(i!==null)return us(r,i)}return e[kn]}function db(t,e,n){let r=uu(t,e);r&&ab(t,r,e,n)}function fu(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],l=n.type;if(s&&e===0&&(a&&Fn(_t(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)fu(t,e,n.child,r,i,o,!1),Er(e,t,i,a,o);else if(l&32){let c=cu(n,r),u;for(;u=c();)Er(e,t,i,u,o);Er(e,t,i,a,o)}else l&16?zm(t,e,r,n,i,o):Er(e,t,i,a,o);n=s?n.projectionNext:n.next}}function $s(t,e,n,r,i,o){fu(n,r,t.firstChild,e,i,o,!1)}function fb(t,e,n){let r=e[me],i=Bm(t,n,e),o=n.parent||e[Ye],s=Hm(o,n,e);zm(r,0,e,n,i,s)}function zm(t,e,n,r,i,o){let s=n[it],l=s[Ye].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Er(e,t,i,u,o)}else{let c=l,u=s[ve];Pm(r)&&(c.flags|=128),fu(t,e,c,u,i,o,!0)}}function hb(t,e,n,r,i){let o=n[kn],s=_t(n);o!==s&&Er(e,t,r,o,i);for(let a=Me;a<n.length;a++){let l=n[a];$s(l[k],l,t,e,r,o)}}function pb(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Wt.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wt.Important),t.setStyle(n,r,i,o))}}function mb(t,e,n){t.setAttribute(e,"style",n)}function Wm(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Gm(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Jl(t,e,r),i!==null&&Wm(t,e,i),o!==null&&mb(t,e,o)}var cc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${eC})`}};function hu(t){return t instanceof cc?t.changingThisBreaksApplicationSecurity:t}var uc=class{};var gb="h",yb="b";var vb=()=>null;function pu(t,e,n=!1){return vb(t,e,n)}var dc=class{},bs=class{};function Db(t){let e=Error(`No component factory found for ${Ve(t)}.`);return e[Cb]=t,e}var Cb="ngComponent";var fc=class{resolveComponentFactory(e){throw Db(e)}},Hs=(()=>{let e=class e{};e.NULL=new fc;let t=e;return t})();function wb(){return Lr(Ke(),G())}function Lr(t,e){return new Pe(st(t,e))}var Pe=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=wb;let t=e;return t})();function bb(t){return t instanceof Pe?t.nativeElement:t}var xi=class{},$n=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Eb();let t=e;return t})();function Eb(){let t=G(),e=Ke(),n=dn(e.index,t);return(Tn(n)?n:t)[me]}var Mb=(()=>{let e=class e{};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),jl={};function Es(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(_t(o)),qt(o)&&Sb(o,r);let s=n.type;if(s&8)Es(t,e,n.child,r);else if(s&32){let a=cu(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=Um(e,n);if(Array.isArray(a))r.push(...a);else{let l=Mi(e[it]);Es(l[k],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Sb(t,e){for(let n=Me;n<t.length;n++){let r=t[n],i=r[k].firstChild;i!==null&&Es(r[k],r,i,e)}t[kn]!==t[Gt]&&e.push(t[kn])}var qm=[];function Ib(t){return t[Nn]??xb(t)}function xb(t){let e=qm.pop()??Object.create(Ab);return e.lView=t,e}function Tb(t){t.lView[Nn]!==t&&(t.lView=null,qm.push(t))}var Ab=P(y({},ph),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ei(t.lView)},consumerOnSignalRead(){this.lView[Nn]=this}});function Ym(t){return Zm(t[bi])}function Km(t){return Zm(t[Dt])}function Zm(t){for(;t!==null&&!qt(t);)t=t[Dt];return t}var _b="ngOriginalError";function Bl(t){return t[_b]}var Nt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Bl(e);for(;n&&Bl(n);)n=Bl(n);return n||null}},Jm=new _("",{providedIn:"root",factory:()=>D(Nt).handleError.bind(void 0)});var Qm=!1,Nb=new _("",{providedIn:"root",factory:()=>Qm});var Vr={};function wt(t=1){Xm(Re(),G(),jn()+t,!1)}function Xm(t,e,n,r){if(!r)if((e[I]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ss(e,o,n)}else{let o=t.preOrderHooks;o!==null&&as(e,o,0,n)}On(n)}function Z(t,e=F.Default){let n=G();if(n===null)return L(t,e);let r=Ke();return bm(r,n,ke(t),e)}function eg(t,e,n,r,i,o){let s=Ne(null);try{let a=null;i&je.SignalBased&&(a=e[r][hh]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&je.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):qp(e,a,r,o)}finally{Ne(s)}}function kb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)On(~i);else{let o=i,s=n[++r],a=n[++r];sw(s,o);let l=e[o];a(2,l)}}}finally{On(-1)}}function Us(t,e,n,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[Gt]=i,d[I]=r|4|128|8|64,(c!==null||t&&t[I]&2048)&&(d[I]|=2048),Xp(d),d[ve]=d[Fr]=t,d[Oe]=n,d[on]=s||t&&t[on],d[me]=a||t&&t[me],d[Ar]=l||t&&t[Ar]||null,d[Ye]=o,d[Ps]=qw(),d[Tr]=u,d[zp]=c,d[it]=e.type==2?t[it]:d,d}function Bi(t,e,n,r,i){let o=t.data[e];if(o===null)o=Ob(t,e,n,r,i),ow()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=nw();o.injectorIndex=s===null?-1:s.injectorIndex}return Fi(o,!0),o}function Ob(t,e,n,r,i){let o=im(),s=om(),a=s?o:o&&o.parent,l=t.data[e]=jb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function tg(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ng(t,e,n,r,i){let o=jn(),s=r&2;try{On(-1),s&&e.length>At&&Xm(t,e,At,!1),St(s?2:0,i),n(r,i)}finally{On(o),St(s?3:1,i)}}function rg(t,e,n){if(Gp(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ne(r)}}}function ig(t,e,n){nm()&&(Gb(t,e,n,st(n,e)),(n.flags&64)===64&&cg(t,e,n))}function og(t,e,n=st){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function sg(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=mu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function mu(t,e,n,r,i,o,s,a,l,c,u){let d=At+r,f=d+i,h=Rb(d,f),p=typeof c=="function"?c():c;return h[k]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function Rb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vr);return n}function Pb(t,e,n,r){let o=r.get(Nb,Qm)||n===Tt.ShadowDom,s=t.selectRootElement(e,o);return Fb(s),s}function Fb(t){Lb(t)}var Lb=()=>null;function Vb(t,e,n,r){let i=fg(e);i.push(n),t.firstCreatePass&&hg(t).push(r,i.length-1)}function jb(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return rm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cp(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=je.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?up(r,n,c,a,l):up(r,n,c,a)}return r}function up(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function Bb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=cp(0,d.inputs,u,l,h),c=cp(1,d.outputs,u,c,p);let m=l!==null&&s!==null&&!Fp(e)?rE(l,u,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function $b(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Hb(t,e,n,r,i,o,s,a){let l=st(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(gu(t,n,u,r,i),Fs(e)&&Ub(n,e.index)):e.type&3?(r=$b(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function Ub(t,e){let n=dn(e,t);n[I]&16||(n[I]|=64)}function ag(t,e,n,r){if(nm()){let i=r===null?null:{"":-1},o=Yb(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&lg(t,e,n,s,i,a),i&&Kb(n,r,i)}n.mergedAttrs=Ci(n.mergedAttrs,n.attrs)}function lg(t,e,n,r,i,o){for(let c=0;c<r.length;c++)nc(vs(n,e),t,r[c].type);Jb(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=tg(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=Ci(n.mergedAttrs,u.hostAttrs),Qb(t,n,e,l,u),Zb(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Bb(t,n,o)}function zb(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Wb(s)!=a&&s.push(a),s.push(n,r,o)}}function Wb(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Gb(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Fs(n)&&Xb(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||vs(n,e),Fn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],c=Pn(e,t,a,n);if(Fn(c,e),s!==null&&nE(e,a-i,c,l,n,s),sn(l)){let u=dn(n.index,e);u[Oe]=Pn(e,t,a,n)}}}function cg(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=aw();try{On(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];ec(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&qb(l,c)}}finally{On(-1),ec(s)}}function qb(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Yb(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Lp(e,s.selectors,!1))if(r||(r=[]),sn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;hc(t,e,l)}else r.unshift(s),hc(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function hc(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Kb(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new M(-301,!1);r.push(e[i],o)}}}function Zb(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;sn(e)&&(n[""]=t)}}function Jb(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qb(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Nr(i.type,!0)),s=new Rn(o,sn(i),Z);t.blueprint[r]=s,n[r]=s,zb(t,e,r,tg(t,n,i.hostVars,Vr),i)}function Xb(t,e,n){let r=st(e,t),i=sg(n),o=t[on].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=zs(t,Us(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function eE(t,e,n,r,i,o){let s=st(t,e);tE(e[me],s,o,t.value,n,r,i)}function tE(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Uc(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function nE(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];eg(r,n,l,c,u,d)}}function rE(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function ug(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function dg(t,e){let n=t.contentQueries;if(n!==null){let r=Ne(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Kc(o),a.contentQueries(2,e[s],s)}}}finally{Ne(r)}}}function zs(t,e){return t[bi]?t[Xh][Dt]=e:t[bi]=e,t[Xh]=e,e}function pc(t,e,n){Kc(0);let r=Ne(null);try{e(t,n)}finally{Ne(r)}}function fg(t){return t[wi]||(t[wi]=[])}function hg(t){return t.cleanup||(t.cleanup=[])}function pg(t,e){let n=t[Ar],r=n?n.get(Nt,null):null;r&&r.handleError(e)}function gu(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];eg(u,c,r,a,l,i)}}function iE(t,e,n){let r=Qp(e,t);Qw(t[me],r,n)}var oE=100;function sE(t,e=!0){let n=t[on],r=n.rendererFactory,i=!1;i||r.begin?.();try{aE(t)}catch(o){throw e&&pg(t,o),o}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function aE(t){mc(t,0);let e=0;for(;em(t);){if(e===oE)throw new M(103,!1);e++,mc(t,1)}}function lE(t,e,n,r){let i=e[I];if((i&256)===256)return;let o=!1;!o&&e[on].inlineEffectRunner?.flush(),Zc(e);let s=null,a=null;!o&&cE(t)&&(a=Ib(e),s=mh(a));try{Xp(e),rw(t.bindingStartIndex),n!==null&&ng(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let d=t.preOrderCheckHooks;d!==null&&ss(e,d,null)}else{let d=t.preOrderHooks;d!==null&&as(e,d,0,null),Rl(e,0)}if(uE(e),mg(e,0),t.contentQueries!==null&&dg(t,e),!o)if(l){let d=t.contentCheckHooks;d!==null&&ss(e,d)}else{let d=t.contentHooks;d!==null&&as(e,d,1),Rl(e,1)}kb(t,e);let c=t.components;c!==null&&yg(e,c,0);let u=t.viewQuery;if(u!==null&&pc(2,u,r),!o)if(l){let d=t.viewCheckHooks;d!==null&&ss(e,d)}else{let d=t.viewHooks;d!==null&&as(e,d,2),Rl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ol]){for(let d of e[Ol])d();e[Ol]=null}o||(e[I]&=-73)}catch(l){throw Ei(e),l}finally{a!==null&&(gh(a,s),Tb(a)),Jc()}}function cE(t){return t.type!==2}function mg(t,e){for(let n=Ym(t);n!==null;n=Km(n))for(let r=Me;r<n.length;r++){let i=n[r];gg(i,e)}}function uE(t){for(let e=Ym(t);e!==null;e=Km(e)){if(!(e[I]&Wc.HasTransplantedViews))continue;let n=e[_r];for(let r=0;r<n.length;r++){let i=n[r],o=i[ve];YC(i)}}}function dE(t,e,n){let r=dn(e,t);gg(r,n)}function gg(t,e){Yc(t)&&mc(t,e)}function mc(t,e){let r=t[k],i=t[I],o=t[Nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ml(o)),o&&(o.dirty=!1),t[I]&=-9217,s)lE(r,t,r.template,t[Oe]);else if(i&8192){mg(t,1);let a=r.components;a!==null&&yg(t,a,1)}}function yg(t,e,n){for(let r=0;r<e.length;r++)dE(t,e[r],n)}function yu(t){for(t[on].changeDetectionScheduler?.notify();t;){t[I]|=64;let e=Mi(t);if(jC(t)&&!e)return t;t=e}return null}var Ln=class{get rootNodes(){let e=this._lView,n=e[k];return Es(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Oe]}set context(e){this._lView[Oe]=e}get destroyed(){return(this._lView[I]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ve];if(qt(e)){let n=e[ps],r=n?n.indexOf(this):-1;r>-1&&(Ii(e,r),Ds(n,r))}this._attachedToViewContainer=!1}Bs(this._lView[k],this._lView)}onDestroy(e){tm(this._lView,e)}markForCheck(){yu(this._cdRefInjectingView||this._lView)}detach(){this._lView[I]&=-129}reattach(){Xl(this._lView),this._lView[I]|=128}detectChanges(){this._lView[I]|=1024,sE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Vm(this._lView[k],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e,Xl(this._lView)}},$i=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fE;let t=e;return t})();function fE(t){return hE(Ke(),G(),(t&16)===16)}function hE(t,e,n){if(Fs(t)&&!n){let r=dn(t.index,e);return new Ln(r,r)}else if(t.type&47){let r=e[it];return new Ln(r,e)}return null}var Ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=pE,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),gc=class extends Ws{constructor(e){super(),this._lView=e}onDestroy(e){return tm(this._lView,e),()=>ZC(this._lView,e)}};function pE(){return new gc(G())}var dp=new Set;function Gs(t){dp.has(t)||(dp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var yc=class extends de{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=$l(o),i&&(i=$l(i)),s&&(s=$l(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ue&&e.add(a),a}};function $l(t){return e=>{setTimeout(t,void 0,e)}}var Ee=yc;function fp(...t){}function mE(){let t=typeof vi.requestAnimationFrame=="function",e=vi[t?"requestAnimationFrame":"setTimeout"],n=vi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Q=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ee(!1),this.onMicrotaskEmpty=new Ee(!1),this.onStable=new Ee(!1),this.onError=new Ee(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=mE().nativeRequestAnimationFrame,vE(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gE,fp,fp);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gE={};function vu(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yE(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vc(t),t.isCheckStableRunning=!0,vu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vc(t))}function vE(t){let e=()=>{yE(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(DE(a))return n.invokeTask(i,o,s,a);try{return hp(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pp(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return hp(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),pp(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,vc(t),vu(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function vc(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function hp(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pp(t){t._nesting--,vu(t)}function DE(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Mr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Mr||{}),CE={destroy(){}};function Du(t,e){!e&&ou(Du);let n=e?.injector??D(Ct);if(!Ww(n))return CE;Gs("NgAfterNextRender");let r=n.get(Cu),i=r.handler??=new Cc,o=e?.phase??Mr.MixedReadWrite,s=()=>{i.unregister(l),a()},a=n.get(Ws).onDestroy(s),l=new Dc(n,o,()=>{s(),t()});return i.register(l),{destroy:s}}var Dc=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(Q),this.errorHandler=e.get(Nt,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Cc=class{constructor(){this.executingCallbacks=!1,this.buckets={[Mr.EarlyRead]:new Set,[Mr.Write]:new Set,[Mr.MixedReadWrite]:new Set,[Mr.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let r of n)e=!0,r.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Cu=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function wE(t,e){let n=dn(e,t),r=n[k];bE(r,n);let i=n[Gt];i!==null&&n[Tr]===null&&(n[Tr]=pu(i,n[Ar])),wu(r,n,n[Oe])}function bE(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function wu(t,e,n){Zc(e);try{let r=t.viewQuery;r!==null&&pc(1,r,n);let i=t.template;i!==null&&ng(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&dg(t,e),t.staticViewQueries&&pc(2,t.viewQuery,n);let o=t.components;o!==null&&EE(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[I]&=-5,Jc()}}function EE(t,e){for(let n=0;n<e.length;n++)wE(t,e[n])}function wc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Uh(i,a);else if(o==2){let l=a,c=e[++s];r=Uh(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ms=class extends Hs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=_n(e);return new Ti(n,this.ngModule)}};function mp(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function ME(t){let e=t.toLowerCase();return e==="svg"?Jp:e==="math"?UC:null}var bc=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Os(r);let i=this.injector.get(e,jl,r);return i!==jl||n===jl?i:this.parentInjector.get(e,n,r)}},Ti=class extends bs{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=mp(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mp(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=RC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof ot?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new bc(e,o):e,a=s.get(xi,null);if(a===null)throw new M(407,!1);let l=s.get(Mb,null),c=s.get(Cu,null),u=s.get(uc,null),d={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?Pb(f,r,this.componentDef.encapsulation,s):Lm(f,h,ME(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let v=null;p!==null&&(v=pu(p,s,!0));let g=mu(0,null,null,1,0,null,null,null,null,null,null),w=Us(null,g,null,m,null,null,d,f,s,null,v);Zc(w);let H,Y;try{let J=this.componentDef,oe,Ge=null;J.findHostDirectiveDefs?(oe=[],Ge=new Map,J.findHostDirectiveDefs(J,oe,Ge),oe.push(J)):oe=[J];let pt=SE(w,p),Mn=IE(pt,p,J,oe,w,d,f);Y=qc(g,At),p&&AE(f,J,p,r),n!==void 0&&_E(Y,this.ngContentSelectors,n),H=TE(Mn,J,oe,Ge,w,[NE]),wu(g,w,null)}finally{Jc()}return new Ec(this.componentType,H,Lr(Y,w),w,Y)}},Ec=class extends dc{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ln(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;gu(o[k],o,i,e,n),this.previousInputValues.set(e,n);let s=dn(this._tNode.index,o);yu(s)}}get injector(){return new An(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function SE(t,e){let n=t[k],r=At;return t[r]=e,Bi(n,r,2,"#host",null)}function IE(t,e,n,r,i,o,s){let a=i[k];xE(r,t,e,s);let l=null;e!==null&&(l=pu(e,i[Ar]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Us(i,sg(n),null,u,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&hc(a,t,r.length-1),zs(i,d),i[t.index]=d}function xE(t,e,n,r){for(let i of t)e.mergedAttrs=Ci(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(wc(e,e.mergedAttrs,!0),n!==null&&Gm(r,n,e))}function TE(t,e,n,r,i,o){let s=Ke(),a=i[k],l=st(s,i);lg(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Pn(i,a,d,s);Fn(f,i)}cg(a,i,s),l&&Fn(l,i);let c=Pn(i,a,s.directiveStart+s.componentOffset,s);if(t[Oe]=i[Oe]=c,o!==null)for(let u of o)u(c,e);return rg(a,s,t),c}function AE(t,e,n,r){if(r)Jl(t,n,["ng-version","17.1.1"]);else{let{attrs:i,classes:o}=PC(e.selectors[0]);i&&Jl(t,n,i),o&&o.length>0&&Wm(t,n,o.join(" "))}}function _E(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function NE(){let t=Ke();eu(G()[k],t)}function kE(t){return Object.getPrototypeOf(t.prototype).constructor}function Hn(t){let e=kE(t.type),n=!0,r=[t];for(;e;){let i;if(sn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=rs(t.inputs),s.inputTransforms=rs(t.inputTransforms),s.declaredInputs=rs(t.declaredInputs),s.outputs=rs(t.outputs);let a=i.hostBindings;a&&LE(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&PE(t,l),c&&FE(t,c),OE(t,i),tC(t.outputs,i.outputs),sn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Hn&&(n=!1)}}e=Object.getPrototypeOf(e)}RE(r)}function OE(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function RE(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ci(i.hostAttrs,n=Ci(n,i.hostAttrs))}}function rs(t){return t===xr?{}:t===rt?[]:t}function PE(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function FE(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function LE(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var _F=new RegExp(`^(\\d+)*(${yb}|${gb})*(.*)`);var VE=()=>null;function Ss(t,e){return VE(t,e)}function bu(t,e,n,r){let i=e.tView,s=t[I]&4096?4096:16,a=Us(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=t[e.index];a[Oi]=l;let c=t[xt];return c!==null&&(a[xt]=c.createEmbeddedView(i)),wu(i,a,n),a}function jE(t,e){let n=Me+e;if(n<t.length)return t[n]}function Is(t,e){return!e||e.firstChild===null||Pm(t)}function Eu(t,e,n,r=!0){let i=e[k];if(nb(i,e,t,n),r){let s=lc(n,t),a=e[me],l=uu(a,t[kn]);l!==null&&eb(i,t[Ye],a,e,l,s)}let o=e[Tr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function BE(t,e){let n=Ii(t,e);return n!==void 0&&Bs(n[k],n),n}var jr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$E;let t=e;return t})();function $E(){let t=Ke();return Dg(t,G())}var HE=jr,vg=class extends HE{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Lr(this._hostTNode,this._hostLView)}get injector(){return new An(this._hostTNode,this._hostLView)}get parentInjector(){let e=tu(this._hostTNode,this._hostLView);if(gm(e)){let n=ys(e,this._hostLView),r=gs(e),i=n[k].data[r+8];return new An(i,n)}else return new An(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gp(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Me}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ss(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Is(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Sw(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new Ti(_n(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?c:this.parentInjector).get(ot,null);m&&(o=m)}let u=_n(l.componentType??{}),d=Ss(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Is(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(qC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ve],c=new vg(l,l[Ye],l[ve]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Eu(s,i,o,r),e.attachToViewContainerRef(),Sm(Hl(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gp(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ii(this._lContainer,n);r&&(Ds(Hl(this._lContainer),n),Bs(r[k],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ii(this._lContainer,n);return r&&Ds(Hl(this._lContainer),n)!=null?new Ln(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gp(t){return t[ps]}function Hl(t){return t[ps]||(t[ps]=[])}function Dg(t,e){let n,r=e[t.index];return qt(r)?n=r:(n=ug(r,e,null,t),e[t.index]=n,zs(e,n)),zE(n,e,t,r),new vg(n,t,e)}function UE(t,e){let n=t[me],r=n.createComment(""),i=st(e,t),o=uu(n,i);return ws(n,o,r,lb(n,i),!1),r}var zE=qE,WE=()=>!1;function GE(t,e,n){return WE(t,e,n)}function qE(t,e,n,r){if(t[kn])return;let i;n.type&8?i=_t(r):i=UE(e,n),t[kn]=i}function Hi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function YE(t,e,n,r,i,o,s,a,l){let c=e.consts,u=Bi(e,t,4,s||null,ms(c,a));ag(e,n,u,ms(c,l)),eu(e,u);let d=u.tView=mu(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Mc(t,e,n,r,i,o,s,a){let l=G(),c=Re(),u=t+At,d=c.firstCreatePass?YE(u,c,l,e,n,r,i,o,s):c.data[u];Fi(d,!1);let f=KE(c,l,d,t);Qc()&&du(c,l,f,d),Fn(f,l);let h=ug(f,l,f,d);return l[u]=h,zs(l,h),GE(h,d,l),Gc(d)&&ig(c,l,d),s!=null&&og(l,d,a),Mc}var KE=ZE;function ZE(t,e,n,r){return Xc(!0),e[me].createComment("")}function Ui(t,e,n,r){let i=G(),o=Ls();if(Hi(i,o,e)){let s=Re(),a=hm();eE(a,i,t,e,n,r)}return Ui}function JE(t,e,n,r){return Hi(t,Ls(),n)?e+Uc(n)+r:Vr}function is(t,e){return t<<17|e<<2}function Vn(t){return t>>17&32767}function QE(t){return(t&2)==2}function XE(t,e){return t&131071|e<<17}function Sc(t){return t|2}function Rr(t){return(t&131068)>>2}function Ul(t,e){return t&-131069|e<<2}function eM(t){return(t&1)===1}function Ic(t){return t|1}function tM(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vn(s),l=Rr(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ji(d,u)>0)&&(c=!0)}else u=n;if(i)if(l!==0){let f=Vn(t[a+1]);t[r+1]=is(f,a),f!==0&&(t[f+1]=Ul(t[f+1],r)),t[a+1]=XE(t[a+1],r)}else t[r+1]=is(a,0),a!==0&&(t[a+1]=Ul(t[a+1],r)),a=r;else t[r+1]=is(l,0),a===0?a=r:t[l+1]=Ul(t[l+1],r),l=r;c&&(t[r+1]=Sc(t[r+1])),yp(t,u,r,!0),yp(t,u,r,!1),nM(e,u,t,r,o),s=is(a,l),o?e.classBindings=s:e.styleBindings=s}function nM(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ji(o,e)>=0&&(n[r+1]=Ic(n[r+1]))}function yp(t,e,n,r){let i=t[n+1],o=e===null,s=r?Vn(i):Rr(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];rM(l,e)&&(a=!0,t[s+1]=r?Ic(c):Sc(c)),s=r?Vn(c):Rr(c)}a&&(t[n+1]=r?Sc(i):Ic(i))}function rM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ji(t,e)>=0:!1}function Yt(t,e,n){let r=G(),i=Ls();if(Hi(r,i,e)){let o=Re(),s=hm();Hb(o,s,r,t,e,r[me],n,!1)}return Yt}function vp(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";gu(t,n,o[s],s,r)}function Mu(t,e){return iM(t,e,null,!0),Mu}function iM(t,e,n,r){let i=G(),o=Re(),s=iw(2);if(o.firstUpdatePass&&sM(o,t,s,r),e!==Vr&&Hi(i,s,e)){let a=o.data[jn()];dM(o,a,i,i[me],t,i[s+1]=fM(e,n),r,s)}}function oM(t,e){return e>=t.expandoStartIndex}function sM(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[jn()],s=oM(t,n);hM(o,r)&&e===null&&!s&&(e=!1),e=aM(i,o,e,r),tM(i,o,e,n,s,r)}}function aM(t,e,n,r){let i=lw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zl(null,t,e,n,r),n=Ai(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=zl(i,t,e,n,r),o===null){let l=lM(t,e,r);l!==void 0&&Array.isArray(l)&&(l=zl(null,t,e,l[1],r),l=Ai(l,e.attrs,r),cM(t,e,r,l))}else o=uM(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function lM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Rr(r)!==0)return t[Vn(r)]}function cM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Vn(i)]=r}function uM(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ai(r,s,n)}return Ai(r,e.attrs,n)}function zl(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ai(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ai(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_w(t,s,n?!0:e[++o]))}return t===void 0?null:t}function dM(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=eM(c)?Dp(l,e,n,i,Rr(c),s):void 0;if(!xs(u)){xs(o)||QE(c)&&(o=Dp(l,null,n,i,a,s));let d=Qp(jn(),n);pb(r,s,d,i,o)}}function Dp(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=n[i+1];f===Vr&&(f=d?rt:void 0);let h=d?Fl(f,r):u===r?f:void 0;if(c&&!xs(h)&&(h=Fl(l,r)),xs(h)&&(a=h,s))return a;let p=t[i+1];i=s?Vn(p):Rr(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Fl(l,r))}return a}function xs(t){return t!==void 0}function fM(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ve(hu(t)))),t}function hM(t,e){return(t.flags&(e?8:16))!==0}var xc=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Wl(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function pM(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let l=t.at(o),c=e[o],u=Wl(o,l,o,c,n);if(u!==0){u<0&&t.updateValue(o,c),o++;continue}let d=t.at(s),f=e[a],h=Wl(s,d,a,f,n);if(h!==0){h<0&&t.updateValue(s,f),s--,a--;continue}let p=n(o,l),m=n(s,d),v=n(o,c);if(Object.is(v,m)){let g=n(a,f);Object.is(g,p)?(t.swap(o,s),t.updateValue(s,f),a--,s--):t.move(s,o),t.updateValue(o,c),o++;continue}if(r??=new Ts,i??=wp(t,o,s,n),Tc(t,r,o,v))t.updateValue(o,c),o++,s++;else if(i.has(v))r.set(p,t.detach(o)),s--;else{let g=t.create(o,e[o]);t.attach(o,g),o++,s++}}for(;o<=a;)Cp(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),l=a.next();for(;!l.done&&o<=s;){let c=t.at(o),u=l.value,d=Wl(o,c,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,l=a.next();else{r??=new Ts,i??=wp(t,o,s,n);let f=n(o,u);if(Tc(t,r,o,f))t.updateValue(o,u),o++,s++,l=a.next();else if(!i.has(f))t.attach(o,t.create(o,u)),o++,s++,l=a.next();else{let h=n(o,c);r.set(h,t.detach(o)),s--}}}for(;!l.done;)Cp(t,r,n,t.length,l.value),l=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function Tc(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Cp(t,e,n,r,i){if(Tc(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function wp(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Ts=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var Ac=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Me}};function Cg(t,e){return e}var _c=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function qs(t,e,n,r,i,o,s,a,l,c,u,d,f){Gs("NgControlFlow");let h=l!==void 0,p=G(),m=a?s.bind(p[it][Oe]):s,v=new _c(h,m);p[At+t]=v,Mc(t+1,e,n,r,i,o),h&&Mc(t+2,l,c,u,d,f)}var Nc=class extends xc{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Me}at(e){return this.getLView(e)[Oe].$implicit}attach(e,n){let r=n[Tr];this.needsIndexUpdate||=e!==this.length,Eu(this.lContainer,n,e,Is(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,mM(this.lContainer,e)}create(e,n){let r=Ss(this.lContainer,this.templateTNode.tView.ssrId);return bu(this.hostLView,this.templateTNode,new Ac(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Bs(e[k],e)}updateValue(e,n){this.getLView(e)[Oe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Oe].$index=e}getLView(e){return gM(this.lContainer,e)}};function Ys(t){let e=Ne(null),n=jn();try{let r=G(),i=r[k],o=r[n];if(o.liveCollection===void 0){let a=n+1,l=bp(r,a),c=Ep(i,a);o.liveCollection=new Nc(l,r,c)}else o.liveCollection.reset();let s=o.liveCollection;if(pM(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Ls(),l=s.length===0;if(Hi(r,a,l)){let c=n+2,u=bp(r,c);if(l){let d=Ep(i,c),f=Ss(u,d.tView.ssrId),h=bu(r,d,void 0,{dehydratedView:f});Eu(u,h,0,Is(d,f))}else BE(u,0)}}}finally{Ne(e)}}function bp(t,e){return t[e]}function mM(t,e){return Ii(t,e)}function gM(t,e){return jE(t,e)}function Ep(t,e){return qc(t,e)}function yM(t,e,n,r,i,o){let s=e.consts,a=ms(s,i),l=Bi(e,t,2,r,a);return ag(e,n,l,ms(s,o)),l.attrs!==null&&wc(l,l.attrs,!1),l.mergedAttrs!==null&&wc(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function re(t,e,n,r){let i=G(),o=Re(),s=At+t,a=i[me],l=o.firstCreatePass?yM(s,o,i,e,n,r):o.data[s],c=vM(o,i,l,a,e,t);i[s]=c;let u=Gc(l);return Fi(l,!0),Gm(a,c,l),(l.flags&32)!==32&&Qc()&&du(o,i,c,l),JC()===0&&Fn(c,i),QC(),u&&(ig(o,i,l),rg(o,l,i)),r!==null&&og(i,l),re}function te(){let t=Ke();om()?sm():(t=t.parent,Fi(t,!1));let e=t;ew(e)&&tw(),XC();let n=Re();return n.firstCreatePass&&(eu(n,t),Gp(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&mw(e)&&vp(n,e,G(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&gw(e)&&vp(n,e,G(),e.stylesWithoutHost,!1),te}function De(t,e,n,r){return re(t,e,n,r),te(),De}var vM=(t,e,n,r,i,o)=>(Xc(!0),Lm(r,i,dw()));function Ks(){return G()}var As="en-US";var DM=As;function CM(t){cC(t,"Expected localeId to be defined"),typeof t=="string"&&(DM=t.toLowerCase().replace(/_/g,"-"))}function Un(t){return!!t&&typeof t.then=="function"}function wg(t){return!!t&&typeof t.subscribe=="function"}function Se(t,e,n,r){let i=G(),o=Re(),s=Ke();return bM(o,i,i[me],s,t,e,r),Se}function wM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[wi],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function bM(t,e,n,r,i,o,s){let a=Gc(r),c=t.firstCreatePass&&hg(t),u=e[Oe],d=fg(e),f=!0;if(r.type&3||s){let m=st(r,e),v=s?s(m):m,g=d.length,w=s?Y=>s(_t(Y[r.index])):r.index,H=null;if(!s&&a&&(H=wM(t,e,i,r.index)),H!==null){let Y=H.__ngLastListenerFn__||H;Y.__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,f=!1}else{o=Sp(r,e,u,o,!1);let Y=n.listen(v,i,o);d.push(o,Y),c&&c.push(i,w,g,g+1)}}else o=Sp(r,e,u,o,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let v=0;v<m;v+=2){let g=p[v],w=p[v+1],J=e[g][w].subscribe(o),oe=d.length;d.push(o,J),c&&c.push(i,r.index,oe,-(oe+1))}}}function Mp(t,e,n,r){try{return St(6,e,n),n(r)!==!1}catch(i){return pg(t,i),!1}finally{St(7,e,n)}}function Sp(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?dn(t.index,e):e;yu(a);let l=Mp(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)l=Mp(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function zi(t=1){return uw(t)}function EM(t,e){let n=null,r=AC(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?Lp(t,o,!0):kC(r,o))return i}return n}function Zs(t){let e=G()[it][Ye];if(!e.projection){let n=t?t.length:1,r=e.projection=Tw(n,null),i=r.slice(),o=e.child;for(;o!==null;){let s=t?EM(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function Js(t,e=0,n){let r=G(),i=Re(),o=Bi(i,At+t,16,null,n||null);o.projection===null&&(o.projection=e),sm(),(!r[Tr]||rm())&&(o.flags&32)!==32&&fb(i,r,o)}function MM(){return this._results[Symbol.iterator]()}var _i=class t{get changes(){return this._changes??=new Ee}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=MM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=xw(e);(this._changesDetected=!Iw(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},Ni=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xM;let t=e;return t})(),SM=Ni,IM=class extends SM{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=bu(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Ln(i)}};function xM(){return Su(Ke(),G())}function Su(t,e){return t.type&4?new IM(e,t,Lr(t,e)):null}var kc=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Oc=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Sg(e,n).matches!==null&&this.queries[n].setDirty()}},_s=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},Rc=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Pc=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,TM(n,o)),this.matchTNodeWithReadOption(e,n,ls(n,e,o,!1,!1))}else r===Ni?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ls(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pe||i===jr||i===Ni&&n.type&4)this.addMatch(n.index,-2);else{let o=ls(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function TM(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function AM(t,e){return t.type&11?Lr(t,e):t.type&4?Su(t,e):null}function _M(t,e,n,r){return n===-1?AM(e,t):n===-2?NM(t,e,r):Pn(t,t[k],n,e)}function NM(t,e,n){if(n===Pe)return Lr(e,t);if(n===Ni)return Su(e,t);if(n===jr)return Dg(e,t)}function bg(t,e,n,r){let i=e[xt].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(_M(e,u,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function Fc(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=bg(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Me;d<u.length;d++){let f=u[d];f[Oi]===f[ve]&&Fc(f[k],f,c,r)}if(u[_r]!==null){let d=u[_r];for(let f=0;f<d.length;f++){let h=d[f];Fc(h[k],h,c,r)}}}}}return r}function kM(t,e){return t[xt].queries[e].queryList}function Eg(t,e,n){let r=new _i((n&4)===4);Vb(t,e,r,r.destroy),e[xt]===null&&(e[xt]=new Oc),e[xt].queries.push(new kc(r))}function Mg(t,e,n){t.queries===null&&(t.queries=new Rc),t.queries.track(new Pc(e,n))}function OM(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Sg(t,e){return t.queries.getByIndex(e)}function Iu(t,e,n,r){let i=Re();if(i.firstCreatePass){let o=Ke();Mg(i,new _s(e,n,r),o.index),OM(i,t),(n&2)===2&&(i.staticContentQueries=!0)}Eg(i,G(),n)}function at(t,e,n){let r=Re();r.firstCreatePass&&(Mg(r,new _s(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Eg(r,G(),e)}function $e(t){let e=G(),n=Re(),r=am();Kc(r+1);let i=Sg(n,r);if(t.dirty&&GC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=i.crossesNgTemplate?Fc(n,e,r,[]):bg(n,e,i,r);t.reset(o,bb),t.notifyOnChanges()}return!0}return!1}function He(){return kM(G(),am())}function lt(t,e=""){let n=G(),r=Re(),i=t+At,o=r.firstCreatePass?Bi(r,i,1,e,null):r.data[i],s=RM(r,n,o,e,t);n[i]=s,Qc()&&du(r,n,s,o),Fi(o,!1)}var RM=(t,e,n,r,i)=>(Xc(!0),Jw(e[me],r));function xu(t,e,n){let r=G(),i=JE(r,t,e,n);return i!==Vr&&iE(r,jn(),i),xu}function PM(t,e,n){let r=Re();if(r.firstCreatePass){let i=sn(t);Lc(n,r.data,r.blueprint,i,!0),Lc(e,r.data,r.blueprint,i,!1)}}function Lc(t,e,n,r,i){if(t=ke(t),Array.isArray(t))for(let o=0;o<t.length;o++)Lc(t[o],e,n,r,i);else{let o=Re(),s=G(),a=Ke(),l=Or(t)?t:ke(t.provide),c=Nm(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Or(t)||!t.multi){let h=new Rn(c,i,Z),p=ql(l,e,i?u:u+f,d);p===-1?(nc(vs(a,s),o,l),Gl(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=ql(l,e,u+f,d),p=ql(l,e,u,u+f),m=h>=0&&n[h],v=p>=0&&n[p];if(i&&!v||!i&&!m){nc(vs(a,s),o,l);let g=VM(i?LM:FM,n.length,i,r,c);!i&&v&&(n[p].providerFactory=g),Gl(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)}else{let g=Ig(n[i?p:h],c,!i&&r);Gl(o,t,h>-1?h:p,g)}!i&&r&&v&&n[p].componentProviders++}}}function Gl(t,e,n,r){let i=Or(e),o=Fw(e);if(i||o){let l=(o?ke(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function Ig(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ql(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function FM(t,e,n,r){return Vc(this.multi,[])}function LM(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Pn(n,n[k],this.providerFactory.index,r);o=a.slice(0,s),Vc(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Vc(i,o);return o}function Vc(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function VM(t,e,n,r,i){let o=new Rn(t,n,Z);return o.multi=[],o.index=e,o.componentProviders=0,Ig(o,i,r&&!n),o}function Br(t,e=[]){return n=>{n.providersResolver=(r,i)=>PM(r,i?i(t):t,e)}}var an=class{},ki=class{};var jc=class extends an{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ms(this);let i=$p(e);this._bootstrapComponents=Rm(i.bootstrap),this._r3Injector=km(e,n,[{provide:an,useValue:this},{provide:Hs,useValue:this.componentFactoryResolver},...r],Ve(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bc=class extends ki{constructor(e){super(),this.moduleType=e}create(e){return new jc(this.moduleType,e,[])}};var Ns=class extends an{constructor(e){super(),this.componentFactoryResolver=new Ms(this),this.instance=null;let n=new Si([...e.providers,{provide:an,useValue:this},{provide:Hs,useValue:this.componentFactoryResolver}],e.parent||iu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tu(t,e,n=null){return new Ns({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var jM=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Tm(!1,r.type),o=i.length>0?Tu([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=S({token:e,providedIn:"environment",factory:()=>new e(L(ot))});let t=e;return t})();function Ue(t){Gs("NgStandalone"),t.getStandaloneInjector=e=>e.get(jM).getOrCreateStandaloneInjector(t)}var Qs=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),$c=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Au=(()=>{let e=class e{compileModuleSync(r){return new Bc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=$p(r),s=Rm(o.declarations).reduce((a,l)=>{let c=_n(l);return c&&a.push(new Ti(c)),a},[]);return new $c(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xg=new _("");var Tg=new _("Application Initializer"),Ag=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=D(Tg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Un(s))r.push(s);else if(wg(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_u=new _("appBootstrapListener");function BM(){vh(()=>{throw new M(600,!1)})}function $M(t){return t.isBoundToModule}function HM(t,e,n){try{let r=n();return Un(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=D(Jm),this.afterRenderEffectManager=D(Cu),this.componentTypes=[],this.components=[],this.isStable=D(Xs).hasPendingTasks.pipe(B(r=>!r)),this._injector=D(ot)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof bs;if(!this._injector.get(Ag).done){let h=!o&&Bp(r),p=!1;throw new M(405,p)}let a;o?a=r:a=this._injector.get(Hs).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=$M(a)?void 0:this._injector.get(an),c=i||a.selector,u=a.create(Ct.NULL,[],c,l),d=u.location.nativeElement,f=u.injector.get(xg,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Yl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Yl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(_u,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Yl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new M(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Yl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var UM=(()=>{let e=class e{constructor(){this.zone=D(Q),this.applicationRef=D(Wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zM(t){return[{provide:Q,useFactory:t},{provide:kr,multi:!0,useFactory:()=>{let e=D(UM,{optional:!0});return()=>e.initialize()}},{provide:kr,multi:!0,useFactory:()=>{let e=D(YM);return()=>{e.initialize()}}},{provide:Jm,useFactory:WM}]}function WM(){let t=D(Q),e=D(Nt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function GM(t){let e=zM(()=>new Q(qM(t)));return Vs([[],e])}function qM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var YM=(()=>{let e=class e{constructor(){this.subscription=new ue,this.initialized=!1,this.zone=D(Q),this.pendingTasks=D(Xs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Q.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Q.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KM(){return typeof $localize<"u"&&$localize.locale||As}var Nu=new _("LocaleId",{providedIn:"root",factory:()=>D(Nu,F.Optional|F.SkipSelf)||KM()});var _g=new _("PlatformDestroyListeners");var ds=null;function ZM(t=[],e){return Ct.create({name:e,providers:[{provide:js,useValue:"platform"},{provide:_g,useValue:new Set([()=>ds=null])},...t]})}function JM(t=[]){if(ds)return ds;let e=ZM(t);return ds=e,BM(),QM(e),e}function QM(t){t.get(au,null)?.forEach(n=>n())}function Ng(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=JM(r),o=[GM(),...n||[]],a=new Ns({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Q);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Nt,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(_g);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),HM(c,l,()=>{let h=a.get(Ag);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Nu,As);CM(p||As);let m=a.get(Wi);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var ku=null;function Kt(){return ku}function Pg(t){ku||(ku=t)}var ea=class{},ze=new _("DocumentToken"),Fg=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(nS),providedIn:"platform"});let t=e;return t})();var nS=(()=>{let e=class e extends Fg{constructor(){super(),this._doc=D(ze),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kt().getBaseHref(this._doc)}onPopState(r){let i=Kt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Kt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Lg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function kg(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function zn(t){return t&&t[0]!=="?"?"?"+t:t}var na=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(Vg),providedIn:"root"});let t=e;return t})(),rS=new _("appBaseHref"),Vg=(()=>{let e=class e extends na{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Lg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+zn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+zn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+zn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Fg),L(rS,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Gi=(()=>{let e=class e{constructor(r){this._subject=new Ee,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=sS(kg(Og(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+zn(i))}normalize(r){return e.stripTrailingSlash(oS(this._basePath,Og(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=zn,e.joinWithSlash=Lg,e.stripTrailingSlash=kg,e.\u0275fac=function(i){return new(i||e)(L(na))},e.\u0275prov=S({token:e,factory:()=>iS(),providedIn:"root"});let t=e;return t})();function iS(){return new Gi(L(na))}function oS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Og(t){return t.replace(/\/index.html$/,"")}function sS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function jg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ru=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=ln({});let t=e;return t})(),Bg="browser",aS="server";function Pu(t){return t===aS}var ta=class{};var Vu=class extends ea{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ju=class t extends Vu{static makeCurrent(){Pg(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=cS();return n==null?null:uS(n)}resetBaseElement(){qi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jg(document.cookie,e)}},qi=null;function cS(){return qi=qi||document.querySelector("base"),qi?qi.getAttribute("href"):null}function uS(t){return new URL(t,document.baseURI).pathname}var dS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Bu=new _("EventManagerPlugins"),zg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new M(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(L(Bu),L(Q))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),ra=class{constructor(e){this._doc=e}},Fu="ng-app-id",Wg=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Pu(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Fu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Fu),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Fu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(L(ze),L(su),L(lu,8),L(Bn))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Lu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hu=/%COMP%/g,Gg="%COMP%",fS=`_nghost-${Gg}`,hS=`_ngcontent-${Gg}`,pS=!0,mS=new _("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>pS});function gS(t){return hS.replace(Hu,t)}function yS(t){return fS.replace(Hu,t)}function qg(t,e){return e.map(n=>n.replace(Hu,t))}var $g=(()=>{let e=class e{constructor(r,i,o,s,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Pu(l),this.defaultRenderer=new Yi(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Tt.ShadowDom&&(i=P(y({},i),{encapsulation:Tt.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ia?o.applyToHost(r):o instanceof Ki&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Tt.Emulated:s=new ia(c,u,i,this.appId,d,a,l,f);break;case Tt.ShadowDom:return new $u(c,u,r,i,a,l,this.nonce,f);default:s=new Ki(c,u,i,d,a,l,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(L(zg),L(Wg),L(su),L(mS),L(ze),L(Bn),L(Q),L(lu))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Yi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Lu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Hg(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Hg(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Lu[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Lu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wt.DashCase|Wt.Important)?e.style.setProperty(n,r,i&Wt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Kt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Hg(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $u=class extends Yi{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=qg(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ki=class extends Yi{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?qg(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ia=class extends Ki{constructor(e,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=gS(c),this.hostAttr=yS(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},vS=(()=>{let e=class e extends ra{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(L(ze))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Ug=["alt","control","meta","shift"],DS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wS=(()=>{let e=class e extends ra{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kt().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),Ug.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=DS[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Ug.forEach(a=>{if(a!==o){let l=CS[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(L(ze))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function Yg(t,e){return Ng(y({rootComponent:t},bS(e)))}function bS(t){return{appProviders:[...xS,...t?.providers??[]],platformProviders:IS}}function ES(){ju.makeCurrent()}function MS(){return new Nt}function SS(){return Om(document),document}var IS=[{provide:Bn,useValue:Bg},{provide:au,useValue:ES,multi:!0},{provide:ze,useFactory:SS,deps:[]}];var xS=[{provide:js,useValue:"root"},{provide:Nt,useFactory:MS,deps:[]},{provide:Bu,useClass:vS,multi:!0,deps:[ze,Q,Bn]},{provide:Bu,useClass:wS,multi:!0,deps:[ze]},$g,Wg,zg,{provide:xi,useExisting:$g},{provide:ta,useClass:dS,deps:[]},[]];function TS(){return new Uu(L(ze))}var Uu=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(L(ze))},e.\u0275prov=S({token:e,factory:function(i){let o=null;return i?o=new i:o=TS(),o},providedIn:"root"});let t=e;return t})();var O="primary",uo=Symbol("RouteTitle"),Yu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Wr(t){return new Yu(t)}function _S(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function NS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ot(t[n],e[n]))return!1;return!0}function Ot(t,e){let n=t?Ku(t):void 0,r=e?Ku(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ey(t[i],e[i]))return!1;return!0}function Ku(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ey(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ty(t){return t.length>0?t[t.length-1]:null}function mn(t){return xl(t)?t:Un(t)?ie(Promise.resolve(t)):A(t)}var kS={exact:ry,subset:iy},ny={exact:OS,subset:RS,ignored:()=>!0};function Kg(t,e,n){return kS[n.paths](t.root,e.root,n.matrixParams)&&ny[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function OS(t,e){return Ot(t,e)}function ry(t,e,n){if(!Gn(t.segments,e.segments)||!aa(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ry(t.children[r],e.children[r],n))return!1;return!0}function RS(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ey(t[n],e[n]))}function iy(t,e,n){return oy(t,e,e.segments,n)}function oy(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Gn(i,n)||e.hasChildren()||!aa(i,n,r))}else if(t.segments.length===n.length){if(!Gn(t.segments,n)||!aa(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!iy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Gn(t.segments,i)||!aa(t.segments,i,r)||!t.children[O]?!1:oy(t.children[O],e,o,r)}}function aa(t,e,n){return e.every((r,i)=>ny[n](t[i].parameters,r.parameters))}var hn=class{constructor(e=new q([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Wr(this.queryParams),this._queryParamMap}toString(){return LS.serialize(this)}},q=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return la(this)}},Wn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Wr(this.parameters),this._parameterMap}toString(){return ay(this)}};function PS(t,e){return Gn(t,e)&&t.every((n,r)=>Ot(n.parameters,e[r].parameters))}function Gn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function FS(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===O&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==O&&(n=n.concat(e(i,r)))}),n}var wd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new ua,providedIn:"root"});let t=e;return t})(),ua=class{parse(e){let n=new Ju(e);return new hn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Zi(e.root,!0)}`,r=BS(e.queryParams),i=typeof e.fragment=="string"?`#${VS(e.fragment)}`:"";return`${n}${r}${i}`}},LS=new ua;function la(t){return t.segments.map(e=>ay(e)).join("/")}function Zi(t,e){if(!t.hasChildren())return la(t);if(e){let n=t.children[O]?Zi(t.children[O],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==O&&r.push(`${i}:${Zi(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=FS(t,(r,i)=>i===O?[Zi(t.children[O],!1)]:[`${i}:${Zi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[O]!=null?`${la(t)}/${n[0]}`:`${la(t)}/(${n.join("//")})`}}function sy(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oa(t){return sy(t).replace(/%3B/gi,";")}function VS(t){return encodeURI(t)}function Zu(t){return sy(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ca(t){return decodeURIComponent(t)}function Zg(t){return ca(t.replace(/\+/g,"%20"))}function ay(t){return`${Zu(t.path)}${jS(t.parameters)}`}function jS(t){return Object.entries(t).map(([e,n])=>`;${Zu(e)}=${Zu(n)}`).join("")}function BS(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${oa(n)}=${oa(i)}`).join("&"):`${oa(n)}=${oa(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var $S=/^[^\/()?;#]+/;function zu(t){let e=t.match($S);return e?e[0]:""}var HS=/^[^\/()?;=#]+/;function US(t){let e=t.match(HS);return e?e[0]:""}var zS=/^[^=?&#]+/;function WS(t){let e=t.match(zS);return e?e[0]:""}var GS=/^[^&#]+/;function qS(t){let e=t.match(GS);return e?e[0]:""}var Ju=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[O]=new q(e,n)),r}parseSegment(){let e=zu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new Wn(ca(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=US(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=zu(this.remaining);i&&(r=i,this.capture(r))}e[ca(n)]=ca(r)}parseQueryParam(e){let n=WS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=qS(this.remaining);s&&(r=s,this.capture(r))}let i=Zg(n),o=Zg(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=O);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[O]:new q([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}};function ly(t){return t.segments.length>0?new q([],{[O]:t}):t}function cy(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=cy(i);if(r===O&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new q(t.segments,e);return YS(n)}function YS(t){if(t.numberOfChildren===1&&t.children[O]){let e=t.children[O];return new q(t.segments.concat(e.segments),e.children)}return t}function Gr(t){return t instanceof hn}function KS(t,e,n=null,r=null){let i=uy(t);return dy(i,e,n,r)}function uy(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new q(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=ly(r);return e??i}function dy(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Wu(i,i,i,n,r);let o=ZS(e);if(o.toRoot())return Wu(i,i,new q([],{}),n,r);let s=JS(o,i,t),a=s.processChildren?Xi(s.segmentGroup,s.index,o.commands):hy(s.segmentGroup,s.index,o.commands);return Wu(i,s.segmentGroup,a,n,r)}function da(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function no(t){return typeof t=="object"&&t!=null&&t.outlets}function Wu(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=fy(t,e,n);let a=ly(cy(s));return new hn(a,o,i)}function fy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=fy(o,e,n)}),new q(t.segments,r)}var fa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&da(r[0]))throw new M(4003,!1);let i=r.find(no);if(i&&i!==ty(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ZS(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new fa(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new fa(n,e,r)}var Ur=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function JS(t,e,n){if(t.isAbsolute)return new Ur(e,!0,0);if(!n)return new Ur(e,!1,NaN);if(n.parent===null)return new Ur(n,!0,0);let r=da(t.commands[0])?0:1,i=n.segments.length-1+r;return QS(n,i,t.numberOfDoubleDots)}function QS(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new Ur(r,!1,i-o)}function XS(t){return no(t[0])?t[0].outlets:{[O]:t}}function hy(t,e,n){if(t??=new q([],{}),t.segments.length===0&&t.hasChildren())return Xi(t,e,n);let r=eI(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new q(t.segments.slice(0,r.pathIndex),{});return o.children[O]=new q(t.segments.slice(r.pathIndex),t.children),Xi(o,0,i)}else return r.match&&i.length===0?new q(t.segments,{}):r.match&&!t.hasChildren()?Qu(t,e,n):r.match?Xi(t,0,i):Qu(t,e,n)}function Xi(t,e,n){if(n.length===0)return new q(t.segments,{});{let r=XS(n),i={};if(Object.keys(r).some(o=>o!==O)&&t.children[O]&&t.numberOfChildren===1&&t.children[O].segments.length===0){let o=Xi(t.children[O],e,n);return new q(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=hy(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new q(t.segments,i)}}function eI(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(no(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Qg(l,c,s))return o;r+=2}else{if(!Qg(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qu(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(no(o)){let l=tI(o.outlets);return new q(r,l)}if(i===0&&da(n[0])){let l=t.segments[e];r.push(new Wn(l.path,Jg(n[0]))),i++;continue}let s=no(o)?o.outlets[O]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&da(a)?(r.push(new Wn(s,Jg(a))),i+=2):(r.push(new Wn(s,{})),i++)}return new q(r,{})}function tI(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Qu(new q([],{}),0,r))}),e}function Jg(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Qg(t,e,n){return t==n.path&&Ot(e,n.parameters)}var eo="imperative",Ce=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ce||{}),dt=class{constructor(e,n){this.id=e,this.url=n}},ro=class extends dt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ce.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends dt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ce.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ut=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ut||{}),Xu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Xu||{}),pn=class extends dt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ce.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yn=class extends dt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ce.NavigationSkipped}},io=class extends dt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ce.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ha=class extends dt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ed=class extends dt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},td=class extends dt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ce.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nd=class extends dt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rd=class extends dt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class{constructor(e){this.route=e,this.type=Ce.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},od=class{constructor(e){this.route=e,this.type=Ce.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sd=class{constructor(e){this.snapshot=e,this.type=Ce.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ad=class{constructor(e){this.snapshot=e,this.type=Ce.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ld=class{constructor(e){this.snapshot=e,this.type=Ce.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cd=class{constructor(e){this.snapshot=e,this.type=Ce.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var oo=class{},so=class{constructor(e){this.url=e}};var ud=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Da,this.attachRef=null}},Da=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ud,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pa=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=fd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fd(e,this._root).map(n=>n.value)}};function dd(t,e){if(t===e.value)return e;for(let n of e.children){let r=dd(t,n);if(r)return r}return null}function fd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=fd(t,n);if(r.length)return r.unshift(e),r}return[]}var Ze=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Hr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ma=class extends pa{constructor(e,n){super(e),this.snapshot=n,Ed(this,e)}toString(){return this.snapshot.toString()}};function py(t){let e=nI(t),n=new se([new Wn("",{})]),r=new se({}),i=new se({}),o=new se({}),s=new se(""),a=new qr(n,r,o,s,i,O,t,e.root);return a.snapshot=e.root,new ma(new Ze(a,[]),e)}function nI(t){let e={},n={},r={},i="",o=new ao([],e,r,i,n,O,t,null,{});return new ga("",new Ze(o,[]))}var qr=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(B(c=>c[uo]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>Wr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>Wr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&gy(i)&&(r.resolve[uo]=i.title),r}var ao=class{get title(){return this.data?.[uo]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ga=class extends pa{constructor(e,n){super(n),this.url=e,Ed(this,n)}toString(){return my(this._root)}};function Ed(t,e){e.value._routerState=t,e.children.forEach(n=>Ed(t,n))}function my(t){let e=t.children.length>0?` { ${t.children.map(my).join(", ")} } `:"";return`${t.value}${e}`}function Gu(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ot(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ot(e.params,n.params)||t.paramsSubject.next(n.params),NS(e.url,n.url)||t.urlSubject.next(n.url),Ot(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function hd(t,e){let n=Ot(t.params,e.params)&&PS(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||hd(t.parent,e.parent))}function gy(t){return typeof t.title=="string"||t.title===null}var Md=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=O,this.activateEvents=new Ee,this.deactivateEvents=new Ee,this.attachEvents=new Ee,this.detachEvents=new Ee,this.parentContexts=D(Da),this.location=D(jr),this.changeDetector=D($i),this.environmentInjector=D(ot),this.inputBinder=D(Sd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new pd(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=kt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[un]});let t=e;return t})(),pd=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===qr?this.route:e===Da?this.childContexts:this.parent.get(e,n)}},Sd=new _("");function rI(t,e,n){let r=lo(t,e._root,n?n._root:void 0);return new ma(r,e)}function lo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=iI(t,e,n);return new Ze(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>lo(t,a)),s}}let r=oI(e.value),i=e.children.map(o=>lo(t,o));return new Ze(r,i)}}function iI(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return lo(t,r,i);return lo(t,r)})}function oI(t){return new qr(new se(t.url),new se(t.params),new se(t.queryParams),new se(t.fragment),new se(t.data),t.outlet,t.component,t)}var yy="ngNavigationCancelingError";function vy(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Gr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Dy(!1,ut.Redirect,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Dy(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[yy]=!0,r.cancellationCode=e,n&&(r.url=n),r}function sI(t){return Cy(t)&&Gr(t.url)}function Cy(t){return t&&t[yy]}var aI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ue],decls:1,vars:0,template:function(i,o){i&1&&De(0,"router-outlet")},dependencies:[Md],encapsulation:2});let t=e;return t})();function lI(t,e){return t.providers&&!t._injector&&(t._injector=Tu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Id(t){let e=t.children&&t.children.map(Id),n=e?P(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==O&&(n.component=aI),n}function Rt(t){return t.outlet||O}function cI(t,e){let n=t.filter(r=>Rt(r)===e);return n.push(...t.filter(r=>Rt(r)!==e)),n}function fo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var uI=(t,e,n,r)=>B(i=>(new md(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),md=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gu(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Hr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Hr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ad(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Gu(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gu(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=fo(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},ya=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zr=class{constructor(e,n){this.component=e,this.route=n}};function dI(t,e,n){let r=t._root,i=e?e._root:null;return Ji(r,i,n,[r.value])}function fI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Kr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Tp(t)?t:e.get(t):r}function Ji(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hr(e);return t.children.forEach(s=>{hI(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>to(a,n.getContext(s),i)),i}function hI(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=pI(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new ya(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ji(t,e,a?a.children:null,r,i):Ji(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zr(a.outlet.component,s))}else s&&to(e,a,i),i.canActivateChecks.push(new ya(r)),o.component?Ji(t,null,a?a.children:null,r,i):Ji(t,null,n,r,i);return i}function pI(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gn(t.url,e.url)||!Ot(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hd(t,e)||!Ot(t.queryParams,e.queryParams);case"paramsChange":default:return!hd(t,e)}}function to(t,e,n){let r=Hr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?to(s,e.children.getContext(o),n):to(s,null,n):to(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new zr(e.outlet.component,i)):n.canDeactivateChecks.push(new zr(null,i)):n.canDeactivateChecks.push(new zr(null,i))}function ho(t){return typeof t=="function"}function mI(t){return typeof t=="boolean"}function gI(t){return t&&ho(t.canLoad)}function yI(t){return t&&ho(t.canActivate)}function vI(t){return t&&ho(t.canActivateChild)}function DI(t){return t&&ho(t.canDeactivate)}function CI(t){return t&&ho(t.canMatch)}function wy(t){return t instanceof Ut||t?.name==="EmptyError"}var sa=Symbol("INITIAL_VALUE");function Yr(){return yt(t=>es(t.map(e=>e.pipe(zt(1),Cr(sa)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===sa)return sa;if(n===!1||n instanceof hn)return n}return!0}),gt(e=>e!==sa),zt(1)))}function wI(t,e){return fe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?A(P(y({},n),{guardsResult:!0})):bI(s,r,i,t).pipe(fe(a=>a&&mI(a)?EI(r,o,t,e):A(a)),B(a=>P(y({},n),{guardsResult:a})))})}function bI(t,e,n,r){return ie(t).pipe(fe(i=>TI(i.component,i.route,n,e,r)),Mt(i=>i!==!0,!0))}function EI(t,e,n,r){return ie(e).pipe(vr(i=>yr(SI(i.route.parent,r),MI(i.route,r),xI(t,i.path,n),II(t,i.route,n))),Mt(i=>i!==!0,!0))}function MI(t,e){return t!==null&&e&&e(new ld(t)),A(!0)}function SI(t,e){return t!==null&&e&&e(new sd(t)),A(!0)}function II(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return A(!0);let i=r.map(o=>ts(()=>{let s=fo(e)??n,a=Kr(o,s),l=yI(a)?a.canActivate(e,t):fn(s,()=>a(e,t));return mn(l).pipe(Mt())}));return A(i).pipe(Yr())}function xI(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>fI(s)).filter(s=>s!==null).map(s=>ts(()=>{let a=s.guards.map(l=>{let c=fo(s.node)??n,u=Kr(l,c),d=vI(u)?u.canActivateChild(r,t):fn(c,()=>u(r,t));return mn(d).pipe(Mt())});return A(a).pipe(Yr())}));return A(o).pipe(Yr())}function TI(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return A(!0);let s=o.map(a=>{let l=fo(e)??i,c=Kr(a,l),u=DI(c)?c.canDeactivate(t,e,n,r):fn(l,()=>c(t,e,n,r));return mn(u).pipe(Mt())});return A(s).pipe(Yr())}function AI(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return A(!0);let o=i.map(s=>{let a=Kr(s,t),l=gI(a)?a.canLoad(e,n):fn(t,()=>a(e,n));return mn(l)});return A(o).pipe(Yr(),by(r))}function by(t){return El(pe(e=>{if(Gr(e))throw vy(t,e)}),B(e=>e===!0))}function _I(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return A(!0);let o=i.map(s=>{let a=Kr(s,t),l=CI(a)?a.canMatch(e,n):fn(t,()=>a(e,n));return mn(l)});return A(o).pipe(Yr(),by(r))}var co=class{constructor(e){this.segmentGroup=e||null}},va=class extends Error{constructor(e){super(),this.urlTree=e}};function $r(t){return gr(new co(t))}function NI(t){return gr(new M(4e3,!1))}function kI(t){return gr(Dy(!1,ut.GuardRejected))}var gd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return A(r);if(i.numberOfChildren>1||!i.children[O])return NI(e.redirectTo);i=i.children[O]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new va(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new hn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new q(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},yd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OI(t,e,n,r,i){let o=xd(t,e,n);return o.matched?(r=lI(e,r),_I(r,e,n,i).pipe(B(s=>s===!0?o:y({},yd)))):A(o)}function xd(t,e,n){if(e.path==="**")return RI(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},yd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_S)(n,t,e);if(!i)return y({},yd);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?y(y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function RI(t){return{matched:!0,parameters:t.length>0?ty(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Xg(t,e,n,r){return n.length>0&&LI(t,n,r)?{segmentGroup:new q(e,FI(r,new q(n,t.children))),slicedSegments:[]}:n.length===0&&VI(t,n,r)?{segmentGroup:new q(t.segments,PI(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new q(t.segments,t.children),slicedSegments:n}}function PI(t,e,n,r){let i={};for(let o of n)if(Ca(t,e,o)&&!r[Rt(o)]){let s=new q([],{});i[Rt(o)]=s}return y(y({},r),i)}function FI(t,e){let n={};n[O]=e;for(let r of t)if(r.path===""&&Rt(r)!==O){let i=new q([],{});n[Rt(r)]=i}return n}function LI(t,e,n){return n.some(r=>Ca(t,e,r)&&Rt(r)!==O)}function VI(t,e,n){return n.some(r=>Ca(t,e,r))}function Ca(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function jI(t,e,n,r){return Rt(t)!==r&&(r===O||!Ca(e,n,t))?!1:xd(e,t,n).matched}function BI(t,e,n){return e.length===0&&!t.children[n]}var vd=class{};function $I(t,e,n,r,i,o,s="emptyOnly"){return new Dd(t,e,n,r,i,s,o).recognize()}var HI=31,Dd=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new gd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new M(4002,`'${e.segmentGroup}'`)}recognize(){let e=Xg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let r=new ao([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,{},O,this.rootComponentType,null,{}),i=new Ze(r,n),o=new ga("",i),s=KS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,O).pipe(en(r=>{if(r instanceof va)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof co?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=bd(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(B(o=>o instanceof Ze?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ie(i).pipe(vr(o=>{let s=r.children[o],a=cI(n,o);return this.processSegmentGroup(e,a,s,o)}),kl((o,s)=>(o.push(...s),o)),tn(null),Nl(),fe(o=>{if(o===null)return $r(r);let s=Ey(o);return UI(s),A(s)}))}processSegment(e,n,r,i,o,s){return ie(n).pipe(vr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(en(l=>{if(l instanceof co)return A(null);throw l}))),Mt(a=>!!a),en(a=>{if(wy(a))return BI(r,i,o)?A(new vd):$r(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return jI(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):$r(i):$r(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=xd(n,i,o);if(!a)return $r(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>HI&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(fe(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=OI(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(yt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(yt(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new ao(u,f,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,WI(r),Rt(r),r.component??r._loadedComponent??null,r,GI(r)),{segmentGroup:p,slicedSegments:m}=Xg(n,u,d,l);if(m.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(B(g=>g===null?null:new Ze(h,g)));if(l.length===0&&m.length===0)return A(new Ze(h,[]));let v=Rt(r)===o;return this.processSegment(c,l,p,m,v?O:o,!0).pipe(B(g=>new Ze(h,g instanceof Ze?[g]:[])))}))):$r(n)))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?A({routes:n._loadedRoutes,injector:n._loadedInjector}):AI(e,n,r,this.urlSerializer).pipe(fe(i=>i?this.configLoader.loadChildren(e,n).pipe(pe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):kI(n))):A({routes:[],injector:e})}};function UI(t){t.sort((e,n)=>e.value.outlet===O?-1:n.value.outlet===O?1:e.value.outlet.localeCompare(n.value.outlet))}function zI(t){let e=t.value.routeConfig;return e&&e.path===""}function Ey(t){let e=[],n=new Set;for(let r of t){if(!zI(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Ey(r.children);e.push(new Ze(r.value,i))}return e.filter(r=>!n.has(r))}function WI(t){return t.data||{}}function GI(t){return t.resolve||{}}function qI(t,e,n,r,i,o){return fe(s=>$I(t,e,n,r,s.extractedUrl,i,o).pipe(B(({state:a,tree:l})=>P(y({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function YI(t,e){return fe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of My(l))s.add(c);let a=0;return ie(s).pipe(vr(l=>o.has(l)?KI(l,r,t,e):(l.data=bd(l,l.parent,t).resolve,A(void 0))),pe(()=>a++),Dr(1),fe(l=>a===s.size?A(n):tt))})}function My(t){let e=t.children.map(n=>My(n)).flat();return[t,...e]}function KI(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!gy(i)&&(o[uo]=i.title),ZI(o,t,e,r).pipe(B(s=>(t._resolvedData=s,t.data=bd(t,t.parent,n).resolve,null)))}function ZI(t,e,n,r){let i=Ku(t);if(i.length===0)return A({});let o={};return ie(i).pipe(fe(s=>JI(t[s],e,n,r).pipe(Mt(),pe(a=>{o[s]=a}))),Dr(1),_l(o),en(s=>wy(s)?tt:gr(s)))}function JI(t,e,n,r){let i=fo(e)??r,o=Kr(t,i),s=o.resolve?o.resolve(e,n):fn(i,()=>o(e,n));return mn(s)}function qu(t){return yt(e=>{let n=t(e);return n?ie(n).pipe(B(()=>e)):A(e)})}var Sy=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===O);return i}getResolvedTitleForRoute(r){return r.data[uo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(QI),providedIn:"root"});let t=e;return t})(),QI=(()=>{let e=class e extends Sy{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(L(Uu))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Td=new _("",{providedIn:"root",factory:()=>({})}),Ad=new _("ROUTES"),XI=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(Au)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return A(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mn(r.loadComponent()).pipe(B(Iy),pe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),mi(()=>{this.componentLoaders.delete(r)})),o=new mr(i,()=>new de).pipe(pr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return A({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=ex(i,this.compiler,r,this.onLoadEndListener).pipe(mi(()=>{this.childrenLoaders.delete(i)})),a=new mr(s,()=>new de).pipe(pr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ex(t,e,n,r){return mn(t.loadChildren()).pipe(B(Iy),fe(i=>i instanceof ki||Array.isArray(i)?A(i):ie(e.compileModuleAsync(i))),B(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ad,[],{optional:!0,self:!0}).flat()),{routes:s.map(Id),injector:o}}))}function tx(t){return t&&typeof t=="object"&&"default"in t}function Iy(t){return tx(t)?t.default:t}var _d=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(nx),providedIn:"root"});let t=e;return t})(),nx=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xy=new _(""),Ty=new _("");function rx(t,e,n){let r=t.get(Ty),i=t.get(ze);return t.get(Q).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),ix(t))),{onViewTransitionCreated:l}=r;return l&&fn(t,()=>l({transition:a,from:e,to:n})),s})}function ix(t){return new Promise(e=>{Du(e,{injector:t})})}var ox=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new de,this.transitionAbortSubject=new de,this.configLoader=D(XI),this.environmentInjector=D(ot),this.urlSerializer=D(wd),this.rootContexts=D(Da),this.location=D(Gi),this.inputBindingEnabled=D(Sd,{optional:!0})!==null,this.titleStrategy=D(Sy),this.options=D(Td,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(_d),this.createViewTransition=D(xy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null;let r=o=>this.events.next(new id(o)),i=o=>this.events.next(new od(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(P(y(y({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new se({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:eo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gt(s=>s.id!==0),B(s=>P(y({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),yt(s=>{this.currentTransition=s;let a=!1,l=!1;return A(s).pipe(pe(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?P(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),yt(c=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Yn(c.id,this.urlSerializer.serialize(c.rawUrl),f,Xu.IgnoredSameUrlNavigation)),c.resolve(null),tt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return A(c).pipe(yt(f=>{let h=this.transitions?.getValue();return this.events.next(new ro(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?tt:Promise.resolve(f)}),qI(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),pe(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=P(y({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new ha(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:m,extras:v}=c,g=new ro(f,this.urlSerializer.serialize(h),p,m);this.events.next(g);let w=py(this.rootComponentType).snapshot;return this.currentTransition=s=P(y({},c),{targetSnapshot:w,urlAfterRedirects:h,extras:P(y({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,A(s)}else{let f="";return this.events.next(new Yn(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Xu.IgnoredByUrlHandlingStrategy)),c.resolve(null),tt}}),pe(c=>{let u=new ed(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),B(c=>(this.currentTransition=s=P(y({},c),{guards:dI(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),wI(this.environmentInjector,c=>this.events.next(c)),pe(c=>{if(s.guardsResult=c.guardsResult,Gr(c.guardsResult))throw vy(this.urlSerializer,c.guardsResult);let u=new td(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),gt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ut.GuardRejected),!1)),qu(c=>{if(c.guards.canActivateChecks.length)return A(c).pipe(pe(u=>{let d=new nd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),yt(u=>{let d=!1;return A(u).pipe(YI(this.paramsInheritanceStrategy,this.environmentInjector),pe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ut.NoDataFromResolver)}}))}),pe(u=>{let d=new rd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),qu(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(pe(h=>{d.component=h}),B(()=>{})));for(let h of d.children)f.push(...u(h));return f};return es(u(c.targetSnapshot.root)).pipe(tn(null),zt(1))}),qu(()=>this.afterPreactivation()),yt(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?ie(d).pipe(B(()=>s)):A(s)}),B(c=>{let u=rI(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=P(y({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),pe(()=>{this.events.next(new oo)}),uI(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),zt(1),pe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),gi(this.transitionAbortSubject.pipe(pe(c=>{throw c}))),mi(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",ut.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),en(c=>{if(l=!0,Cy(c))this.events.next(new pn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),sI(c)?this.events.next(new so(c.url)):s.resolve(!1);else{this.events.next(new io(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return tt}))}))}cancelNavigationTransition(r,i,o){let s=new pn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sx(t){return t!==eo}var ax=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(lx),providedIn:"root"});let t=e;return t})(),Cd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},lx=(()=>{let e=class e extends Cd{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Vi(e)))(o||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ay=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(cx),providedIn:"root"});let t=e;return t})(),cx=(()=>{let e=class e extends Ay{constructor(){super(...arguments),this.location=D(Gi),this.urlSerializer=D(wd),this.options=D(Td,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(_d),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=py(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ro)this.stateMemento=this.createStateMemento();else if(r instanceof Yn)this.rawUrlTree=i.initialUrl;else if(r instanceof ha){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof oo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof pn&&(r.code===ut.GuardRejected||r.code===ut.NoDataFromResolver)?this.restoreHistory(i):r instanceof io?this.restoreHistory(i,!0):r instanceof qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=y(y({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=y(y({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Vi(e)))(o||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qi=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Qi||{});function ux(t,e){t.events.pipe(gt(n=>n instanceof qn||n instanceof pn||n instanceof io||n instanceof Yn),B(n=>n instanceof qn||n instanceof Yn?Qi.COMPLETE:(n instanceof pn?n.code===ut.Redirect||n.code===ut.SupersededByNewNavigation:!1)?Qi.REDIRECTING:Qi.FAILED),gt(n=>n!==Qi.REDIRECTING),zt(1)).subscribe(()=>{e()})}function dx(t){throw t}var fx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_y=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(Qs),this.stateManager=D(Ay),this.options=D(Td,{optional:!0})||{},this.pendingTasks=D(Xs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(ox),this.urlSerializer=D(wd),this.location=D(Gi),this.urlHandlingStrategy=D(_d),this._events=new de,this.errorHandler=this.options.errorHandler||dx,this.navigated=!1,this.routeReuseStrategy=D(ax),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(Ad,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Sd,{optional:!0}),this.eventsSubscription=new ue,this.isNgZoneEnabled=D(Q)instanceof Q&&Q.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof pn&&i.code!==ut.Redirect&&i.code!==ut.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qn)this.navigated=!0;else if(i instanceof so){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||sx(o.source)};this.scheduleNavigation(a,eo,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}mx(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=y({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Id),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=y(y({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=uy(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return dy(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Gr(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,eo,null,i)}navigate(r,i={skipLocationChange:!1}){return px(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=y({},fx):i===!1?o=y({},hx):o=i,Gr(r))return Kg(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Kg(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,h)=>{l=f,c=h});let d=this.pendingTasks.add();return ux(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function px(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new M(4008,!1)}function mx(t){return!(t instanceof oo)&&!(t instanceof so)}var gx=new _("");function Ny(t,...e){return Vs([{provide:Ad,multi:!0,useValue:t},[],{provide:qr,useFactory:yx,deps:[_y]},{provide:_u,multi:!0,useFactory:Dx},e.map(n=>n.\u0275providers)])}function yx(t){return t.routerState.root}function vx(t,e){return{\u0275kind:t,\u0275providers:e}}function Dx(){let t=D(Ct);return e=>{let n=t.get(Wi);if(e!==n.components[0])return;let r=t.get(_y),i=t.get(Cx);t.get(wx)===1&&r.initialNavigation(),t.get(bx,null,F.Optional)?.setUpPreloading(),t.get(gx,null,F.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Cx=new _("",{factory:()=>new de}),wx=new _("",{providedIn:"root",factory:()=>1});var bx=new _("");function ky(t){let e=[{provide:xy,useValue:rx},{provide:Ty,useValue:y({skipNextTransition:!!t?.skipInitialTransition},t)}];return vx(9,e)}var wa=class{constructor(){this.Arrows=!0,this.ArrowSize=20}};var Zr=(()=>{let e=class e{constructor(r){this.ngZone=r,this.items=new Map,this.config=new wa,this.arrowsChange=new de,this.deps=new Map,this.enableChildDragging=new se(!0),this.enableZooming=new se(!0),this.direction="horizontal",this.horizontalPadding=100,this.verticalPadding=20,this.groupPadding=40,this.scale=1,this.panX=0,this.panY=0,this.gridSize=1,this.arrows=[],this.layoutUpdated=new de,this.onMouse=new de,this.onMouseMove=i=>{this.onMouse.next(i)},this.ngZone.runOutsideAngular(()=>{document.addEventListener("mousemove",this.onMouseMove)})}update(r){this.items.clear(),r.forEach(i=>{this.items.set(i.id,i),i.deps.forEach(o=>{let s=this.deps.get(o);s||(s=[]),s.push(i.id),this.deps.set(o,s)})})}get list(){return Array.from(this.items.values())}get zRect(){return this.zoomContainer.getBoundingClientRect()}};e.\u0275fac=function(i){return new(i||e)(L(Q))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var ba=class{constructor(e,n="horizontal",r=100,i=20,o=20){this.list=e,this.direction=n,this.horizontalPadding=r,this.verticalPadding=i,this.groupPadding=o}autoArrange(){let e=new Map,n=0,r=0,i=this.list.filter(o=>o.position.deps.length===0);for(let o of i)this.direction==="horizontal"?(this.positionDependents(o,n,0,e),n+=o.elRect.width+this.horizontalPadding):(this.positionDependents(o,0,r,e),r+=o.elRect.height+this.horizontalPadding);return e}positionDependents(e,n,r,i,o={first:!0,gp:-this.groupPadding*2,maxDepLength:0}){let s=this.list.filter(g=>g.position.deps.includes(e.position.id)),a=this.direction==="vertical",l=r,{width:c,height:u}=e.elRect,d=n+(a?u:c)+this.horizontalPadding,f=a?c:u,h={first:!0,gp:0,maxDepLength:0};for(let g=0;g<s.length;g++){let w=g===s.length-1;h.first=g===0;let H=s[g],{consumedSpace:Y,dep:J}=this.positionDependents(H,d,l,i,h);l=0,h.maxDepLength>1&&J&&!w&&(l+=this.groupPadding,o.gp+=this.groupPadding),l+=Y+(w?0:this.verticalPadding)}o.maxDepLength=Math.max(o.maxDepLength,h.maxDepLength);let p=0;if(s.length>1){let g=s[0].position.id,w=s[s.length-1].position.id,H=i.get(g),Y=i.get(w);p=(a?H.x+Y.x:H.y+Y.y)/2}else if(p=r+(s.length?(l-r)/2-f/2:0),e.position.deps.length>1){let g=e.position.deps.length/2,w=this.verticalPadding*g/2;p-=e.elRect.height*g-w}i.set(e.position.id,P(y({},e.position),{x:a?p:n,y:a?n:p}));let m=s.length>1?this.groupPadding-this.verticalPadding:0;return{consumedSpace:l+(s.length?0:f)+m,dep:s.length>0}}};var Ea=class{constructor(e,n="horizontal"){this.list=e,this.direction=n,this.reverseDepsMap=new Map,this.closestDots=new Map,this.setReverseDepsMap(e.map(r=>r.position))}getClosestDotsSimplified(e,n){let r=[...e.position.deps,...this.reverseDepsMap.get(e.position.id)||[]];r.forEach(o=>this.findClosestDot(o,e));let i=r.map(o=>{let s=`${e.position.id}-${o}`;return this.closestDots.get(s)});return[this.closestDots.get(`${e.position.id}-${n}`),this.closestDots.get(`${n}-${e.position.id}`)]}findClosestDot(e,n){let r=`${n.position.id}-${e}`,i=`${e}-${n.position.id}`;if(this.closestDots.has(r))return;let o=this.list.find(s=>s.position.id===e);if(o){let[s,a]=this._findClosestConnectionPoints(n,o);this.closestDots.set(r,s),this.closestDots.set(i,a)}}computeDistance(e,n){let r=e.x-n.x,i=e.y-n.y;return Math.sqrt(r*r+i*i)}_findClosestConnectionPoints(e,n){let i=!1,o=this.direction==="vertical";if(!n.position.deps.includes(e.position.id)){let c=n;n=e,e=c,i=!0}let s=(()=>{let{width:c,height:u}=n.elRect,{x:d,y:f}=n.position,{x:h,y:p}=e.position;if(o){if(f+u<p)return"top";if(f-u>p)return"bottom";if(d+c<h)return"left";if(d-c>h)return"right"}else{if(d+c<h)return"left";if(d-c>h)return"right";if(f+u<p)return"top";if(f-u>p)return"bottom"}return"right"})(),a=s==="right"?1:s==="left"?3:s==="bottom"?2:0,l=s==="right"?3:s==="left"?1:s==="bottom"?0:2;return i?[l,a]:[a,l]}updateDotVisibility(e){Object.keys(e).forEach(n=>{let r=e[n],i=r.position;r.dots.toArray().forEach((s,a)=>{let l=Array.from(this.closestDots.keys()).some(c=>c.startsWith(n)&&this.closestDots.get(c)===a);s.nativeElement.style.visibility=l?"visible":"hidden"})})}setReverseDepsMap(e){e.forEach(n=>{n.deps.forEach(r=>{this.reverseDepsMap.has(r)||this.reverseDepsMap.set(r,[]),this.reverseDepsMap.get(r).push(n.id)})})}};function Nd(t){t||(ou(Nd),t=D(Ws));let e=new U(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(gi(e))}var Ex=["dot"],Mx=["flowChild",""],Sx=["*"],Ma=(()=>{let e=class e{constructor(r,i,o){this.el=r,this.flow=i,this.ngZone=o,this.isDragging=!1,this.offsetX=0,this.offsetY=0,this.positionChange=new de,this.onMouseUp=s=>{s.stopPropagation(),this.isDragging=!1,this.flow.isChildDragging=!1},this.onMouseDown=s=>{s.stopPropagation(),this.isDragging=!0,this.flow.isChildDragging=!0;let a=this.el.nativeElement.getBoundingClientRect();this.offsetX=s.clientX-a.x,this.offsetY=s.clientY-a.y},this.onMouseMove=s=>{if(s.stopPropagation(),s.preventDefault(),this.isDragging){s.stopPropagation();let a=this.flow.zRect,l=s.clientX-a.left,c=s.clientY-a.top,u=Math.round((l-this.flow.panX-this.offsetX)/(this.flow.gridSize*this.flow.scale))*this.flow.gridSize,d=Math.round((c-this.flow.panY-this.offsetY)/(this.flow.gridSize*this.flow.scale))*this.flow.gridSize;this.position.x=u-a.left,this.position.y=d-a.top,this.positionChange.next(this.position),this.flow.arrowsChange.next(this.position)}},this.el.nativeElement.style.position="absolute",this.el.nativeElement.style.transformOrigin="0, 0",this.ngZone.runOutsideAngular(()=>{this.flow.enableChildDragging.subscribe(s=>{s?this.enableDragging():this.disableDragging()})}),this.flow.layoutUpdated.pipe(Nd()).subscribe(s=>{this.position=this.flow.items.get(this.position.id),this.positionChange.next(this.position)}),this.positionChange.subscribe(s=>{let{left:a,top:l}=this.flow.zRect;this.updatePosition(this.position.x+a,this.position.y+l)})}enableDragging(){this.mouseMoveSubscription=this.flow.onMouse.subscribe(this.onMouseMove),this.el.nativeElement.addEventListener("mouseup",this.onMouseUp),this.el.nativeElement.addEventListener("mousedown",this.onMouseDown)}disableDragging(){this.mouseMoveSubscription?.unsubscribe(),this.el.nativeElement.removeEventListener("mouseup",this.onMouseUp),this.el.nativeElement.removeEventListener("mousedown",this.onMouseDown)}ngOnInit(){this.updatePosition(this.position.x,this.position.y)}ngOnChanges(r){}updatePosition(r,i){this.el.nativeElement.style.transform=`translate3d(${r}px, ${i}px, 0)`}ngOnDestroy(){this.disableDragging()}};e.\u0275fac=function(i){return new(i||e)(Z(Pe),Z(Zr),Z(Q))},e.\u0275cmp=Be({type:e,selectors:[["","flowChild",""]],viewQuery:function(i,o){if(i&1&&at(Ex,5),i&2){let s;$e(s=He())&&(o.dots=s)}},inputs:{position:[je.None,"flowChild","position"]},standalone:!0,features:[un,Ue],attrs:Mx,ngContentSelectors:Sx,decls:9,vars:0,consts:[[1,"dot","dot-top"],["dot",""],[1,"dot","dot-right"],[1,"dot","dot-bottom"],[1,"dot","dot-left"]],template:function(i,o){i&1&&(Zs(),Js(0),De(1,"div",0,1)(3,"div",2,1)(5,"div",3,1)(7,"div",4,1))},dependencies:[Ru],styles:[".dot[_ngcontent-%COMP%]{--dot-half-size: calc(var(--dot-size) / 2 * -1);position:absolute;width:var(--dot-size);height:var(--dot-size);background:var(--flow-dot-color);border-radius:999px}.dot-left[_ngcontent-%COMP%]{top:calc(50% + var(--dot-half-size));left:var(--dot-half-size)}.dot-right[_ngcontent-%COMP%]{top:calc(50% + var(--dot-half-size));right:var(--dot-half-size)}.dot-top[_ngcontent-%COMP%]{left:50%;top:var(--dot-half-size)}.dot-bottom[_ngcontent-%COMP%]{left:50%;bottom:var(--dot-half-size)}.invisible[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});let t=e;return t})();var Sa=class{constructor(){this.controlPointDistance=50}bezierPath(e,n){let{x:r,y:i}=e,o=n.x-e.x,s=n.y-e.y,l=Math.sqrt(o*o+s*s)/12;if(Math.abs(s)<=5)return`M${e.x} ${e.y} L${n.x} ${n.y}`;{let c=n.x,u=n.y,d=e.x+o/2,f=n.x-o/2,h=n.y>e.y?i+l:i-l,p=n.y>e.y?u-l:u+l;return`M${r} ${i} C${d} ${h} ${f} ${p} ${c} ${u}`}}flowPath(e,n){if(Math.abs(e.x-n.x)<=5)return`M${e.x} ${e.y} L${n.x} ${n.y}`;if(Math.abs(e.y-n.y)<=5)return`M${e.x} ${e.y} L${n.x} ${n.y}`;let r=(e.x+n.x)/2;return`M${e.x} ${e.y} L${r} ${e.y} L${r} ${n.y} L${n.x} ${n.y}`}blendCorners1(e,n,r){let{x:i,y:o}=e,{x:s,y:a}=n;s-=r;let l={x:i+(s-i)/3,y:o},c={x:s-(s-i)/3,y:a};return`M${i} ${o} C${l.x} ${l.y} ${c.x} ${c.y} ${s} ${a}`}blendCorners(e,n,r){let{x:i,y:o,dotIndex:s}=e,{x:a,y:l,dotIndex:c}=n,u=this.getDirectionAdjustment(s,r),d=this.getDirectionAdjustment(c,r);i+=u.x,o+=u.y,a+=d.x,l+=d.y;let f={x:i+u.cpX,y:o+u.cpY},h={x:a+d.cpX,y:l+d.cpY};return`M${i-u.x} ${o-u.y} C${f.x} ${f.y} ${h.x} ${h.y} ${a} ${l}`}getDirectionAdjustment(e,n){switch(e){case 0:return{x:0,y:-n,cpX:0,cpY:-this.controlPointDistance};case 1:return{x:n,y:0,cpX:this.controlPointDistance,cpY:0};case 2:return{x:0,y:n,cpX:0,cpY:this.controlPointDistance};case 3:return{x:-n,y:0,cpX:-this.controlPointDistance,cpY:0};default:return{x:0,y:0,cpX:0,cpY:0}}}};var Ia=class{constructor(e,n,r,i,o){this.list=e,this.containerRect=n,this.scale=r,this.panX=i,this.panY=o,this.containerPadding=0;let s={list:e,containerRect:n,scale:r,panX:i,panY:o};this.containerPadding=30/this.scale,this.cRect={x:this.containerRect.x/this.scale-this.panX,y:this.containerRect.y/this.scale-this.panY,width:this.containerRect.width/this.scale,height:this.containerRect.height/this.scale}}fitToWindow(){let e=this.getPositions(),{minX:n,maxX:r,minY:i,maxY:o}=this.getBoundaries(e),s=r-n+this.containerPadding,a=o-i+this.containerPadding,l=this.getNewScale(s,a),{panX:c,panY:u}=this.getPanValues(s,a,l,n,i);return{scale:l,panX:c,panY:u}}getPositions(){return this.list.map(e=>{let n=e.elRect.x/this.scale-this.panX,r=e.elRect.y/this.scale-this.panY,i=e.elRect.width,o=e.elRect.height;return{x:n,y:r,width:i,height:o}})}getBoundaries(e){let n=Math.min(...e.map(s=>s.x)),r=Math.max(...e.map(s=>s.x+s.width)),i=Math.min(...e.map(s=>s.y)),o=Math.max(...e.map(s=>s.y+s.height));return{minX:n,maxX:r,minY:i,maxY:o}}getNewScale(e,n){let r=this.cRect.width/e,i=this.cRect.height/n;return Math.min(r,i)}getPanValues(e,n,r,i,o){let s=e*r,a=n*r,l=this.cRect.width/2,c=this.cRect.height/2,u=l-(s/2+i*r),d=c-(a/2+o*r),f=this.containerPadding*r/2,h=this.cRect.x*r+u+f,p=this.cRect.y*r+d+f;return{panX:h,panY:p}}};var Ix=["zoomContainer"],xx=["svg"],Tx=["g"],Ax=["guideLines"],_x=["*"],Nx=.05,kd=(()=>{let e=class e{constructor(r,i,o){this.el=r,this.flow=i,this.ngZone=o,this.children=new _i,this.initialX=0,this.initialY=0,this._startDraggingZoomContainer=s=>{s.stopPropagation(),this.flow.isDraggingZoomContainer=!0,this.initialX=s.clientX-this.flow.panX,this.initialY=s.clientY-this.flow.panY},this._stopDraggingZoomContainer=s=>{s.stopPropagation(),this.flow.isDraggingZoomContainer=!1},this._dragZoomContainer=s=>{this.flow.isDraggingZoomContainer&&(s.preventDefault(),s.stopPropagation(),this.flow.panX=s.clientX-this.initialX,this.flow.panY=s.clientY-this.initialY,this.updateZoomContainer())},this._wheelPanning=s=>{if(s.stopPropagation(),s.preventDefault(),s.ctrlKey||s.metaKey){if(!this.flow.enableZooming.value)return;this.zoomHandle(s)}else this.flow.panX-=s.deltaX,this.flow.panY-=s.deltaY,this.updateZoomContainer()},this.zoomHandle=s=>{if(this.flow.isDraggingZoomContainer||this.flow.isChildDragging)return;s.stopPropagation(),s.preventDefault();let a=s.deltaY<0?1:-1;a===-1&&this.flow.scale<.1||this.setZoom1(s.clientX,s.clientY,a)},this.flow.zoomContainer=this.el.nativeElement,this.flow.arrowsChange.subscribe(s=>this.updateArrows(s)),this.ngZone.runOutsideAngular(()=>{this.el.nativeElement.addEventListener("wheel",this._wheelPanning),this.el.nativeElement.addEventListener("mousedown",this._startDraggingZoomContainer),this.el.nativeElement.addEventListener("mouseup",this._stopDraggingZoomContainer),this.el.nativeElement.addEventListener("mousemove",this._dragZoomContainer)})}ngAfterViewInit(){this.createArrows()}ngAfterContentInit(){this.children.changes.pipe(Cr(this.children)).subscribe(r=>{this.flow.update(this.children.map(i=>i.position)),this.arrangeChildren(),this.createArrows()}),requestAnimationFrame(()=>this.updateArrows())}updateChildDragging(r=!0){this.flow.enableChildDragging.next(r)}updateZooming(r=!0){this.flow.enableZooming.next(r)}setZoom1(r,i,o){let{left:s,top:a}=this.flow.zRect,{scale:l,panX:c,panY:u}=this._setZoom(r-s,i-a,o,this.flow.panX,this.flow.panY,this.flow.scale);this.flow.scale=l,this.flow.panX=c,this.flow.panY=u,this.updateZoomContainer()}_setZoom(r,i,o,s,a,l){let c=Nx*l,u=l+o*c,d=r+(s-r)*u/l,f=i+(a-i)*u/l;return{scale:u,panX:d,panY:f}}fitToWindow(){let r=new Ia(this.list,this.zoomContainer.nativeElement.getBoundingClientRect(),this.flow.scale,this.flow.panX,this.flow.panY),{scale:i,panX:o,panY:s}=r.fitToWindow();this.flow.scale=i,this.flow.panX=o,this.flow.panY=s,this.updateZoomContainer()}updateZoomContainer(){this.zoomContainer.nativeElement.style.transform=`translate3d(${this.flow.panX}px, ${this.flow.panY}px, 0) scale(${this.flow.scale})`}arrangeChildren(){let i=new ba(this.list,this.flow.direction,this.flow.horizontalPadding,this.flow.verticalPadding,this.flow.groupPadding).autoArrange();this.flow.update([...i.values()]),this.flow.layoutUpdated.next()}get list(){return this.children.toArray().map(r=>{let i=r.el.nativeElement.getBoundingClientRect(),o=i.width/this.flow.scale,s=i.height/this.flow.scale,a={x:i.x,y:i.y,bottom:i.bottom,left:i.left,right:i.right,top:i.top,width:o,height:s};return{position:r.position,elRect:a,dots:r.dots.map(l=>l.nativeElement.getBoundingClientRect())}})}createArrows(){if(!this.g)return;this.flow.arrows=[];let r=this.g.nativeElement;for(;r.firstChild;)r.removeChild(r.firstChild);this.list.forEach(i=>{i.position.deps.forEach(o=>{let s=this.list.find(a=>a.position.id===o);if(s){let a={d:`M${i.position.x},${i.position.y} L${s.position.x},${s.position.y}`,deps:[i.position.id,s.position.id],startDot:0,endDot:0,id:`arrow${i.position.id}-to-${s.position.id}`},l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",a.d),l.setAttribute("id",a.id),l.setAttribute("stroke","var(--flow-path-color)"),l.setAttribute("stroke-width","2"),l.setAttribute("fill","none"),l.setAttribute("marker-end","url(#arrowhead)"),r.appendChild(l),this.flow.arrows.push(a)}})}),this.updateArrows()}positionChange(r){let i=this.list.find(o=>o.position.id===r.id);i&&(i.position.x=r.x,i.position.y=r.y,this.updateArrows())}updateArrows(r){let i=this.el.nativeElement.getBoundingClientRect(),o=this.g.nativeElement,s=this.getChildInfo();this.flow.connections=new Ea(this.list,this.flow.direction),this.flow.arrows.forEach(a=>{let[l,c]=a.deps,u=s[l],d=s[c];if(u&&d){let[f,h]=this.getClosestDots(d,l),p=this.getDotByIndex(s,u.position,h,this.flow.scale,this.flow.panX,this.flow.panY),m=this.getDotByIndex(s,d.position,f,this.flow.scale,this.flow.panX,this.flow.panY);a.d=new Sa().blendCorners(m,p,this.flow.config.ArrowSize)}this.flow.arrows.forEach(f=>{let h=o.querySelector(`#${f.id}`);h&&h.setAttribute("d",f.d)})}),this.flow.connections.updateDotVisibility(this.oldChildObj())}oldChildObj(){return this.children.toArray().reduce((r,i)=>(r[i.position.id]=i,r),{})}getChildInfo(){return this.list.reduce((r,i)=>(r[i.position.id]=i,r),{})}getDotByIndex(r,i,o,s,a,l){let u=r[i.id].dots;if(o<0||o>=u.length)throw new Error(`Invalid dot index: ${o}`);let d=u[o],{left:f,top:h}=this.flow.zRect,p=(d.x+d.width/2-a-f)/s,m=(d.y+d.height/2-l-h)/s;return P(y({},i),{x:p,y:m,dotIndex:o})}getClosestDots(r,i){return this.flow.connections.getClosestDotsSimplified(r,i)}ngOnDestroy(){this.el.nativeElement.removeEventListener("wheel",this.zoomHandle)}};e.\u0275fac=function(i){return new(i||e)(Z(Pe),Z(Zr),Z(Q))},e.\u0275cmp=Be({type:e,selectors:[["ngu-flow"]],contentQueries:function(i,o,s){if(i&1&&Iu(s,Ma,4),i&2){let a;$e(a=He())&&(o.children=a)}},viewQuery:function(i,o){if(i&1&&(at(Ix,5),at(xx,5),at(Tx,5),at(Ax,5)),i&2){let s;$e(s=He())&&(o.zoomContainer=s.first),$e(s=He())&&(o.svg=s.first),$e(s=He())&&(o.g=s.first),$e(s=He())&&(o.guideLines=s.first)}},standalone:!0,features:[Br([Zr]),Ue],ngContentSelectors:_x,decls:10,vars:0,consts:[[1,"zoom-container"],["zoomContainer",""],["svg",""],["id","arrowhead","markerWidth","10","markerHeight","7","refX","0","refY","3.5","orient","auto"],["points","0 0, 10 3.5, 0 7"],["g",""]],template:function(i,o){i&1&&(Zs(),re(0,"div",0,1),Li(),re(2,"svg",null,2)(4,"defs")(5,"marker",3),De(6,"polygon",4),te()(),De(7,"g",null,5),te(),Js(9),te())},styles:["[_nghost-%COMP%]{--dot-size: 10px;--flow-dot-color: red;--flow-path-color: blue;--grid-size: 20px;display:block;height:100%;width:100%;position:relative;overflow:hidden}.flow-pattern[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.zoom-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;transform-origin:0 0}svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:visible}#arrowhead[_ngcontent-%COMP%]   polygon[_ngcontent-%COMP%]{fill:var(--flow-path-color)}"],changeDetection:0});let t=e;return t})();var By=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Z($n),Z(Pe))},e.\u0275dir=kt({type:e});let t=e;return t})(),$y=(()=>{let e=class e extends By{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Vi(e)))(o||e)}})(),e.\u0275dir=kt({type:e,features:[Hn]});let t=e;return t})(),Ld=new _("NgValueAccessor");var kx={provide:Ld,useExisting:Pr(()=>_a),multi:!0};function Ox(){let t=Kt()?Kt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Rx=new _("CompositionEventMode"),_a=(()=>{let e=class e extends By{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ox())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Z($n),Z(Pe),Z(Rx,8))},e.\u0275dir=kt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Se("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Br([kx]),Hn]});let t=e;return t})();var Px=new _("NgValidators"),Fx=new _("NgAsyncValidators");function Hy(t){return t!=null}function Uy(t){return Un(t)?ie(t):t}function zy(t){let e={};return t.forEach(n=>{e=n!=null?y(y({},e),n):e}),Object.keys(e).length===0?null:e}function Wy(t,e){return e.map(n=>n(t))}function Lx(t){return!t.validate}function Gy(t){return t.map(e=>Lx(e)?e:n=>e.validate(n))}function Vx(t){if(!t)return null;let e=t.filter(Hy);return e.length==0?null:function(n){return zy(Wy(n,e))}}function qy(t){return t!=null?Vx(Gy(t)):null}function jx(t){if(!t)return null;let e=t.filter(Hy);return e.length==0?null:function(n){let r=Wy(n,e).map(Uy);return Al(r).pipe(B(zy))}}function Yy(t){return t!=null?jx(Gy(t)):null}function Ry(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ky(t){return t._rawValidators}function Zy(t){return t._rawAsyncValidators}function Od(t){return t?Array.isArray(t)?t:[t]:[]}function Ta(t,e){return Array.isArray(t)?t.includes(e):t===e}function Py(t,e){let n=Od(e);return Od(t).forEach(i=>{Ta(n,i)||n.push(i)}),n}function Fy(t,e){return Od(e).filter(n=>!Ta(t,n))}var Rd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var Qr=class extends Rd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pd=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Bx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ej=P(y({},Bx),{"[class.ng-submitted]":"isSubmitted"}),Jy=(()=>{let e=class e extends Pd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Z(Qr,2))},e.\u0275dir=kt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Mu("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Hn]});let t=e;return t})();var po="VALID",xa="INVALID",Jr="PENDING",mo="DISABLED";function $x(t){return(Na(t)?t.validators:t)||null}function Hx(t){return Array.isArray(t)?qy(t):t||null}function Ux(t,e){return(Na(e)?e.asyncValidators:t)||null}function zx(t){return Array.isArray(t)?Yy(t):t||null}function Na(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Fd=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===po}get invalid(){return this.status===xa}get pending(){return this.status==Jr}get disabled(){return this.status===mo}get enabled(){return this.status!==mo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Py(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Py(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fy(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fy(e,this._rawAsyncValidators))}hasValidator(e){return Ta(this._rawValidators,e)}hasAsyncValidator(e){return Ta(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Jr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=mo,this.errors=null,this._forEachChild(r=>{r.disable(P(y({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=po,this._forEachChild(r=>{r.enable(P(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(P(y({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===po||this.status===Jr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mo:po}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Jr,this._hasOwnPendingAsyncValidator=!0;let n=Uy(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?mo:this.errors?xa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jr)?Jr:this._anyControlsHaveStatus(xa)?xa:po}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Na(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Hx(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zx(this._rawAsyncValidators)}};var Vd=new _("CallSetDisabledState",{providedIn:"root",factory:()=>ka}),ka="always";function Wx(t,e,n=ka){qx(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Kx(t,e),Jx(t,e),Zx(t,e),Gx(t,e)}function Ly(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Yx(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Aa(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Gx(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function qx(t,e){let n=Ky(t);e.validator!==null?t.setValidators(Ry(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Zy(t);e.asyncValidator!==null?t.setAsyncValidators(Ry(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Aa(e._rawValidators,i),Aa(e._rawAsyncValidators,i)}function Yx(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=Ky(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=Zy(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Aa(e._rawValidators,r),Aa(e._rawAsyncValidators,r),n}function Kx(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Qy(t,e)})}function Zx(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Qy(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Qy(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Jx(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Qx(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Xx(t){return Object.getPrototypeOf(t.constructor)===$y}function eT(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===_a?n=o:Xx(o)?r=o:i=o}),i||r||n||null}function Vy(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jy(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Xy=class extends Fd{constructor(e=null,n,r){super($x(n),Ux(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Na(n)&&(n.nonNullable||n.initialValueIsDefault)&&(jy(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vy(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vy(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){jy(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tT={provide:Ld,useExisting:Pr(()=>jd),multi:!0};var ev=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=ln({});let t=e;return t})(),nT=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:ev});let t=e;return t})(),jd=(()=>{let e=class e extends $y{constructor(r,i,o,s){super(r,i),this._registry=o,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=D(Vd,{optional:!0})??ka}ngOnInit(){this._control=this._injector.get(Qr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(Z($n),Z(Pe),Z(nT),Z(Ct))},e.\u0275dir=kt({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&Se("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Br([tT]),Hn]});let t=e;return t})();var tv=new _("NgModelWithFormControlWarning"),rT={provide:Qr,useExisting:Pr(()=>Bd)},Bd=(()=>{let e=class e extends Qr{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new Ee,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=eT(this,o)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&Ly(i,this,!1),Wx(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Qx(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ly(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(Z(Px,10),Z(Fx,10),Z(Ld,10),Z(tv,8),Z(Vd,8))},e.\u0275dir=kt({type:e,selectors:[["","formControl",""]],inputs:{form:[je.None,"formControl","form"],isDisabled:[je.None,"disabled","isDisabled"],model:[je.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Br([rT]),Hn,un]});let t=e;return t})();var iT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=ln({imports:[ev]});let t=e;return t})();var nv=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:tv,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Vd,useValue:r.callSetDisabledState??ka}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=ln({imports:[iT]});let t=e;return t})();function lv(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=lv(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function cv(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=cv(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}var C=class t{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(o+=a.text.slice(Math.max(e,l)-l,n-l),s=!r):a.isLeaf?(i?o+=typeof i=="function"?i(a):i:a.type.spec.leafText&&(o+=a.type.spec.leafText(a)),s=!r):!s&&a.isBlock&&(o+=r,s=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new t(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=l}return new t(r,i)}cutByIndex(e,n){return e==n?t.empty:e==0&&n==this.content.length?this:new t(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new t(i,o)}addToStart(e){return new t([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new t(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return lv(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return cv(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Oa(0,e);if(e==this.size)return Oa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||n>0?Oa(r+1,s):Oa(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return t.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new t(n||e,r)}static from(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};C.empty=new C([],0);var $d={index:0,offset:0};function Oa(t,e){return $d.index=t,$d.offset=e,$d}function Ra(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ra(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ra(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}var ge=(()=>{class t{constructor(n,r){this.type=n,this.attrs=r}addToSet(n){let r,i=!1;for(let o=0;o<n.length;o++){let s=n[o];if(this.eq(s))return n;if(this.type.excludes(s.type))r||(r=n.slice(0,o));else{if(s.type.excludes(this.type))return n;!i&&s.type.rank>this.type.rank&&(r||(r=n.slice(0,o)),r.push(this),i=!0),r&&r.push(s)}}return r||(r=n.slice()),i||r.push(this),r}removeFromSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return n.slice(0,r).concat(n.slice(r+1));return n}isInSet(n){for(let r=0;r<n.length;r++)if(this.eq(n[r]))return!0;return!1}eq(n){return this==n||this.type==n.type&&Ra(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let r in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let i=n.marks[r.type];if(!i)throw new RangeError(`There is no mark type ${r.type} in this schema`);return i.create(r.attrs)}static sameSet(n,r){if(n==r)return!0;if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++)if(!n[i].eq(r[i]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return t.none;if(n instanceof t)return[n];let r=n.slice();return r.sort((i,o)=>i.type.rank-o.type.rank),r}}return t.none=[],t})(),Jn=class extends Error{},b=class t{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=dv(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}removeBetween(e,n){return new t(uv(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return t.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new t(C.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new t(e,r,i)}};b.empty=new b(C.empty,0,0);function uv(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(uv(o.content,e-i-1,n-i-1)))}function dv(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=dv(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function sT(t,e,n){if(n.openStart>t.depth)throw new Jn("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Jn("Inconsistent open depths");return fv(t,e,n,0)}function fv(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=fv(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Zn(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=aT(n,t);return Zn(o,pv(t,s,a,e,r))}else return Zn(o,Pa(t,e,r))}function hv(t,e){if(!e.type.compatibleContent(t.type))throw new Jn("Cannot join "+e.type.name+" onto "+t.type.name)}function Wd(t,e,n){let r=t.node(n);return hv(r,e.node(n)),r}function Kn(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function go(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Kn(t.nodeAfter,r),o++));for(let a=o;a<s;a++)Kn(i.child(a),r);e&&e.depth==n&&e.textOffset&&Kn(e.nodeBefore,r)}function Zn(t,e){return t.type.checkContent(e),t.copy(e)}function pv(t,e,n,r,i){let o=t.depth>i&&Wd(t,e,i+1),s=r.depth>i&&Wd(n,r,i+1),a=[];return go(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(hv(o,s),Kn(Zn(o,pv(t,e,n,r,i+1)),a)):(o&&Kn(Zn(o,Pa(t,e,i+1)),a),go(e,n,i,a),s&&Kn(Zn(s,Pa(n,r,i+1)),a)),go(r,null,i,a),new C(a)}function Pa(t,e,n){let r=[];if(go(null,t,n,r),t.depth>n){let i=Wd(t,e,n+1);Kn(Zn(i,Pa(t,e,n+1)),r)}return go(e,null,n,r),new C(r)}function aT(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(C.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}var Fa=class t{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ge.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Qn(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new t(n,r,o)}static resolveCached(e,n){for(let i=0;i<Hd.length;i++){let o=Hd[i];if(o.pos==n&&o.doc==e)return o}let r=Hd[Ud]=t.resolve(e,n);return Ud=(Ud+1)%lT,r}},Hd=[],Ud=0,lT=12,Qn=class{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},cT=Object.create(null),vo=class t{constructor(e,n,r,i=ge.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||C.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ra(this.attrs,n||e.defaultAttrs||cT)&&ge.sameSet(this.marks,r||ge.none)}copy(e=null){return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return b.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new b(c,i.depth-s,o.depth-s)}replace(e,n,r){return sT(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Fa.resolveCached(this,e)}resolveNoCache(e){return Fa.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),uT(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=C.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ge.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ge.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=C.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};vo.prototype.text=void 0;function uT(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Do=class t{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Gd(e,n);if(r.next==null)return t.empty;let i=mv(r);r.next&&r.err("Unexpected trailing text");let o=yT(gT(i));return vT(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return C.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}};Do.empty=new Do(!0);var Gd=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function mv(t){let e=[];do e.push(dT(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function dT(t){let e=[];do e.push(fT(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fT(t){let e=mT(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=hT(t,e);else break;return e}function rv(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function hT(t,e){let n=rv(t),r=n;return t.eat(",")&&(t.next!="}"?r=rv(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function pT(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function mT(t){if(t.eat("(")){let e=mv(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=pT(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function gT(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function gv(t,e){return e-t}function iv(t,e){let n=[];return r(e),n.sort(gv);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&r(l)}}}function yT(t){let e=Object.create(null);return n(iv(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);iv(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Do(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(gv);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function vT(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}var ei=class t{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new ja(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ja(this,n,!0);return r.addAll(e,n.from,n.to),b.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(wT(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=sv(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=sv(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}},yv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},DT={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vv={ol:!0,ul:!0},La=1,Va=2,yo=4;function ov(t,e,n){return e!=null?(e?La:0)|(e==="full"?Va:0):t&&t.whitespace=="pre"?La|Va:n&~yo}var Xr=class{constructor(e,n,r,i,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=o,this.options=a,this.content=[],this.activeMarks=ge.none,this.stashMarks=[],this.match=s||(a&yo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(C.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&La)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=C.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(C.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):ET(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!yv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},ja=class{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,o,s=ov(null,n.preserveWhitespace,0)|(r?yo:0);i?o=new Xr(i.type,i.attrs,ge.none,ge.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new Xr(null,null,ge.none,ge.none,!0,null,s):o=new Xr(e.schema.topNodeType,null,ge.none,ge.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(bT(r));if(!i)return;let[o,s]=i,a=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l]);n();for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Va||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&La)r.options&Va?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],o=e.previousSibling;(!i||o&&o.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;vv.hasOwnProperty(r)&&this.parser.normalizeLists&&CT(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(o?o.ignore:DT.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let s,a=this.top,l=this.needsBlock;if(yv.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ge.none,r=ge.none;for(let i=0;i<e.length;i+=2)for(let o=void 0;;){let s=this.parser.matchStyle(e[i],e[i+1],this,o);if(!s)break;if(s.ignore)return null;if(s.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{s.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(n),s.consuming===!1)o=s;else break}return[n,r]}addElementByRule(e,n,r){let i,o,s;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):i=this.enter(o,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,s&&this.removePendingMark(s,a)}addAll(e,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=r==null?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let o=this.nodes[i],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let s=ov(e,i,o.options);o.options&yo&&o.content.length==0&&(s|=yo),this.nodes.push(new Xr(e,n,o.activeMarks,o.pendingMarks,r,null,s)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=MT(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let s=i.popFromStashMark(e);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}};function CT(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&vv.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function wT(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function bT(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function sv(t){let e={};for(let n in t)e[n]=t[n];return e}function ET(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}function MT(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var ti=class t{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=zd(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=t.renderSpec(zd(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&t.renderSpec(zd(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],o=i.indexOf(" ");o>0&&(r=i.slice(0,o),i=i.slice(o+1));let s,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=t.renderSpec(e,d,r);if(a.appendChild(f),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:a,contentDOM:s}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=av(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return av(e.marks)}};function av(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function zd(t){return t.document||window.document}var wv=65535,bv=Math.pow(2,16);function ST(t,e){return t+e*bv}function Dv(t){return t&wv}function IT(t){return(t-(t&wv))/bv}var Ev=1,Mv=2,Ba=4,Sv=8,bo=class{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Sv)>0}get deletedBefore(){return(this.delInfo&(Ev|Ba))>0}get deletedAfter(){return(this.delInfo&(Mv|Ba))>0}get deletedAcross(){return(this.delInfo&Ba)>0}},Zt=class t{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}recover(e){let n=0,r=Dv(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+IT(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+i+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:ST(a/3,e-l),m=e==l?Mv:e==d?Ev:Ba;return(n<0?e!=l:e!=d)&&(m|=Sv),new bo(h,m,p)}i+=u-c}return r?e+i:new bo(e+i,0,null)}touches(e,n){let r=0,i=Dv(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new t(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}};Zt.empty=new Zt([]);var $a=class t{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new t(this.maps,this.mirror,e,n)}copy(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new t;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new bo(e,i,null)}},qd=Object.create(null),ye=class{getMap(){return Zt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=qd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in qd)throw new RangeError("Duplicate use of step JSON ID "+e);return qd[e]=n,n.prototype.jsonID=e,n}},we=class t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new t(e,null)}static fail(e){return new t(null,e)}static fromReplace(e,n,r,i){try{return t.ok(e.replace(n,r,i))}catch(o){if(o instanceof Jn)return t.fail(o.message);throw o}}};function ef(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(ef(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return C.fromArray(r)}var Ha=class t extends ye{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new b(ef(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return we.fromReplace(e,this.from,this.to,o)}invert(){return new Ua(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};ye.jsonID("addMark",Ha);var Ua=class t extends ye{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new b(ef(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return we.fromReplace(e,this.from,this.to,r)}invert(){return new Ha(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};ye.jsonID("removeMark",Ua);var za=class t extends ye{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return we.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return we.fromReplace(e,this.pos,this.pos+1,new b(C.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new t(this.pos,n.marks[i]);return new t(this.pos,this.mark)}}return new Wa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};ye.jsonID("addNodeMark",za);var Wa=class t extends ye{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return we.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return we.fromReplace(e,this.pos,this.pos+1,new b(C.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new za(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};ye.jsonID("removeNodeMark",Wa);var Pt=class t extends ye{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Zd(e,this.from,this.to)?we.fail("Structure replace would overwrite content"):we.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Zt([this.from,this.to-this.from,this.slice.size])}invert(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?b.empty:new b(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?b.empty:new b(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,b.fromJSON(e,n.slice),!!n.structure)}};ye.jsonID("replace",Pt);var Ie=class t extends ye{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Zd(e,this.from,this.gapFrom)||Zd(e,this.gapTo,this.to)))return we.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return we.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?we.fromReplace(e,this.from,this.to,r):we.fail("Content does not fit in gap")}getMap(){return new Zt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new t(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,b.fromJSON(e,n.slice),n.insert,!!n.structure)}};ye.jsonID("replaceAround",Ie);function Zd(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function xT(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Jt(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!xT(i,o,s))break}return null}function ni(t,e,n=null,r=t){let i=TT(t,e),o=i&&AT(r,e);return o?i.map(Cv).concat({type:e,attrs:n}).concat(o.map(Cv)):null}function Cv(t){return{type:t,attrs:null}}function TT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function AT(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function ft(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function bt(t,e){let n=t.resolve(e),r=n.index();return Iv(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Iv(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function ri(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&Iv(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Ga(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function tf(t,e,n=e,r=b.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return _T(i,o,r)?new Pt(e,n,r):new Jd(i,o,r).fit()}function _T(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}var Jd=class{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=C.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=C.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new b(o,s,a);return e>-1?new Ie(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Pt(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Yd(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(C.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Yd(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new b(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Yd(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new b(Co(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new b(Co(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));d=d.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),v=d.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(d=v,u.push(xv(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=wo(this.placed,n,C.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<h;m++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=p?e==0?b.empty:new b(Co(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new b(Co(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Kd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Kd(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Kd(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=wo(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=wo(this.placed,this.depth,C.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(C.empty,!0);n.childCount&&(this.placed=wo(this.placed,this.frontier.length,n))}};function Co(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Co(t.firstChild.content,e-1,n)))}function wo(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(wo(t.lastChild.content,e-1,n)))}function Yd(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function xv(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,xv(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(C.empty,!0)))),t.copy(r)}function Kd(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!NT(n,o.content,s)?a:null}function NT(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}var Qd=class t extends ye{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return we.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return we.fromReplace(e,this.pos,this.pos+1,new b(C.from(i),0,n.isLeaf?0:1))}getMap(){return Zt.empty}invert(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}};ye.jsonID("attr",Qd);var Xd=class t extends ye{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return we.ok(r)}getMap(){return Zt.empty}invert(e){return new t(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}};ye.jsonID("docAttr",Xd);var Eo=class extends Error{};Eo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Eo.prototype=Object.create(Error.prototype);Eo.prototype.constructor=Eo;Eo.prototype.name="TransformError";var nf=Object.create(null),N=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new of(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=b.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?b.empty:n),a==0&&_v(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),_v(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new T(e):ii(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?ii(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):ii(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Je(e.node(0))}static atStart(e){return ii(e,e,0,0,1)||new Je(e)}static atEnd(e){return ii(e,e,e.content.size,e.childCount,-1)||new Je(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nf)throw new RangeError("Duplicate use of selection JSON ID "+e);return nf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return T.between(this.$anchor,this.$head).getBookmark()}};N.prototype.visible=!0;var of=class{constructor(e,n){this.$from=e,this.$to=n}},Tv=!1;function Av(t){!Tv&&!t.parent.inlineContent&&(Tv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var T=class t extends N{constructor(e,n=e){Av(e),Av(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return N.near(r);let i=e.resolve(n.map(this.anchor));return new t(i.parent.inlineContent?i:r,r)}replace(e,n=b.empty){if(super.replace(e,n),n==b.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new qa(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=N.findFrom(n,r,!0)||N.findFrom(n,-r,!0);if(o)n=o.$head;else return N.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(N.findFrom(e,-r,!0)||N.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new t(e,n)}};N.jsonID("text",T);var qa=class t{constructor(e,n){this.anchor=e,this.head=n}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(e){return T.between(e.resolve(this.anchor),e.resolve(this.head))}},E=class t extends N{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?N.near(o):new t(o)}content(){return new b(C.from(this.node),0,0)}eq(e){return e instanceof t&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new sf(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}static create(e,n){return new t(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};E.prototype.visible=!1;N.jsonID("node",E);var sf=class t{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new qa(r,r):new t(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&E.isSelectable(r)?new E(n):N.near(n)}},Je=class t extends N{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=b.empty){if(n==b.empty){e.delete(0,e.doc.content.size);let r=N.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new t(e)}map(e){return new t(e)}eq(e){return e instanceof t}getBookmark(){return OT}};N.jsonID("all",Je);var OT={map(){return this},resolve(t){return new Je(t)}};function ii(t,e,n,r,i,o=!1){if(e.inlineContent)return T.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&E.isSelectable(a))return E.create(t,n-(i<0?a.nodeSize:0))}else{let l=ii(t,a,n+i,i<0?a.childCount:0,i,o);if(l)return l}n+=a.nodeSize*i}return null}function _v(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Pt||i instanceof Ie))return;let o=t.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(N.near(t.doc.resolve(s),n))}function Nv(t,e){return!e||!t?t:t.bind(e)}var oi=class{constructor(e,n,r){this.name=e,this.init=Nv(n.init,r),this.apply=Nv(n.apply,r)}},uj=[new oi("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new oi("selection",{init(t,e){return t.selection||N.atStart(e.doc)},apply(t){return t.selection}}),new oi("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new oi("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];function kv(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=kv(i,e,{})),n[r]=i}return n}var xe=class{constructor(e){this.spec=e,this.props={},e.props&&kv(e.props,this,this.props),this.key=e.key?e.key.key:Ov("plugin")}getState(e){return e[this.key]}},rf=Object.create(null);function Ov(t){return t in rf?t+"$"+ ++rf[t]:(rf[t]=0,t+"$")}var Qe=class{constructor(e="key"){this.key=Ov(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var nr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e};var Yv=function(t,e,n,r){return n&&(Rv(t,e,n,r,-1)||Rv(t,e,n,r,1))},RT=/^(img|br|input|textarea|hr)$/i;function Rv(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ya(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Df(t)||RT.test(t.nodeName)||t.contentEditable=="false")return!1;e=nr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Ya(t):0}else return!1}}function Ya(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function PT(t,e,n){for(let r=e==0,i=e==Ya(t);r||i;){if(t==n)return!0;let o=nr(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Ya(t)}}function Df(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Kv=function(t){return t.focusNode&&Yv(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Zv(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}var Ft=typeof navigator<"u"?navigator:null,Pv=typeof document<"u"?document:null,Dn=Ft&&Ft.userAgent||"",lf=/Edge\/(\d+)/.exec(Dn),Jv=/MSIE \d/.exec(Dn),cf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Dn),ci=!!(Jv||cf||lf),Cf=Jv?document.documentMode:cf?+cf[1]:lf?+lf[1]:0,Xa=!ci&&/gecko\/(\d+)/i.test(Dn);Xa&&+(/Firefox\/(\d+)/.exec(Dn)||[0,0])[1];var uf=!ci&&/Chrome\/(\d+)/.exec(Dn),rr=!!uf,FT=uf?+uf[1]:0,ir=!ci&&!!Ft&&/Apple Computer/.test(Ft.vendor),wf=ir&&(/Mobile\/\w+/.test(Dn)||!!Ft&&Ft.maxTouchPoints>2),ht=wf||(Ft?/Mac/.test(Ft.platform):!1),LT=Ft?/Win/.test(Ft.platform):!1,xo=/Android \d/.test(Dn),bf=!!Pv&&"webkitFontSmoothing"in Pv.documentElement.style,VT=bf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var Qv=function(t){t&&(this.nodeName=t)};Qv.prototype=Object.create(null);var yj=[new Qv];function jT(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Kv(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&E.isSelectable(u)&&i.parent&&!(u.isInline&&PT(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new E(s==d?a:r.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=e0(t,l,a,u)}return c}function Xv(t){return t.editable?t.hasFocus():UT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ef(t,e=!1){let n=t.state.selection;if(HT(t,n),!!Xv(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&rr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Yv(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)$T(t);else{let{anchor:r,head:i}=n,o,s;Fv&&!(n instanceof T)&&(n.$from.parent.inlineContent||(o=Lv(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Lv(t,n.to))),t.docView.setSelection(r,i,t.root,e),Fv&&(o&&Vv(o),s&&Vv(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&BT(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var Fv=ir||rr&&FT<63;function Lv(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(ir&&i&&i.contentEditable=="false")return af(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return af(i);if(o)return af(o)}}function af(t){return t.contentEditable="true",ir&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Vv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function BT(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Xv(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function $T(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,nr(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&ci&&Cf<=11&&(r.disabled=!0,r.disabled=!1)}function HT(t,e){if(e instanceof E){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(jv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else jv(t)}function jv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function e0(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||T.between(e,n,r)}function UT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function df(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&N.findFrom(o,e)}function gn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Bv(t,e,n){let r=t.state.selection;if(r instanceof T)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return gn(t,new T(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=df(t.state,e);return i&&i instanceof E?gn(t,i):!1}else if(!(ht&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?E.isSelectable(o)?gn(t,new E(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):bf?gn(t,new T(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof E&&r.node.isInline)return gn(t,new T(e>0?r.$to:r.$from));{let i=df(t.state,e);return i?gn(t,i):!1}}}function Ka(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Mo(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function si(t,e){return e<0?zT(t):WT(t)}function zT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Xa&&n.nodeType==1&&r<Ka(n)&&Mo(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Mo(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(t0(n))break;{let a=n.previousSibling;for(;a&&Mo(a,-1);)i=n.parentNode,o=nr(a),a=a.previousSibling;if(a)n=a,r=Ka(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?ff(t,n,r):i&&ff(t,i,o)}function WT(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Ka(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Mo(a,1))o=n,s=++r;else break}else{if(t0(n))break;{let a=n.nextSibling;for(;a&&Mo(a,1);)o=a.parentNode,s=nr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Ka(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&ff(t,o,s)}function t0(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function GT(t,e){for(;t&&e==t.childNodes.length&&!Df(t);)e=nr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function qT(t,e){for(;t&&!e&&!Df(t);)e=nr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ff(t,e,n){if(e.nodeType!=3){let o,s;(s=GT(e,n))?(e=s,n=0):(o=qT(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(Kv(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ef(t)},50)}function $v(t,e){let n=t.state.doc.resolve(e);if(!(rr||LT)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Hv(t,e,n){let r=t.state.selection;if(r instanceof T&&!r.empty||n.indexOf("s")>-1||ht&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=df(t.state,e);if(s&&s instanceof E)return gn(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof Je?N.near(s,e):N.findFrom(s,e);return a?gn(t,a):!1}return!1}function Uv(t,e){if(!(t.state.selection instanceof T))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function zv(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function YT(t){if(!ir||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;zv(t,r,"true"),setTimeout(()=>zv(t,r,"false"),20)}return!1}function KT(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function ZT(t,e){let n=e.keyCode,r=KT(e);if(n==8||ht&&n==72&&r=="c")return Uv(t,-1)||si(t,-1);if(n==46&&!e.shiftKey||ht&&n==68&&r=="c")return Uv(t,1)||si(t,1);if(n==13||n==27)return!0;if(n==37||ht&&n==66&&r=="c"){let i=n==37?$v(t,t.state.selection.from)=="ltr"?-1:1:-1;return Bv(t,i,r)||si(t,i)}else if(n==39||ht&&n==70&&r=="c"){let i=n==39?$v(t,t.state.selection.from)=="ltr"?1:-1:1;return Bv(t,i,r)||si(t,i)}else{if(n==38||ht&&n==80&&r=="c")return Hv(t,-1,r)||si(t,-1);if(n==40||ht&&n==78&&r=="c")return YT(t)||Hv(t,1,r)||si(t,1);if(r==(ht?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function n0(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||ti.fromSchema(t.state.schema),a=l0(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=a0[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f}}function r0(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new b(C.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):b.empty;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)a=d;else{let f=i.marks(),{schema:h}=t.state,p=ti.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=s.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=XT(n),bf&&eA(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ei.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!JT.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=tA(Wv(a,+u[1],+u[2]),u[4]);else if(a=b.maxOpen(QT(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Wv(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}var JT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function QT(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&o0(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=s0(s[s.length-1],o.length));let u=i0(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return C.from(s)}return t}function i0(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,C.from(t));return t}function o0(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=o0(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(C.from(i0(n,t,i+1))))}}function s0(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,s0(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(C.empty,!0);return t.copy(n.append(r))}function hf(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=hf(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(C.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Wv(t,e,n){return e<t.openStart&&(t=new b(hf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new b(hf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var a0={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Gv=null;function l0(){return Gv||(Gv=document.implementation.createHTMLDocument("title"))}function XT(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=l0().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&a0[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function eA(t){let e=t.querySelectorAll(rr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function tA(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=C.from(l.create(r[a+1],i)),o++,s++}return new b(i,o,s)}var Et={},et={};function yn(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}et.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!u0(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(xo&&rr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),wf&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Zv(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||ZT(t,n)?n.preventDefault():yn(t,"key")};et.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};et.keypress=(t,e)=>{let n=e;if(u0(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ht&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof T)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function el(t){return{left:t.clientX,top:t.clientY}}function nA(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Mf(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function li(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function rA(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&E.isSelectable(r)?(li(t,new E(n),"pointer"),!0):!1}function iA(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof E&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(E.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(li(t,E.create(t.state.doc,i),"pointer"),!0):!1}function oA(t,e,n,r,i){return Mf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?iA(t,n):rA(t,n))}function sA(t,e,n,r){return Mf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function aA(t,e,n,r){return Mf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||lA(t,n,r)}function lA(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(li(t,T.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)li(t,T.create(r,a+1,a+1+s.content.size),"pointer");else if(E.isSelectable(s))li(t,E.create(r,a),"pointer");else continue;return!0}}function Sf(t){return Za(t)}var c0=ht?"metaKey":"ctrlKey";Et.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Sf(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&nA(n,t.input.lastClick)&&!n[c0]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(el(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new pf(t,s,n,!!r)):(o=="doubleClick"?sA:aA)(t,s.pos,s.inside,n)?n.preventDefault():yn(t,"pointer"))};var pf=class{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[c0],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}let a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof E&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),yn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ef(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(el(e))),this.updateAllowDefault(e),this.allowDefault||!n?yn(this.view,"pointer"):oA(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ir&&this.mightDrag&&!this.mightDrag.node.isAtom||rr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(li(this.view,N.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):yn(this.view,"pointer")}move(e){this.updateAllowDefault(e),yn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};Et.touchstart=t=>{t.input.lastTouch=Date.now(),Sf(t),yn(t,"pointer")};Et.touchmove=t=>{t.input.lastTouch=Date.now(),yn(t,"pointer")};Et.contextmenu=t=>Sf(t);function u0(t,e){return t.composing?!0:ir&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}var cA=xo?5e3:-1;et.compositionstart=et.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Za(t,!0),t.markCursor=null;else if(Za(t),Xa&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){t.domSelection().collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}d0(t,cA)};et.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,d0(t,20))};function d0(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Za(t),e))}function uA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=dA());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function dA(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Za(t,e=!1){if(!(xo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),uA(t),e||t.docView&&t.docView.dirty){let n=jT(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function fA(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}var So=ci&&Cf<15||wf&&VT<604;Et.copy=et.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=So?null:n.clipboardData,s=r.content(),{dom:a,text:l}=n0(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):fA(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function hA(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function pA(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?mf(t,r.value,null,i,e):mf(t,r.textContent,r.innerHTML,i,e)},50)}function mf(t,e,n,r,i){let o=r0(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,o||b.empty)))return!0;if(!o)return!1;let s=hA(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function f0(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}et.paste=(t,e)=>{let n=e;if(t.composing&&!xo)return;let r=So?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&mf(t,f0(r),r.getData("text/html"),i,n)?n.preventDefault():pA(t,n)};var gf=class{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}},h0=ht?"altKey":"ctrlKey";Et.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(el(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof E?i.to-1:i.to))){if(r&&r.mightDrag)s=E.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(s=E.create(t.state.doc,u.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c}=n0(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(So?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",So||n.dataTransfer.setData("text/plain",c),t.dragging=new gf(a,!n[h0],s)};Et.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};et.dragover=et.dragenter=(t,e)=>e.preventDefault();et.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(el(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",p=>{s=p(s,t)}):s=r0(t,f0(n.dataTransfer),So?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[h0]);if(t.someProp("handleDrop",p=>p(t,n,s||b.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?Ga(t.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&E.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new E(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,g,w)=>p=w),c.setSelection(e0(t,h,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Et.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ef(t)},20))};Et.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Et.beforeinput=(t,e)=>{if(rr&&xo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Zv(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in et)Et[t]=et[t];function Io(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}var Ja=class t{constructor(e,n){this.toDOM=e,this.spec=n||er,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new vn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Io(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},Xn=class t{constructor(e,n){this.attrs=e,this.spec=n||er}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new vn(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof t&&Io(this.attrs,e.attrs)&&Io(this.spec,e.spec)}static is(e){return e.type instanceof t}destroy(){}},yf=class t{constructor(e,n){this.attrs=e,this.spec=n||er}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new vn(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof t&&Io(this.attrs,e.attrs)&&Io(this.spec,e.spec)}destroy(){}},vn=class t{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new t(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new t(e,e,new Ja(n,r))}static inline(e,n,r,i){return new t(e,n,new Xn(r,i))}static node(e,n,r,i){return new t(e,n,new yf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xn}get widget(){return this.type instanceof Ja}},ai=[],er={},Xe=class t{constructor(e,n){this.local=e.length?e:ai,this.children=n.length?n:ai}static create(e,n){return n.length?Qa(n,e,0,er):Fe}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==Fe||e.maps.length==0?this:this.mapInner(e,n,0,0,r||er)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?mA(this.children,s||[],e,n,r,i,o):s?new t(s.sort(tr),ai):Fe}add(e,n){return n.length?this==Fe?t.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=m0(n,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,Qa(u,a,c+1,er)),o+=3}});let s=p0(o?g0(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new t(s.length?this.local.concat(s).sort(tr):this.local,i||this.children)}remove(e){return e.length==0||this==Fe?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=Fe?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new t(i,r):Fe}forChild(e,n){if(this==Fe)return this;if(n.isLeaf)return t.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Xn){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new t(i.sort(tr),ai);return r?new vf([a,r]):a}return r||Fe}eq(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return If(this.localsInner(e))}localsInner(e){if(this==Fe)return ai;if(e.inlineContent||!this.local.some(Xn.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Xn||n.push(this.local[r]);return n}};Xe.empty=new Xe([],[]);Xe.removeOverlap=If;var Fe=Xe.empty,vf=class t{constructor(e){this.members=e}map(e,n){let r=this.members.map(i=>i.map(e,n,er));return t.from(r)}forChild(e,n){if(n.isLeaf)return Xe.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Fe&&(o instanceof t?r=r.concat(o.members):r.push(o))}return t.from(r)}eq(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?If(r?n:n.sort(tr)):ai}static from(e){switch(e.length){case 0:return Fe;case 1:return e[0];default:return new t(e.every(n=>n instanceof Xe)?e:e.reduce((n,r)=>n.concat(r instanceof Xe?r:r.members),[]))}}};function mA(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let v=m-p-(h-f);for(let g=0;g<a.length;g+=3){let w=a[g+1];if(w<0||f>w+u-d)continue;let H=a[g]+u-d;h>=H?a[g+1]=f<=H?-2:-1:p>=i&&v&&(a[g]+=v,a[g+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+o,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==h){let g=a[c+2].mapInner(n,v,u+1,t[c]+o+1,s);g!=Fe?(a[c]=d,a[c+1]=h,a[c+2]=g):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=gA(a,t,e,n,i,o,s),u=Qa(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Xe(e.sort(tr),a)}function p0(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new vn(i.from+e,i.to+e,i.type))}return n}function gA(t,e,n,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function m0(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function g0(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Qa(t,e,n,r){let i=[],o=!1;e.forEach((a,l)=>{let c=m0(t,a,l+n);if(c){o=!0;let u=Qa(c,a,n+l+1,r);u!=Fe&&i.push(l,l+a.nodeSize,u)}});let s=p0(o?g0(t):t,-n).sort(tr);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Xe(s,i):Fe}function tr(t,e){return t.from-e.from||t.to-e.to}function If(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),qv(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),qv(e,i,r.copy(o.from,r.to)));break}}}return e}function qv(t,e,n){for(;e<t.length&&tr(n,t[e])>0;)e++;t.splice(e,0,n)}var vj=ci&&Cf<=11;var Qt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},nl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yA=typeof navigator<"u"&&/Mac/.test(navigator.platform),vA=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(le=0;le<10;le++)Qt[48+le]=Qt[96+le]=String(le);var le;for(le=1;le<=24;le++)Qt[le+111]="F"+le;var le;for(le=65;le<=90;le++)Qt[le]=String.fromCharCode(le+32),nl[le]=String.fromCharCode(le);var le;for(tl in Qt)nl.hasOwnProperty(tl)||(nl[tl]=Qt[tl]);var tl;function y0(t){var e=yA&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vA&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?nl:Qt)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var DA=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function CA(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))DA?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function wA(t){let e=Object.create(null);for(let n in t)e[CA(n)]=t[n];return e}function xf(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function v0(t){let e=wA(t);return function(n,r){let i=y0(r),o,s=e[xf(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[xf(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=Qt[r.keyCode])&&o!=i){let a=e[xf(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var rl=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function bA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var Af=(t,e,n)=>{let r=bA(t,n);if(!r)return!1;let i=C0(r);if(!i){let s=r.blockRange(),a=s&&Jt(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&I0(t,i,e))return!0;if(r.parent.content.size==0&&(ui(o,"end")||E.isSelectable(o))){let s=tf(t.doc,r.before(),r.after(),b.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(ui(o,"end")?N.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):E.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function ui(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}var _f=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=C0(r)}let s=o&&o.nodeBefore;return!s||!E.isSelectable(s)?!1:(e&&e(t.tr.setSelection(E.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function C0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function EA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var Nf=(t,e,n)=>{let r=EA(t,n);if(!r)return!1;let i=w0(r);if(!i)return!1;let o=i.nodeAfter;if(I0(t,i,e))return!0;if(r.parent.content.size==0&&(ui(o,"start")||E.isSelectable(o))){let s=tf(t.doc,r.before(),r.after(),b.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(ui(o,"start")?N.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):E.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},kf=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=w0(r)}let s=o&&o.nodeAfter;return!s||!E.isSelectable(s)?!1:(e&&e(t.tr.setSelection(E.create(t.doc,o.pos)).scrollIntoView()),!0)};function w0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var b0=(t,e)=>{let n=t.selection,r=n instanceof E,i;if(r){if(n.node.isTextblock||!bt(t.doc,n.from))return!1;i=n.from}else if(i=ri(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(E.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},E0=(t,e)=>{let n=t.selection,r;if(n instanceof E){if(n.node.isTextblock||!bt(t.doc,n.to))return!1;r=n.to}else if(r=ri(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},M0=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Jt(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},Of=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Rf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Pf=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Rf(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(N.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Ff=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Je||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Rf(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(T.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Lf=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ft(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Jt(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function MA(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof E&&e.selection.node.isBlock)return!r.parentOffset||!ft(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let o=i.parentOffset==i.parent.content.size,s=e.tr;(e.selection instanceof T||e.selection instanceof Je)&&s.deleteSelection();let a=r.depth==0?null:Rf(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=t&&t(i.parent,o),c=l?[l]:o&&a?[{type:a}]:void 0,u=ft(s.doc,s.mapping.map(r.pos),1,c);if(!c&&!u&&ft(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),!o&&!r.parentOffset&&r.parent.type!=a)){let d=s.mapping.map(r.before()),f=s.doc.resolve(d);a&&r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}n(s.scrollIntoView())}return!0}}var SA=MA();var S0=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(E.create(t.doc,i))),!0)},IA=(t,e)=>(e&&e(t.tr.setSelection(new Je(t.doc))),!0);function xA(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||bt(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function I0(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(xA(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(n){let d=e.pos+i.nodeSize,f=C.empty;for(let m=o.length-1;m>=0;m--)f=C.from(o[m].create(null,f));f=C.from(r.copy(f));let h=t.tr.step(new Ie(e.pos-1,d,e.pos,d,new b(f,1,0),o.length,!0)),p=d+2*o.length;bt(h.doc,p)&&h.join(p),n(h.scrollIntoView())}return!0}let l=N.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Jt(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&ui(i,"start",!0)&&ui(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let m=C.empty;for(let g=f.length-1;g>=0;g--)m=C.from(f[g].copy(m));let v=t.tr.step(new Ie(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new b(m,f.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function x0(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(T.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}var Vf=x0(-1),jf=x0(1);function T0(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&ni(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Bf(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}function $f(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}var Tf=$f(rl,Af,_f),D0=$f(rl,Nf,kf),Cn={Enter:$f(Of,Ff,Lf,SA),"Mod-Enter":Pf,Backspace:Tf,"Mod-Backspace":Tf,"Shift-Backspace":Tf,Delete:D0,"Mod-Delete":D0,"Mod-a":IA},TA={"Ctrl-h":Cn.Backspace,"Alt-Backspace":Cn["Mod-Backspace"],"Ctrl-d":Cn.Delete,"Ctrl-Alt-Backspace":Cn["Mod-Delete"],"Alt-Delete":Cn["Mod-Delete"],"Alt-d":Cn["Mod-Delete"],"Ctrl-a":Vf,"Ctrl-e":jf};for(let t in Cn)TA[t]=Cn[t];var Rj=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;function A0(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let u=n.doc.resolve(s.start-2);l=new Qn(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new Qn(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=ni(l,t,e,s);return c?(r&&r(AA(n.tr,s,c,a,t).scrollIntoView()),!0):!1}}function AA(t,e,n,r,i){let o=C.empty;for(let u=n.length-1;u>=0;u--)o=C.from(n[u].type.create(n[u].attrs,o));t.step(new Ie(e.start-(r?2:0),e.end,e.start,e.end,new b(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&ft(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function _0(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?_A(e,n,t,o):NA(e,n,o):!0:!1}}function _A(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Ie(o-1,s,o,s,new b(C.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Qn(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));let a=Jt(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return bt(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function NA(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?C.empty:C.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Ie(d-(a?1:0),f+(l?1:0),d+1,f-1,new b((a?C.empty:C.from(i.copy(C.empty))).append(l?C.empty:C.from(i.copy(C.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function N0(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=C.from(c?t.create():null),d=new b(C.from(t.create(null,C.from(a.type.create(null,u)))),c?3:1,0),f=o.start,h=o.end;n(e.tr.step(new Ie(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function F0(t){let{state:e,transaction:n}=t,{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return P(y({},e),{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}})}var Wf=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{let d=l(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){let{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d=P(y({},Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{let v=this.buildProps(c,n),g=h(...m)(v);return a.push(g),d}]))),{run:u});return d}createCan(e){let{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i),a=Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)(P(y({},s),{dispatch:void 0}))]));return P(y({},a),{chain:()=>this.createChain(o,i)})}buildProps(e,n=!0){let{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a={tr:e,editor:i,view:s,state:F0({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}};function ce(t,e,n){return t.config[e]===void 0&&t.parent?ce(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind(P(y({},n),{parent:t.parent?ce(t.parent,e,n):null})):t.config[e]}function kA(t){let e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Te(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function z(...t){return t.filter(e=>!!e).reduce((e,n)=>{let r=y({},e);return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){let a=o?o.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],o].join("; "):r[i]=o}),r},{})}function OA(t){return typeof t=="function"}function ne(t,e=void 0,...n){return OA(t)?e?t.bind(e)(...n):t(...n):t}function RA(t){return Object.prototype.toString.call(t)==="[object RegExp]"}var di=class{constructor(e){this.find=e.find,this.handler=e.handler}};var Gf=class{constructor(e){this.find=e.find,this.handler=e.handler}};function PA(t){return Object.prototype.toString.call(t).slice(8,-1)}function Hf(t){return PA(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function al(t,e){let n=y({},t);return Hf(t)&&Hf(e)&&Object.keys(e).forEach(r=>{Hf(e[r])?r in t?n[r]=al(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}var Ae=class t{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=y(y({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(ce(this,"addOptions",{name:this.name}))),this.storage=ne(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new t(e)}configure(e={}){let n=this.extend();return n.options=al(this.options,e),n.storage=ne(ce(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){let n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ne(ce(n,"addOptions",{name:n.name})),n.storage=ne(ce(n,"addStorage",{name:n.name,options:n.options})),n}};function FA(t,e,n){let{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{},a="",l=!0;return t.nodesBetween(r,i,(c,u,d,f)=>{var h;let p=s?.[c.type.name];p?(c.isBlock&&!l&&(a+=o,l=!0),d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e}))):c.isText?(a+=(h=c?.text)===null||h===void 0?void 0:h.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=o,l=!0)}),a}function LA(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}var eB=Ae.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new xe({key:new Qe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=LA(n);return FA(r,{from:s,to:a},{textSerializers:l})}}})]}}),VA=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),jA=(t=!1)=>({commands:e})=>e.setContent("",t),BA=()=>({state:t,tr:e,dispatch:n})=>{let{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;let{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;let p=Jt(h);if(a.type.isTextblock){let{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},$A=t=>e=>t(e),HA=()=>({state:t,dispatch:e})=>Ff(t,e),UA=(t,e)=>({editor:n,tr:r})=>{let{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);let s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new T(r.doc.resolve(s-1))),!0},zA=()=>({tr:t,dispatch:e})=>{let{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;let i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){let a=i.before(o),l=i.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},WA=t=>({tr:e,state:n,dispatch:r})=>{let i=Te(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){let l=o.before(s),c=o.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},GA=t=>({tr:e,dispatch:n})=>{let{from:r,to:i}=t;return n&&e.delete(r,i),!0},qA=()=>({state:t,dispatch:e})=>rl(t,e),YA=()=>({commands:t})=>t.keyboardShortcut("Enter"),KA=()=>({state:t,dispatch:e})=>Pf(t,e);function ol(t,e,n={strict:!0}){let r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:RA(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function qf(t,e,n={}){return t.find(r=>r.type===e&&ol(r.attrs,n))}function ZA(t,e,n={}){return!!qf(t,e,n)}function Kf(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;let i=qf([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(qf([...r.node.marks],e,n);o>0&&i.isInSet(t.parent.child(o-1).marks);)o-=1,s-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&ZA([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function wn(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var JA=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=wn(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){let d=Kf(l,o,e);if(d&&d.from<=c&&d.to>=u){let f=T.create(s,d.from,d.to);n.setSelection(f)}}return!0},QA=t=>e=>{let n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function L0(t){return t instanceof T}function or(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function XA(t,e=null){if(!e)return null;let n=N.atStart(t),r=N.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;let i=n.from,o=r.to;return e==="all"?T.create(t,or(0,i,o),or(t.content.size,i,o)):T.create(t,or(e,i,o),or(e,i,o))}function Zf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var e_=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e=y({scrollIntoView:!0},e);let s=()=>{Zf()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!L0(n.state.selection))return s(),!0;let a=XA(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},t_=(t,e)=>n=>t.every((r,i)=>e(r,P(y({},n),{index:i}))),n_=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Yf=t=>{let e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){let r=e[n];r.nodeType===3&&r.nodeValue&&!/\S/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Yf(r)}return t};function k0(t){let e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Yf(n),Yf(n)}function sl(t,e,n){if(n=y({slice:!0,parseOptions:{}},n),typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?C.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),sl("",e,n)}if(typeof t=="string"){let r=ei.fromSchema(e);return n.slice?r.parseSlice(k0(t),n.parseOptions).content:r.parse(k0(t),n.parseOptions)}return sl("",e,n)}function r_(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Pt||i instanceof Ie))return;let o=t.mapping.maps[r],s=0;o.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(N.near(t.doc.resolve(s),n))}var i_=t=>t.toString().startsWith("<"),o_=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n=y({parseOptions:{},updateSelection:!0},n);let s=sl(e,o.schema,{parseOptions:y({preserveWhitespace:"full"},n.parseOptions)});if(s.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((i_(s)?s:[s]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){let{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,s),n.updateSelection&&r_(r,r.steps.length-1,-1)}return!0},s_=()=>({state:t,dispatch:e})=>b0(t,e),a_=()=>({state:t,dispatch:e})=>E0(t,e),l_=()=>({state:t,dispatch:e})=>Af(t,e),c_=()=>({state:t,dispatch:e})=>Nf(t,e),u_=()=>({tr:t,state:e,dispatch:n})=>{try{let r=ri(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},d_=()=>({state:t,dispatch:e,tr:n})=>{try{let r=ri(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}};function ll(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function f_(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))Zf()||ll()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var h_=t=>({editor:e,view:n,tr:r,dispatch:i})=>{let o=f_(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{let u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Jf(t,e,n={}){let{from:r,to:i,empty:o}=t.selection,s=e?Te(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;let h=Math.max(r,f),p=Math.min(i,f+d.nodeSize);a.push({node:d,from:h,to:p})});let l=i-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>ol(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}var p_=(t,e={})=>({state:n,dispatch:r})=>{let i=Te(t,n.schema);return Jf(n,i,e)?M0(n,r):!1},m_=()=>({state:t,dispatch:e})=>Lf(t,e),g_=t=>({state:e,dispatch:n})=>{let r=Te(t,e.schema);return _0(r)(e,n)},y_=()=>({state:t,dispatch:e})=>Of(t,e);function V0(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function O0(t,e){let n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var v_=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null,a=V0(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Te(t,r.schema)),a==="mark"&&(s=wn(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,O0(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(O0(d.attrs,e)))})})}),!0):!1},D_=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),C_=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),w_=()=>({state:t,dispatch:e})=>_f(t,e),b_=()=>({state:t,dispatch:e})=>kf(t,e),E_=()=>({state:t,dispatch:e})=>S0(t,e),M_=()=>({state:t,dispatch:e})=>jf(t,e),S_=()=>({state:t,dispatch:e})=>Vf(t,e);function I_(t,e,n={}){return sl(t,e,{slice:!1,parseOptions:n})}var x_=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{let{doc:s}=r,a=I_(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!e),!0};function To(t,e){let n=wn(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});let a=s.find(l=>l.type.name===n.name);return a?y({},a.attrs):{}}function T_(t){for(let e=0;e<t.edgeCount;e+=1){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function A_(t,e){for(let n=t.depth;n>0;n-=1){let r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Qf(t){return e=>A_(e.$from,t)}function j0(t,e,n){let r=[];return t===e?n.resolve(t).marks().forEach(i=>{let o=n.resolve(t-1),s=Kf(o,i.type);s&&r.push(y({mark:i},s))}):n.nodesBetween(t,e,(i,o)=>{!i||i.nodeSize===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function il(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{let i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function __(t,e,n={}){let{empty:r,ranges:i}=t.selection,o=e?wn(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>ol(d.attrs,n,{strict:!1}));let s=0,a=[];if(i.forEach(({$from:d,$to:f})=>{let h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;let g=Math.max(h,v),w=Math.min(p,v+m.nodeSize),H=w-g;s+=H,a.push(...m.marks.map(Y=>({mark:Y,from:g,to:w})))})}),s===0)return!1;let l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>ol(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function R0(t,e){let{nodeExtensions:n}=kA(e),r=n.find(s=>s.name===t);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},o=ne(ce(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function N_(t,e,n){var r;let{selection:i}=e,o=null;if(L0(i)&&(o=i.$cursor),o){let a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}let{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){let h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}var k_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let{selection:o}=n,{empty:s,ranges:a}=o,l=wn(t,r.schema);if(i)if(s){let c=To(r,l);n.addStoredMark(l.create(y(y({},c),e)))}else a.forEach(c=>{let u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{let p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(g=>g.type===l)?f.marks.forEach(g=>{l===g.type&&n.addMark(p,m,l.create(y(y({},g.attrs),e)))}):n.addMark(p,m,l.create(e))})});return N_(r,n,l)},O_=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),R_=(t,e={})=>({state:n,dispatch:r,chain:i})=>{let o=Te(t,n.schema);return o.isTextblock?i().command(({commands:s})=>Bf(o,e)(n)?!0:s.clearNodes()).command(({state:s})=>Bf(o,e)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},P_=t=>({tr:e,dispatch:n})=>{if(n){let{doc:r}=e,i=or(t,0,r.content.size),o=E.create(r,i);e.setSelection(o)}return!0},F_=t=>({tr:e,dispatch:n})=>{if(n){let{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=T.atStart(r).from,a=T.atEnd(r).to,l=or(i,s,a),c=or(o,s,a),u=T.create(r,l,c);e.setSelection(u)}return!0},L_=t=>({state:e,dispatch:n})=>{let r=Te(t,e.schema);return N0(r)(e,n)};function P0(t,e){let n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){let r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var V_=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{let{selection:o,doc:s}=e,{$from:a,$to:l}=o,c=i.extensionManager.attributes,u=il(c,a.node().type.name,a.node().attrs);if(o instanceof E&&o.node.isBlock)return!a.parentOffset||!ft(s,a.pos)?!1:(r&&(t&&P0(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){let d=l.parentOffset===l.parent.content.size;o instanceof T&&e.deleteSelection();let f=a.depth===0?void 0:T_(a.node(-1).contentMatchAt(a.indexAfter(-1))),h=d&&f?[{type:f,attrs:u}]:void 0,p=ft(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&ft(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){let m=e.mapping.map(a.before()),v=e.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&P0(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},j_=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var o;let s=Te(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;let u=a.node(-1);if(u.type!==s)return!1;let d=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let v=C.empty,g=a.index(-1)?1:a.index(-2)?2:3;for(let Ge=a.depth-g;Ge>=a.depth-3;Ge-=1)v=C.from(a.node(Ge).copy(v));let w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,H=il(d,a.node().type.name,a.node().attrs),Y=((o=s.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(H))||void 0;v=v.append(C.from(s.createAndFill(null,Y)||void 0));let J=a.before(a.depth-(g-1));e.replace(J,a.after(-w),new b(v,4-g,0));let oe=-1;e.doc.nodesBetween(J,e.doc.content.size,(Ge,pt)=>{if(oe>-1)return!1;Ge.isTextblock&&Ge.content.size===0&&(oe=pt+1)}),oe>-1&&e.setSelection(T.near(e.doc.resolve(oe))),e.scrollIntoView()}return!0}let f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=il(d,u.type.name,u.attrs),p=il(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);let m=f?[{type:s,attrs:h},{type:f,attrs:p}]:[{type:s,attrs:h}];if(!ft(e.doc,a.pos,2))return!1;if(r){let{selection:v,storedMarks:g}=n,{splittableMarks:w}=i.extensionManager,H=g||v.$to.parentOffset&&v.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!H||!r)return!0;let Y=H.filter(J=>w.includes(J.type.name));e.ensureMarks(Y)}return!0},Uf=(t,e)=>{let n=Qf(s=>s.type===e)(t.selection);if(!n)return!0;let r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;let i=t.doc.nodeAt(r);return n.node.type===i?.type&&bt(t.doc,n.pos)&&t.join(n.pos),!0},zf=(t,e)=>{let n=Qf(s=>s.type===e)(t.selection);if(!n)return!0;let r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;let i=t.doc.nodeAt(r);return n.node.type===i?.type&&bt(t.doc,r)&&t.join(r),!0},B_=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{let{extensions:d,splittableMarks:f}=i.extensionManager,h=Te(t,s.schema),p=Te(e,s.schema),{selection:m,storedMarks:v}=s,{$from:g,$to:w}=m,H=g.blockRange(w),Y=v||m.$to.parentOffset&&m.$from.marks();if(!H)return!1;let J=Qf(oe=>R0(oe.type.name,d))(m);if(H.depth>=1&&J&&H.depth-J.depth<=1){if(J.node.type===h)return c.liftListItem(p);if(R0(J.node.type.name,d)&&h.validContent(J.node.content)&&a)return l().command(()=>(o.setNodeMarkup(J.pos,h),!0)).command(()=>Uf(o,h)).command(()=>zf(o,h)).run()}return!n||!Y||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Uf(o,h)).command(()=>zf(o,h)).run():l().command(()=>{let oe=u().wrapInList(h,r),Ge=Y.filter(pt=>f.includes(pt.type.name));return o.ensureMarks(Ge),oe?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Uf(o,h)).command(()=>zf(o,h)).run()},$_=(t,e={},n={})=>({state:r,commands:i})=>{let{extendEmptyMarkRange:o=!1}=n,s=wn(t,r.schema);return __(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},H_=(t,e,n={})=>({state:r,commands:i})=>{let o=Te(t,r.schema),s=Te(e,r.schema);return Jf(r,o,n)?i.setNode(s):i.setNode(o,n)},U_=(t,e={})=>({state:n,commands:r})=>{let i=Te(t,n.schema);return Jf(n,i,e)?r.lift(i):r.wrapIn(i,e)},z_=()=>({state:t,dispatch:e})=>{let n=t.plugins;for(let r=0;r<n.length;r+=1){let i=n[r],o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){let s=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){let l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},W_=()=>({tr:t,dispatch:e})=>{let{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},G_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;let{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=wn(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:f,to:h}=a,p=(o=c.marks().find(v=>v.type===l))===null||o===void 0?void 0:o.attrs,m=Kf(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},q_=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null,a=V0(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Te(t,r.schema)),a==="mark"&&(s=wn(t,r.schema)),i&&n.selection.ranges.forEach(l=>{let c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(d,f)=>{o&&o===d.type&&n.setNodeMarkup(f,void 0,y(y({},d.attrs),e)),s&&d.marks.length&&d.marks.forEach(h=>{if(s===h.type){let p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);n.addMark(p,m,s.create(y(y({},h.attrs),e)))}})})}),!0):!1},Y_=(t,e={})=>({state:n,dispatch:r})=>{let i=Te(t,n.schema);return T0(i,e)(n,r)},K_=(t,e={})=>({state:n,dispatch:r})=>{let i=Te(t,n.schema);return A0(i,e)(n,r)},Z_=Object.freeze({__proto__:null,blur:VA,clearContent:jA,clearNodes:BA,command:$A,createParagraphNear:HA,cut:UA,deleteCurrentNode:zA,deleteNode:WA,deleteRange:GA,deleteSelection:qA,enter:YA,exitCode:KA,extendMarkRange:JA,first:QA,focus:e_,forEach:t_,insertContent:n_,insertContentAt:o_,joinUp:s_,joinDown:a_,joinBackward:l_,joinForward:c_,joinItemBackward:u_,joinItemForward:d_,keyboardShortcut:h_,lift:p_,liftEmptyBlock:m_,liftListItem:g_,newlineInCode:y_,resetAttributes:v_,scrollIntoView:D_,selectAll:C_,selectNodeBackward:w_,selectNodeForward:b_,selectParentNode:E_,selectTextblockEnd:M_,selectTextblockStart:S_,setContent:x_,setMark:k_,setMeta:O_,setNode:R_,setNodeSelection:P_,setTextSelection:F_,sinkListItem:L_,splitBlock:V_,splitListItem:j_,toggleList:B_,toggleMark:$_,toggleNode:H_,toggleWrap:U_,undoInputRule:z_,unsetAllMarks:W_,unsetMark:G_,updateAttributes:q_,wrapIn:Y_,wrapInList:K_}),tB=Ae.create({name:"commands",addCommands(){return y({},Z_)}}),nB=Ae.create({name:"editable",addProseMirrorPlugins(){return[new xe({key:new Qe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),rB=Ae.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:t}=this;return[new xe({key:new Qe("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;let r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;let r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),iB=Ae.create({name:"keymap",addKeyboardShortcuts(){let t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{let{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,g=m&&p.parent.childCount===1?v===d.pos:N.atStart(c).from===f;return!u||!g||!h.type.isTextblock||h.textContent.length?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i=y({},r),o=P(y({},r),{"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return Zf()||ll()?o:i},addProseMirrorPlugins(){return[new xe({key:new Qe("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;let{empty:i,from:o,to:s}=e.selection,a=N.atStart(e.doc).from,l=N.atEnd(e.doc).to;if(i||!(o===a&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;let d=n.tr,f=F0({state:n,transaction:d}),{commands:h}=new Wf({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),oB=Ae.create({name:"tabindex",addProseMirrorPlugins(){return[new xe({key:new Qe("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});function Lt(t){return new di({find:t.find,handler:({state:e,range:n,match:r})=>{let i=ne(t.getAttributes,void 0,r);if(i===!1||i===null)return null;let{tr:o}=e,s=r[r.length-1],a=r[0];if(s){let l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(j0(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);let f=n.from+l+s.length;o.addMark(n.from+l,f,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function B0(t){return new di({find:t.find,handler:({state:e,range:n,match:r})=>{let i=ne(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from,a=n.to,l=t.type.create(i);if(r[1]){let c=r[0].lastIndexOf(r[1]),u=s+c;u>a?u=a:a=u+r[1].length;let d=r[0][r[0].length-1];o.insertText(d,s+r[0].length-1),o.replaceWith(u,a,l)}else r[0]&&o.insert(s-1,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a));o.scrollIntoView()}})}function Ao(t){return new di({find:t.find,handler:({state:e,range:n,match:r})=>{let i=e.doc.resolve(n.from),o=ne(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function bn(t){return new di({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{let o=ne(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&ni(l,t.type,o);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){let{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){let m=p.filter(v=>h.includes(v.type.name));s.ensureMarks(m)}}if(t.keepAttributes){let d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,o).run()}let u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&bt(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}var We=class t{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=y(y({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(ce(this,"addOptions",{name:this.name}))),this.storage=ne(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new t(e)}configure(e={}){let n=this.extend();return n.options=al(this.options,e),n.storage=ne(ce(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){let n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ne(ce(n,"addOptions",{name:n.name})),n.storage=ne(ce(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){let{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){let s=i.marks();if(!!!s.find(c=>c?.type.name===n.name))return!1;let l=s.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}},ee=class t{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=y(y({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(ce(this,"addOptions",{name:this.name}))),this.storage=ne(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new t(e)}configure(e={}){let n=this.extend();return n.options=al(this.options,e),n.storage=ne(ce(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){let n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ne(ce(n,"addOptions",{name:n.name})),n.storage=ne(ce(n,"addStorage",{name:n.name,options:n.options})),n}};function Vt(t){return new Gf({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{let o=ne(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;let{tr:s}=e,a=r[r.length-1],l=r[0],c=n.to;if(a){let u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(j0(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}var J_=/^\s*>\s$/,$0=ee.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",z(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[bn({find:J_,type:this.type})]}});var Q_=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,X_=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,eN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,tN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,H0=We.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",z(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Lt({find:Q_,type:this.type}),Lt({find:eN,type:this.type})]},addPasteRules(){return[Vt({find:X_,type:this.type}),Vt({find:tN,type:this.type})]}});var nN=ee.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",z(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),U0=We.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",z(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{let n=To(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),z0=/^\s*([-+*])\s$/,W0=ee.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",z(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(nN.name,this.editor.getAttributes(U0.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=bn({find:z0,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=bn({find:z0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(U0.name),editor:this.editor})),[t]}});var rN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,iN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,G0=We.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",z(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Lt({find:rN,type:this.type})]},addPasteRules(){return[Vt({find:iN,type:this.type})]}});var oN=/^```([a-z]+)?[\s\n]$/,sN=/^~~~([a-z]+)?[\s\n]$/,q0=ee.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;let{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",z(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;let o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;let{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;let a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[Ao({find:oN,type:this.type,getAttributes:t=>({language:t[1]})}),Ao({find:sN,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new xe({key:new Qe("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;let n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i?.mode;if(!n||!o)return!1;let{tr:s}=t.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(T.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}});var Y0=ee.create({name:"doc",topNode:!0,content:"block+"});function K0(t={}){return new xe({view(e){return new Xf(e,t)}})}var Xf=class{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Ga(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}};var Z0=Ae.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[K0(this.options)]}});var _e=class t extends N{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return t.valid(r)?new t(r):N.near(r)}content(){return b.empty}eq(e){return e instanceof t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))}getBookmark(){return new eh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!aN(e)||!lN(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&t.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(t.valid(l))return l}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!E.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(t.valid(a))return a}return null}}};_e.prototype.visible=!1;_e.findFrom=_e.findGapCursorFrom;N.jsonID("gapcursor",_e);var eh=class t{constructor(e){this.pos=e}map(e){return new t(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return _e.valid(n)?new _e(n):N.near(n)}};function aN(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lN(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function J0(){return new xe({props:{decorations:fN,createSelectionBetween(t,e,n){return e.pos==n.pos&&_e.valid(n)?new _e(n):null},handleClick:uN,handleKeyDown:cN,handleDOMEvents:{beforeinput:dN}}})}var cN=v0({ArrowLeft:cl("horiz",-1),ArrowRight:cl("horiz",1),ArrowUp:cl("vert",-1),ArrowDown:cl("vert",1)});function cl(t,e){let n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof T){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=_e.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new _e(c))),!0):!1}}function uN(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!_e.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&E.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new _e(r))),!0)}function dN(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof _e))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=C.empty;for(let s=r.length-1;s>=0;s--)i=C.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new b(i,0,0));return o.setSelection(T.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function fN(t){if(!(t.selection instanceof _e))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Xe.create(t.doc,[vn.widget(t.selection.head,e,{key:"gapcursor"})])}var Q0=Ae.create({name:"gapCursor",addProseMirrorPlugins(){return[J0()]},extendNodeSchema(t){var e;let n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ne(ce(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var X0=ee.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",z(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{let{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;let{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){let d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var eD=ee.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,z(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>P(y({},t),{[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Ao({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var ul=200,be=function(){};be.prototype.append=function(e){return e.length?(e=be.from(e),!this.length&&e||e.length<ul&&this.leafAppend(e)||this.length<ul&&e.leafPrepend(this)||this.appendInner(e)):this};be.prototype.prepend=function(e){return e.length?be.from(e).append(this):this};be.prototype.appendInner=function(e){return new hN(this,e)};be.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?be.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};be.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};be.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};be.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};be.from=function(e){return e instanceof be?e:e&&e.length?new tD(e):be.empty};var tD=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ul)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ul)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(be);be.empty=new tD([]);var hN=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(be),th=be;var pN=500,sr=class t{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new jt(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new jt(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new t(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new jt(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),n&&(s++,n=void 0),i||(l=f)}let c=s-r.depth;return c>gN&&(a=mN(a,c),s-=c),new t(a.append(o),s)}remapping(e,n){let r=new $a;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new t(this.items.append(e.map(n=>new jt(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=n;this.items.forEach(f=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(o.slice(l+1,h));v&&a++,r.push(new jt(p,m,v))}else r.push(new jt(p))},i);let c=[];for(let f=n;f<s;f++)c.push(new jt(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new t(u,a);return d.emptyItemCount()>pN&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let d=new jt(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new t(th.from(i.reverse()),o)}};sr.empty=new sr(th.empty,0);function mN(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}var jt=class t{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}},Bt=class{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}},gN=20;function yN(t,e,n,r){let i=n.getMeta(En),o;if(i)return i.historyState;n.getMeta(DN)&&(t=new Bt(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(En))return s.getMeta(En).redo?new Bt(t.done.addTransform(n,void 0,r,dl(e)),t.undone,nD(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Bt(t.done,t.undone.addTransform(n,void 0,r,dl(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!vN(n,t.prevRanges)),c=s?nh(t.prevRanges,n.mapping):nD(n.mapping.maps[n.steps.length-1]);return new Bt(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,dl(e)),sr.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Bt(t.done.rebased(n,o),t.undone.rebased(n,o),nh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Bt(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),nh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function vN(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function nD(t){let e=[];return t.forEach((n,r,i,o)=>e.push(i,o)),e}function nh(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function iD(t,e,n,r){let i=dl(e),o=En.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new Bt(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(En,{redo:r,historyState:c}).scrollIntoView())}var rh=!1,rD=null;function dl(t){let e=t.plugins;if(rD!=e){rh=!1,rD=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){rh=!0;break}}return rh}var En=new Qe("history"),DN=new Qe("closeHistory");function oD(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new xe({key:En,state:{init(){return new Bt(sr.empty,sr.empty,null,0,-1)},apply(e,n,r){return yN(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?ih:r=="historyRedo"?oh:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}var ih=(t,e)=>{let n=En.getState(t);return!n||n.done.eventCount==0?!1:(e&&iD(n,t,e,!1),!0)},oh=(t,e)=>{let n=En.getState(t);return!n||n.undone.eventCount==0?!1:(e&&iD(n,t,e,!0),!0)};var sD=Ae.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>ih(t,e),redo:()=>({state:t,dispatch:e})=>oh(t,e)}},addProseMirrorPlugins(){return[oD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});var aD=ee.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",z(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{let{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:o})=>{var s;if(o){let{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(T.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(E.create(i.doc,a.pos)):i.setSelection(T.create(i.doc,a.pos));else{let c=(s=a.parent.type.contentMatch.defaultType)===null||s===void 0?void 0:s.create();c&&(i.insert(l,c),i.setSelection(T.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[B0({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}});var CN=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,wN=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,bN=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,EN=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,lD=We.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",z(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Lt({find:CN,type:this.type}),Lt({find:bN,type:this.type})]},addPasteRules(){return[Vt({find:wN,type:this.type}),Vt({find:EN,type:this.type})]}});var cD=ee.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",z(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});var MN=ee.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",z(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),uD=We.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",z(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{let n=To(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),dD=/^(\d+)\.\s$/,fD=ee.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){let r=t,{start:e}=r,n=dh(r,["start"]);return e===1?["ol",z(this.options.HTMLAttributes,n),0]:["ol",z(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(MN.name,this.editor.getAttributes(uD.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=bn({find:dD,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=bn({find:dD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>y({start:+e[1]},this.editor.getAttributes(uD.name)),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}});var hD=ee.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",z(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var SN=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,IN=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,pD=We.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",z(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){let t={};return ll()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[Lt({find:SN,type:this.type})]},addPasteRules(){return[Vt({find:IN,type:this.type})]}});var mD=ee.create({name:"text",group:"inline"});var xN=Ae.create({name:"starterKit",addExtensions(){var t,e,n,r,i,o,s,a,l,c,u,d,f,h,p,m,v,g;let w=[];return this.options.blockquote!==!1&&w.push($0.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&w.push(H0.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&w.push(W0.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(G0.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(q0.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&w.push(Y0.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&w.push(Z0.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&w.push(Q0.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(X0.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(eD.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(sD.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(aD.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(lD.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&w.push(cD.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&w.push(fD.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&w.push(hD.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&w.push(pD.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&w.push(mD.configure((g=this.options)===null||g===void 0?void 0:g.text)),w}});var fl=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gD=(()=>{let e=class e{constructor(){this.zooming=!0,this.childDragging=!0,this.animatePath=!1,this.direction=new Xy("horizontal"),this.demoService=D(fl)}ngOnInit(){}fitToWindow(){this.demoService.flow.fitToWindow()}trigger(){this.demoService.flow.arrangeChildren(),this.demoService.flow.updateArrows()}childDraggingFn(){this.childDragging=!this.childDragging,this.demoService.flow.updateChildDragging(this.childDragging)}zoomingFn(){this.zooming=!this.zooming,this.demoService.flow.updateZooming(this.zooming)}animatePathFn(){this.animatePath=!this.animatePath,this.demoService.flow.el.nativeElement.classList.toggle("animate-path")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["app-toolbar"]],standalone:!0,features:[Ue],decls:20,vars:7,consts:[[1,"flex","items-center","gap-3"],[3,"click"],["for","zoomingId"],["id","zoomingId","type","checkbox",3,"checked","click"],["for","childDraggingId"],["id","childDraggingId","type","checkbox",3,"checked","click"],["for","animatePath"],["id","animatePath","type","checkbox",3,"checked","click"],["for","direction"],["id","direction","type","radio",3,"value","formControl"],["for","direction1"],["id","direction1","type","radio",3,"value","formControl"]],template:function(i,o){i&1&&(re(0,"div",0)(1,"button",1),Se("click",function(){return o.trigger()}),lt(2,"Arrange"),te(),re(3,"label",2)(4,"input",3),Se("click",function(){return o.zoomingFn()}),te(),lt(5,"zooming "),te(),re(6,"label",4)(7,"input",5),Se("click",function(){return o.childDraggingFn()}),te(),lt(8,"Child Dragging "),te(),re(9,"label",6)(10,"input",7),Se("click",function(){return o.animatePathFn()}),te(),lt(11,"Animate "),te(),re(12,"button",1),Se("click",function(){return o.fitToWindow()}),lt(13,"Fit to window"),te(),re(14,"label",8),De(15,"input",9),lt(16,"Horizontal "),te(),re(17,"label",10),De(18,"input",11),lt(19,"Vertical "),te()()),i&2&&(wt(4),Yt("checked",o.zooming),wt(3),Yt("checked",o.childDragging),wt(3),Yt("checked",o.animatePath),wt(5),Yt("value","horizontal")("formControl",o.direction),wt(3),Yt("value","vertical")("formControl",o.direction))},dependencies:[nv,_a,jd,Jy,Bd],encapsulation:2});let t=e;return t})();var TN=(t,e)=>e.id;function AN(t,e){if(t&1){let n=Ks();re(0,"div",3)(1,"div",4),lt(2),te(),re(3,"button",5),Se("click",function(){let o=Ri(n).$implicit,s=zi();return Pi(s.addNode(o))}),lt(4,"Add"),te(),re(5,"button",5),Se("click",function(){let o=Ri(n).$implicit,s=zi();return Pi(s.deleteNode(o.id))}),lt(6,"Delete"),te()()}if(t&2){let n=e.$implicit;Yt("flowChild",n),wt(2),xu(" ",n.id," ")}}var yD=(()=>{let e=class e{constructor(){this.title="angular-flow",this.list=[],this.linkingFrom=null,this.demoService=D(fl),this.list=structuredClone(_N),this.list=[{x:40,y:40,id:"1",deps:[]},{x:249.09375,y:-39,id:"2",deps:["1"]},{x:476.09375,y:67,id:"3",deps:["2"]},{x:662.09375,y:12,id:"4",deps:["2"]},{x:-58.90625,y:349,id:"5",deps:["1"]},{x:381.09375,y:416,id:"6",deps:["5"]},{x:164.09375,y:175,id:"7",deps:["5"]},{x:164.09375,y:175,id:"8",deps:["5"]},{x:688.09375,y:255,id:"9",deps:["6","7","8"]}]}ngAfterViewInit(){this.demoService.flow=this.flowComponent}addNode(r){let o=(this.list.reduce((a,l)=>Math.max(+l.id,a),0)+1).toString(),s={x:40+this.list.length*160,y:40,id:o,deps:[r.id]};this.list.push(s)}deleteNode(r){this.list=structuredClone(this.deleteNodeI(r,this.list))}deleteNodeI(r,i){if(r&&i.length>0){let o=i.findIndex(a=>a.id==r),s=i.splice(o,1)[0];return i.reduce((a,l)=>{let c=l.deps.length;return l.deps=l.deps.filter(u=>u!==s.id),(l.deps.length===c||l.deps.length>0)&&a.push(l),a},[])}return i}startLinking(r){if(this.linkingFrom===null)this.linkingFrom=r;else{if(this.linkingFrom!==r){let i=this.list[this.linkingFrom],o=this.list[r];i.deps.push(o.id)}this.linkingFrom=null}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["app-root"]],viewQuery:function(i,o){if(i&1&&at(kd,5),i&2){let s;$e(s=He())&&(o.flowComponent=s.first)}},standalone:!0,features:[Ue],decls:5,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-[700px]"],[1,"block","p-3"],[1,"max-w-[90%]","max-h-[90%]","border","bg-gray-100"],[1,"card","flex","items-center","justify-center","w-[250px]","h-[60px]","bg-white",3,"flowChild"],[1,"pointer-events-none","flex","items-center","justify-center","w-7","h-7","mr-6","bg-gray-200","rounded-full"],[3,"click"],["class","card flex items-center justify-center w-[250px] h-[60px] bg-white",3,"flowChild"]],template:function(i,o){i&1&&(re(0,"div",0),De(1,"app-toolbar",1),re(2,"ngu-flow",2),qs(3,AN,7,2,"div",6,TN),te()()),i&2&&(wt(3),Ys(o.list))},dependencies:[kd,Ma,gD],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 5px #8e8e8e5e;border-radius:5px}app-flow[_ngcontent-%COMP%]{--flow-dot-color: gray;--flow-path-color: gray;--dot-size: 1px}button[_ngcontent-%COMP%]{padding:.25rem}"],changeDetection:0});let t=e;return t})(),_N=[{x:0,y:0,id:"1",deps:[]},{x:300,y:-400,id:"2",deps:["1"]},{x:300,y:-200,id:"3",deps:["1"]},{x:300,y:0,id:"4",deps:["1"]},{x:300,y:200,id:"5",deps:["1"]},{x:300,y:400,id:"6",deps:["1"]},{x:600,y:-500,id:"7",deps:["2"]},{x:600,y:-400,id:"8",deps:["2"]},{x:600,y:-200,id:"9",deps:["3"]},{x:600,y:-100,id:"10",deps:["3"]},{x:600,y:0,id:"11",deps:["4"]},{x:600,y:100,id:"12",deps:["4"]},{x:600,y:200,id:"13",deps:["5"]},{x:600,y:300,id:"14",deps:["5"]},{x:600,y:400,id:"15",deps:["6"]},{x:600,y:500,id:"16",deps:["6"]},{x:900,y:-500,id:"17",deps:["7"]},{x:900,y:-400,id:"18",deps:["8"]},{x:900,y:-200,id:"19",deps:["9"]},{x:900,y:-100,id:"20",deps:["10"]},{x:900,y:0,id:"21",deps:["11"]},{x:900,y:100,id:"22",deps:["12"]},{x:900,y:200,id:"23",deps:["13"]},{x:900,y:300,id:"24",deps:["14"]},{x:900,y:400,id:"25",deps:["15"]},{x:900,y:500,id:"26",deps:["16"]}];var NN=["g"],kN=["rects"];function ON(t,e){if(t&1){let n=Ks();Li(),re(0,"rect",2,3),Se("click",function(i){Ri(n);let o=zi();return Pi(o.selectRect(i))}),te()}if(t&2){let n=e.$implicit;Ui("x",n.x)("y",n.y)("width",n.width)("height",n.height)}}var vD=(()=>{let e=class e{constructor(){this.rects=[],this.nodes=[];let r=60,i=r,o=r,s=0+i,a=0+o,l=100-r/2,c=100-r/2,u=0,d=0;for(;u<5;){for(;d<10;)this.rects.push({x:s,y:a,width:l,height:c}),s+=l+r,d++;a+=c+r,s=0+i,d=0,u++}}ngOnInit(){}selectRect(r){console.log(r),this.nodes.push(r.target),this.nodes.length===2&&(this.drawPath(document.querySelector("svg"),this.nodes[0],this.nodes[1]),this.nodes=[])}drawPath(r,i,o){let{width:s,height:a}=i.getBoundingClientRect(),l=+i.getAttribute("x")+s/2,c=+i.getAttribute("y")+a/2,{width:u,height:d}=o.getBoundingClientRect(),f=+o.getAttribute("x")+u/2,h=+o.getAttribute("y")+d/2,p=[],m=5,v=10,g=60,w=100,H=100,Y=g/2+w/2,J=g/2+H/2,oe=Y+(v-1)*(w+g),Ge=J+(m-1)*(H+g);for(let K=0;K<m;K++){let R=[];for(let W=0;W<v;W++){let he=Y+W*(w+g),$t=J+K*(H+g);R.push({x:he,y:$t})}p.push(R)}let pt=null,Mn=null,_o=1/0;for(let K=0;K<m;K++)for(let R=0;R<v;R++){let W=p[K][R],he=Math.sqrt((W.x-l)**2+(W.y-c)**2),$t=Math.sqrt((W.x-f)**2+(W.y-h)**2);he<_o&&(pt=W,_o=he),$t<_o&&(Mn=W,_o=$t)}let ar=[pt],sh=new Map,fi=new Map,hl=new Map;for(fi.set(pt,0),hl.set(pt,ah(pt,Mn));ar.length>0;){let K=bD(ar,hl);if(K===Mn){let R=ED(sh,Mn),W=`M${l},${c} ${R} ${f},${h}`,he=document.createElementNS("http://www.w3.org/2000/svg","path");return he.setAttribute("d",W),he.setAttribute("stroke","black"),he.setAttribute("stroke-width","2"),he.setAttribute("fill","none"),this.g.nativeElement.appendChild(he),he}ar.splice(ar.indexOf(K),1);for(let R of MD(K,p)){let W=fi.get(K)+SD(K,R);(!fi.has(R)||W<fi.get(R))&&(sh.set(R,K),fi.set(R,W),hl.set(R,W+ah(R,Mn)),ar.includes(R)||ar.push(R))}}function ah(K,R){return Math.sqrt((K.x-R.x)**2+(K.y-R.y)**2)}function bD(K,R){let W=K[0],he=R.get(W);for(let $t of K){let Ht=R.get($t);Ht<he&&(W=$t,he=Ht)}return W}function ED(K,R){let W="";for(;K.has(R);){let he=K.get(R);W=`L${R.x},${R.y} ${W}`,R=he}return W}function MD(K,R){let W=[],he=R.length,$t=R[0].length,Ht=Math.floor((K.y-J)/(H+g)),lr=Math.floor((K.x-Y)/(w+g));return Ht>0&&W.push(R[Ht-1][lr]),Ht<he-1&&W.push(R[Ht+1][lr]),lr>0&&W.push(R[Ht][lr-1]),lr<$t-1&&W.push(R[Ht][lr+1]),W}function SD(K,R){return Math.sqrt((K.x-R.x)**2+(K.y-R.y)**2)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["app-svg"]],viewQuery:function(i,o){if(i&1&&(at(NN,5),at(kN,5)),i&2){let s;$e(s=He())&&(o.g=s.first),$e(s=He())&&(o.boxes=s)}},standalone:!0,features:[Ue],decls:5,vars:0,consts:[[1,"w-[1100px]","h-[720px]","border","border-red-500"],["g",""],["fill","cornflowerblue",3,"click"],["rects",""],["fill","cornflowerblue"]],template:function(i,o){i&1&&(Li(),re(0,"svg",0),qs(1,ON,2,4,":svg:rect",4,Cg),De(3,"g",null,1),te()),i&2&&(wt(),Ys(o.rects))},encapsulation:2,changeDetection:0});let t=e;return t})();var DD=[{path:"",component:yD},{path:"svg",component:vD}];var CD={providers:[Ny(DD,ky({skipInitialTransition:!0}))]};var wD=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Be({type:e,selectors:[["app-root"]],standalone:!0,features:[Ue],decls:1,vars:0,template:function(i,o){i&1&&De(0,"router-outlet")},dependencies:[Md],encapsulation:2,changeDetection:0});let t=e;return t})();Yg(wD,CD).catch(t=>console.error(t));
